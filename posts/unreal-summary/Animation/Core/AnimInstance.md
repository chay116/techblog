---
title: "UAnimInstance - ëŸ°íƒ€ì„ ì• ë‹ˆë©”ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ (Runtime Animation Instance)"
date: "2025-11-21"
status: "stable"
project: "UnrealEngine"
lang: "ko"
category: "unreal-summary"
track: "Animation"
tags: ["unreal", "Animation", "Core"]
---
# UAnimInstance - ëŸ°íƒ€ì„ ì• ë‹ˆë©”ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ (Runtime Animation Instance)

## ğŸ§­ ê°œìš” (Overview)

**UAnimInstance**ëŠ” Unreal Animation Frameworkì˜ **í•µì‹¬ ëŸ°íƒ€ì„ í´ë˜ìŠ¤**ë¡œ, Animation Blueprintì˜ **ì‹¤ì œ ì‹¤í–‰ ì¸ìŠ¤í„´ìŠ¤**ì…ë‹ˆë‹¤. Skeletal Mesh Componentë§ˆë‹¤ í•˜ë‚˜ì”© ìƒì„±ë˜ë©°, ë§¤ í”„ë ˆì„ ì• ë‹ˆë©”ì´ì…˜ ê·¸ë˜í”„ë¥¼ í‰ê°€í•˜ê³  ìµœì¢… í¬ì¦ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

**í•µì‹¬ ì—­í• :**
- **AnimGraph ì‹¤í–‰**: ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œ ì •ì˜í•œ ì• ë‹ˆë©”ì´ì…˜ ë…¸ë“œ ê·¸ë˜í”„ í‰ê°€
- **EventGraph ë¡œì§**: ê²Œì„ ë¡œì§(C++ ë˜ëŠ” BP)ì—ì„œ ì• ë‹ˆë©”ì´ì…˜ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
- **Montage ê´€ë¦¬**: ì• ë‹ˆë©”ì´ì…˜ ëª½íƒ€ì£¼ ì¬ìƒ, ì •ì§€, ì¼ì‹œì •ì§€, ì„¹ì…˜ ì í”„
- **Slot ì‹œìŠ¤í…œ**: ìŠ¬ë¡¯ ê¸°ë°˜ ë™ì  ì• ë‹ˆë©”ì´ì…˜ ì‚½ì…
- **ì»¤ë¸Œ ê´€ë¦¬**: ì• ë‹ˆë©”ì´ì…˜ ì»¤ë¸Œ ê°’ ì½ê¸° ë° ì˜¤ë²„ë¼ì´ë“œ
- **ë£¨íŠ¸ ëª¨ì…˜**: ë£¨íŠ¸ ëª¨ì…˜ ì¶”ì¶œ ë° ìºë¦­í„° ì´ë™ ì ìš©
- **ë³‘ë ¬ í‰ê°€**: Worker Threadì—ì„œ ì•ˆì „í•œ ì• ë‹ˆë©”ì´ì…˜ í‰ê°€ (FAnimInstanceProxy)

**ğŸ“‚ ìœ„ì¹˜:** `Engine/Source/Runtime/Engine/Classes/Animation/AnimInstance.h:351`

---

## ğŸ¯ ì„¤ê³„ ì² í•™: ì™œ Proxy íŒ¨í„´ì¸ê°€?

### ë¬¸ì œ: ë©€í‹°ìŠ¤ë ˆë“œ ì• ë‹ˆë©”ì´ì…˜ í‰ê°€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UE 4.11 ì´ì „ (ë‹¨ì¼ ìŠ¤ë ˆë“œ)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Game Thread (ìˆœì°¨ ì²˜ë¦¬):                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  1. EventGraph ì‹¤í–‰                      â”‚                          â”‚
â”‚  â”‚  2. ë³€ìˆ˜ ì—…ë°ì´íŠ¸                         â”‚                          â”‚
â”‚  â”‚  3. AnimGraph í‰ê°€ (ë¬´ê±°ìš´ ì‘ì—…!)        â”‚                          â”‚
â”‚  â”‚  4. í¬ì¦ˆ ê³„ì‚°                             â”‚                          â”‚
â”‚  â”‚  5. ë³¸ ë³€í™˜ ì ìš©                          â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œì :                                                              â”‚
â”‚  - ë³µì¡í•œ ìºë¦­í„°: ~2-5ms (Game Thread ë³‘ëª©)                             â”‚
â”‚  - ë‹¤ìˆ˜ ìºë¦­í„°: ì„ í˜• ì¦ê°€ (10ê°œ ìºë¦­í„° = 20-50ms!)                       â”‚
â”‚  - CPU ì½”ì–´ ë‚­ë¹„ (ë©€í‹°ì½”ì–´ í™œìš© ë¶ˆê°€)                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                   Proxy íŒ¨í„´ ë„ì… (UE 4.11+):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UE 4.11+ (ë©€í‹°ìŠ¤ë ˆë“œ í‰ê°€)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Game Thread:                      Worker Threads (ë³‘ë ¬):               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ EventGraph     â”‚                â”‚ AnimGraph 1    â”‚                  â”‚
â”‚  â”‚ ì‹¤í–‰           â”‚                â”‚ í‰ê°€           â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â†“                                  â†“                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Proxyë¡œ ë°ì´í„° â”‚                â”‚ AnimGraph 2    â”‚                  â”‚
â”‚  â”‚ ë³µì‚¬           â”‚                â”‚ í‰ê°€           â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â†“                                  â†“                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚         í¬ì¦ˆ ê²°ê³¼ ìˆ˜ì§‘ ë° ì ìš©                â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²°ì±…:                                                              â”‚
â”‚  - FAnimInstanceProxy: ìŠ¤ë ˆë“œ ì•ˆì „ ë°ì´í„° ë³µì‚¬ë³¸                          â”‚
â”‚  - Worker Threadì—ì„œ AnimGraph í‰ê°€                                     â”‚
â”‚  - NativeThreadSafeUpdateAnimation() ì‚¬ìš©                               â”‚
â”‚  - ì„±ëŠ¥ í–¥ìƒ: 2-3ë°° (ë³µì¡í•œ ìºë¦­í„°ì˜ ê²½ìš°)                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ê³„ ê²°ì •

| ê²°ì • ì‚¬í•­ | ì´ìœ  | íŠ¸ë ˆì´ë“œì˜¤í”„ |
|----------|------|-------------|
| **Proxy íŒ¨í„´** | UObjectëŠ” ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì§€ ì•ŠìŒ | ë°ì´í„° ë³µì‚¬ ì˜¤ë²„í—¤ë“œ (ë¯¸ë¯¸í•¨) |
| **ë°ì´í„° ë³µì‚¬** | ê²Œì„ ìŠ¤ë ˆë“œì™€ ì™„ì „ ë¶„ë¦¬ | ë©”ëª¨ë¦¬ 2ë°° (Proxy + Original) |
| **Counter ê¸°ë°˜ ë™ê¸°í™”** | ì„¸ë°€í•œ ìºì‹œ ë¬´íš¨í™” | ë³µì¡ë„ ì¦ê°€ |
| **ì„ íƒì  ë³‘ë ¬í™”** | ë£¨íŠ¸ ëª¨ì…˜ í•„ìš” ì‹œ ì¦‰ì‹œ ì‹¤í–‰ | ì¡°ê±´ ë¶„ê¸° í•„ìš” |

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `Engine/Source/Runtime/Engine/Classes/Animation/AnimInstance.h:356` - `typedef FAnimInstanceProxy ProxyType;`
- `Engine/Source/Runtime/Engine/Public/Animation/AnimInstanceProxy.h:140-144` - FAnimInstanceProxy ì •ì˜

---

## ğŸ—ï¸ í´ë˜ìŠ¤ ê³„ì¸µ êµ¬ì¡° (Class Hierarchy)

### UAnimInstance í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UAnimInstance                                   â”‚
â”‚  (Animation Blueprintì˜ ëŸ°íƒ€ì„ ì¸ìŠ¤í„´ìŠ¤)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ìƒì†: UObject â†’ UAnimInstance                                          â”‚
â”‚                                                                         â”‚
â”‚  Private (í•µì‹¬ ë©¤ë²„):                                                    â”‚
â”‚    - AnimInstanceProxy : FAnimInstanceProxy*       // ìŠ¤ë ˆë“œ ì•ˆì „ Proxy â”‚
â”‚    - CurrentSkeleton : USkeleton*                  // ìŠ¤ì¼ˆë ˆí†¤ ì°¸ì¡°     â”‚
â”‚    - RootMotionMontageInstance : FAnimMontageInstance*  // ë£¨íŠ¸ ëª¨ì…˜   â”‚
â”‚    - MontageInstances : TArray<FAnimMontageInstance*>   // ëª½íƒ€ì£¼ ë°°ì—´ â”‚
â”‚    - ActiveMontagesMap : TMap<UAnimMontage*, FAnimMontageInstance*>    â”‚
â”‚    - SlotWeightTracker : TMap<FName, FMontageActiveSlotTracker>        â”‚
â”‚    - NotifyQueue : FAnimNotifyQueue                // ì•Œë¦¼ í           â”‚
â”‚    - ExtractedRootMotion : FRootMotionMovementParams  // ë£¨íŠ¸ ëª¨ì…˜     â”‚
â”‚    - QueuedMontageEndedEvents : TArray<FQueuedMontageEndedEvent>       â”‚
â”‚                                                                         â”‚
â”‚  Public (ì£¼ìš” ë©”ì„œë“œ):                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ì´ˆê¸°í™” ë° ìƒëª…ì£¼ê¸°                                        â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + InitializeAnimation(bDeferRootNode) : void             â”‚       â”‚
â”‚    â”‚  + NativeInitializeAnimation() : void                     â”‚       â”‚
â”‚    â”‚  + NativeBeginPlay() : void                               â”‚       â”‚
â”‚    â”‚  + UninitializeAnimation() : void                         â”‚       â”‚
â”‚    â”‚  + NativeUninitializeAnimation() : void                   â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ì—…ë°ì´íŠ¸ (ë§¤ í”„ë ˆì„)                                      â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + UpdateAnimation(DeltaSeconds, bValidRootMotion) : void â”‚       â”‚
â”‚    â”‚  + NativeUpdateAnimation(DeltaSeconds) : void             â”‚       â”‚
â”‚    â”‚  + NativeThreadSafeUpdateAnimation(DeltaSeconds) : void   â”‚       â”‚
â”‚    â”‚  + PostUpdateAnimation() : void                           â”‚       â”‚
â”‚    â”‚  + ParallelUpdateAnimation() : void                       â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  í‰ê°€ (Pose ìƒì„±)                                          â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + PreEvaluateAnimation() : void                          â”‚       â”‚
â”‚    â”‚  + ParallelEvaluateAnimation(...) : void                  â”‚       â”‚
â”‚    â”‚  + PostEvaluateAnimation() : void                         â”‚       â”‚
â”‚    â”‚  + NativePostEvaluateAnimation() : void                   â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  Montage ì¬ìƒ                                              â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + Montage_Play(Montage, PlayRate, ...) : float          â”‚       â”‚
â”‚    â”‚  + Montage_Stop(BlendOutTime, Montage) : void             â”‚       â”‚
â”‚    â”‚  + Montage_Pause(Montage) : void                          â”‚       â”‚
â”‚    â”‚  + Montage_Resume(Montage) : void                         â”‚       â”‚
â”‚    â”‚  + Montage_JumpToSection(SectionName, Montage) : void     â”‚       â”‚
â”‚    â”‚  + Montage_SetNextSection(Current, Next, Montage) : void  â”‚       â”‚
â”‚    â”‚  + Montage_IsPlaying(Montage) : bool                      â”‚       â”‚
â”‚    â”‚  + IsAnyMontagePlaying() : bool                           â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ì»¤ë¸Œ ê´€ë¦¬                                                 â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + GetCurveValue(CurveName) : float                       â”‚       â”‚
â”‚    â”‚  + OverrideCurveValue(CurveName, Value) : void            â”‚       â”‚
â”‚    â”‚  + GetActiveCurveNames(Type, OutNames) : void             â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  State Machine ì¿¼ë¦¬ (Anim Getter)                          â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + GetInstanceMachineWeight(MachineIndex) : float         â”‚       â”‚
â”‚    â”‚  + GetInstanceStateWeight(MachineIndex, StateIndex): floatâ”‚       â”‚
â”‚    â”‚  + GetCurrentStateName(MachineIndex) : FName              â”‚       â”‚
â”‚    â”‚  + GetRelevantAnimTimeRemaining(Machine, State): float    â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚  Blueprint Events (BP ì˜¤ë²„ë¼ì´ë“œ):                                       â”‚
â”‚    - BlueprintInitializeAnimation()                                    â”‚
â”‚    - BlueprintUpdateAnimation(DeltaTime)                               â”‚
â”‚    - BlueprintThreadSafeUpdateAnimation(DeltaTime)                     â”‚
â”‚    - BlueprintPostEvaluateAnimation()                                  â”‚
â”‚                                                                         â”‚
â”‚  Public Properties:                                                     â”‚
â”‚    + RootMotionMode : ERootMotionMode                                  â”‚
â”‚    + bUseMultiThreadedAnimationUpdate : bool                           â”‚
â”‚    + bReceiveNotifiesFromLinkedInstances : bool                        â”‚
â”‚    + bPropagateNotifiesToLinkedInstances : bool                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:** `Engine/Source/Runtime/Engine/Classes/Animation/AnimInstance.h:351-1700`

---

## ğŸ”„ ìƒëª…ì£¼ê¸° (Lifecycle)

### ì „ì²´ ìƒëª…ì£¼ê¸° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UAnimInstance ìƒëª…ì£¼ê¸°                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  [1] ìƒì„± (Construction)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimInstance::UAnimInstance()          â”‚                          â”‚
â”‚  â”‚    - AnimInstanceProxy = nullptr         â”‚                          â”‚
â”‚  â”‚    - CurrentSkeleton = nullptr           â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [2] ì´ˆê¸°í™” (Initialization)                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  InitializeAnimation()                   â”‚                          â”‚
â”‚  â”‚    â”œâ”€ CreateAnimInstanceProxy()          â”‚                          â”‚
â”‚  â”‚    â”‚   â†’ FAnimInstanceProxy ìƒì„±          â”‚                          â”‚
â”‚  â”‚    â”œâ”€ NativeInitializeAnimation()        â”‚                          â”‚
â”‚  â”‚    â”‚   â†’ C++ ì˜¤ë²„ë¼ì´ë“œ                    â”‚                          â”‚
â”‚  â”‚    â””â”€ BlueprintInitializeAnimation()     â”‚                          â”‚
â”‚  â”‚        â†’ BP ì´ë²¤íŠ¸                         â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [3] Begin Play                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  NativeBeginPlay()                       â”‚                          â”‚
â”‚  â”‚    â†’ BlueprintBeginPlay()                â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [4] ë§¤ í”„ë ˆì„ ì—…ë°ì´íŠ¸ (Tick)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UpdateAnimation(DeltaSeconds)           â”‚                          â”‚
â”‚  â”‚    â”œâ”€ PreUpdateAnimation(DeltaSeconds)   â”‚                          â”‚
â”‚  â”‚    â”‚   - ëª½íƒ€ì£¼ ì—…ë°ì´íŠ¸                   â”‚                          â”‚
â”‚  â”‚    â”‚   - EventGraph ì‹¤í–‰                  â”‚                          â”‚
â”‚  â”‚    â”œâ”€ NativeUpdateAnimation(DeltaSeconds)â”‚                          â”‚
â”‚  â”‚    â”‚   â†’ C++ ì˜¤ë²„ë¼ì´ë“œ (Game Thread)    â”‚                          â”‚
â”‚  â”‚    â”œâ”€ BlueprintUpdateAnimation(...)      â”‚                          â”‚
â”‚  â”‚    â”‚   â†’ BP ì´ë²¤íŠ¸ (Game Thread)         â”‚                          â”‚
â”‚  â”‚    â”œâ”€ ë³‘ë ¬ í‰ê°€ ì¡°ê±´ ì²´í¬                 â”‚                          â”‚
â”‚  â”‚    â”‚   if (bUseMultiThreadedUpdate &&    â”‚                          â”‚
â”‚  â”‚    â”‚       !NeedsImmediateUpdate)        â”‚                          â”‚
â”‚  â”‚    â”‚   {                                 â”‚                          â”‚
â”‚  â”‚    â”‚       ParallelUpdateAnimation();    â”‚                          â”‚
â”‚  â”‚    â”‚       // Worker Threadë¡œ ë””ìŠ¤íŒ¨ì¹˜   â”‚                          â”‚
â”‚  â”‚    â”‚   }                                 â”‚                          â”‚
â”‚  â”‚    â”‚   else                              â”‚                          â”‚
â”‚  â”‚    â”‚   {                                 â”‚                          â”‚
â”‚  â”‚    â”‚       // ì¦‰ì‹œ ì‹¤í–‰ (Game Thread)     â”‚                          â”‚
â”‚  â”‚    â”‚   }                                 â”‚                          â”‚
â”‚  â”‚    â””â”€ PostUpdateAnimation()              â”‚                          â”‚
â”‚  â”‚        - ì•Œë¦¼ íŠ¸ë¦¬ê±°                      â”‚                          â”‚
â”‚  â”‚        - ëª½íƒ€ì£¼ ì´ë²¤íŠ¸                     â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [5] í‰ê°€ (Evaluation) - Worker Thread ê°€ëŠ¥                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  ParallelEvaluateAnimation(...)          â”‚                          â”‚
â”‚  â”‚    â”œâ”€ Proxy->Evaluate_AnyThread()        â”‚                          â”‚
â”‚  â”‚    â”‚   â”œâ”€ AnimGraph ë…¸ë“œ ìˆœíšŒ             â”‚                          â”‚
â”‚  â”‚    â”‚   â”œâ”€ Update Phase (ê°€ì¤‘ì¹˜ ê³„ì‚°)      â”‚                          â”‚
â”‚  â”‚    â”‚   â”œâ”€ Evaluate Phase (í¬ì¦ˆ ê³„ì‚°)      â”‚                          â”‚
â”‚  â”‚    â”‚   â””â”€ ìµœì¢… í¬ì¦ˆ ì¶œë ¥                   â”‚                          â”‚
â”‚  â”‚    â””â”€ PostEvaluateAnimation()            â”‚                          â”‚
â”‚  â”‚        â†’ NativePostEvaluateAnimation()   â”‚                          â”‚
â”‚  â”‚        â†’ BlueprintPostEvaluateAnimation()â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [6] ì†Œë©¸ (Destruction)                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UninitializeAnimation()                 â”‚                          â”‚
â”‚  â”‚    â”œâ”€ NativeUninitializeAnimation()      â”‚                          â”‚
â”‚  â”‚    â”‚   â†’ C++ ì˜¤ë²„ë¼ì´ë“œ                    â”‚                          â”‚
â”‚  â”‚    â”œâ”€ DestroyAnimInstanceProxy()         â”‚                          â”‚
â”‚  â”‚    â”‚   â†’ Proxy ì‚­ì œ                        â”‚                          â”‚
â”‚  â”‚    â””â”€ StopAllMontages(0.f)               â”‚                          â”‚
â”‚  â”‚        â†’ ëª¨ë“  ëª½íƒ€ì£¼ ì •ì§€                  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [7] BeginDestroy()                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimInstance::BeginDestroy()           â”‚                          â”‚
â”‚  â”‚    - ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì •ë¦¬                     â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì´ˆê¸°í™” ìƒì„¸ (Initialization Detail)

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:1341`

```cpp
// AnimInstance.h:1341
void InitializeAnimation(bool bInDeferRootNodeInitialization = false);
```

**ì´ˆê¸°í™” ìˆœì„œ:**
1. Proxy ìƒì„± (CreateAnimInstanceProxy)
2. ìŠ¤ì¼ˆë ˆí†¤ ë° ë©”ì‹œ ì„¤ì •
3. Native ì´ˆê¸°í™” (NativeInitializeAnimation)
4. Blueprint ì´ˆê¸°í™” (BlueprintInitializeAnimation)
5. Required Bones ê³„ì‚° (RecalcRequiredBones)
6. AnimGraph ë£¨íŠ¸ ë…¸ë“œ ì´ˆê¸°í™” (ì„ íƒì  ì§€ì—° ê°€ëŠ¥)

---

## âš™ï¸ Proxy ì‹œìŠ¤í…œ (Proxy System)

### FAnimInstanceProxy ì•„í‚¤í…ì²˜

**ğŸ“‚ ìœ„ì¹˜:** `Engine/Source/Runtime/Engine/Public/Animation/AnimInstanceProxy.h:140-144`

```cpp
// AnimInstanceProxy.h:140-144
/** Proxy object passed around during animation tree update in lieu of a UAnimInstance */
USTRUCT(meta = (DisplayName = "Native Variables"))
struct FAnimInstanceProxy
{
    GENERATED_USTRUCT_BODY()
public:
    // ...
};
```

### Proxy ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Proxy ë°ì´í„° íë¦„ (ë§¤ í”„ë ˆì„)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Game Thread:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimInstance                           â”‚                          â”‚
â”‚  â”‚  â”œâ”€ Speed = 450.0f                       â”‚                          â”‚
â”‚  â”‚  â”œâ”€ bIsInAir = false                     â”‚                          â”‚
â”‚  â”‚  â”œâ”€ Direction = 45.0f                    â”‚                          â”‚
â”‚  â”‚  â””â”€ ... (ê²Œì„ ë¡œì§ ë³€ìˆ˜ë“¤)                â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚         â”‚                                                               â”‚
â”‚         â”‚ PreUpdate: ë°ì´í„° ë³µì‚¬                                        â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  FAnimInstanceProxy (ë³µì‚¬ë³¸)             â”‚                          â”‚
â”‚  â”‚  â”œâ”€ Speed = 450.0f                       â”‚                          â”‚
â”‚  â”‚  â”œâ”€ bIsInAir = false                     â”‚                          â”‚
â”‚  â”‚  â”œâ”€ Direction = 45.0f                    â”‚                          â”‚
â”‚  â”‚  â””â”€ DeltaSeconds = 0.016f                â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚         â”‚                                                               â”‚
â”‚         â”‚ Worker Threadë¡œ ì „ë‹¬                                          â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  Worker Thread (ë³‘ë ¬ ì‹¤í–‰)                â”‚                          â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                          â”‚
â”‚  â”‚  â”‚ Proxy->Update_AnyThread()          â”‚  â”‚                          â”‚
â”‚  â”‚  â”‚   - AnimGraph ë…¸ë“œ Update           â”‚  â”‚                          â”‚
â”‚  â”‚  â”‚   - BlendSpace ìƒ˜í”Œë§ (Speed ì‚¬ìš©)  â”‚  â”‚                          â”‚
â”‚  â”‚  â”‚   - State Machine ì „í™˜ ì²´í¬         â”‚  â”‚                          â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                          â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                          â”‚
â”‚  â”‚  â”‚ Proxy->Evaluate_AnyThread()        â”‚  â”‚                          â”‚
â”‚  â”‚  â”‚   - í¬ì¦ˆ ê³„ì‚°                       â”‚  â”‚                          â”‚
â”‚  â”‚  â”‚   - ë³¸ ë³€í™˜ ê³„ì‚°                    â”‚  â”‚                          â”‚
â”‚  â”‚  â”‚   - ì»¤ë¸Œ ë¸”ë Œë”©                     â”‚  â”‚                          â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚         â”‚                                                               â”‚
â”‚         â”‚ ê²°ê³¼ ìˆ˜ì§‘ (Game Thread ë™ê¸°í™”)                                 â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  ê²°ê³¼: FCompactPose & FBlendedCurve      â”‚                          â”‚
â”‚  â”‚  - ìµœì¢… í¬ì¦ˆ (ë³¸ ë³€í™˜ ë°°ì—´)              â”‚                          â”‚
â”‚  â”‚  - ì• ë‹ˆë©”ì´ì…˜ ì»¤ë¸Œ ê°’                    â”‚                          â”‚
â”‚  â”‚  - ë£¨íŠ¸ ëª¨ì…˜ (FRootMotionMovementParams) â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚         â”‚                                                               â”‚
â”‚         â”‚ PostUpdate: UAnimInstanceë¡œ ë³µì‚¬                              â”‚
â”‚         â†“                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimInstance::PostUpdateAnimation()    â”‚                          â”‚
â”‚  â”‚  - ì•Œë¦¼ íŠ¸ë¦¬ê±°                            â”‚                          â”‚
â”‚  â”‚  - ëª½íƒ€ì£¼ ì´ë²¤íŠ¸                          â”‚                          â”‚
â”‚  â”‚  - ì»¤ë¸Œ ê°’ ì—…ë°ì´íŠ¸ (ëª¨í”„ íƒ€ê²Ÿ, ë¨¸í‹°ë¦¬ì–¼)â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Proxy ì ‘ê·¼ ë©”ì„œë“œ

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:1661-1686`

```cpp
// AnimInstance.h:1661-1686
/** Access the proxy but block if a task is currently in progress */
template <typename T>
inline T& GetProxyOnGameThread()
{
    return *GetProxyOnGameThreadStatic<T>(this);
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ - Game Threadì—ì„œ ì•ˆì „í•˜ê²Œ Proxy ì ‘ê·¼
void UMyAnimInstance::NativeUpdateAnimation(float DeltaSeconds)
{
    Super::NativeUpdateAnimation(DeltaSeconds);

    // Proxy ì ‘ê·¼ (ìë™ìœ¼ë¡œ ë³‘ë ¬ ì‘ì—… ì™„ë£Œ ëŒ€ê¸°)
    FMyAnimInstanceProxy& Proxy = GetProxyOnGameThread<FMyAnimInstanceProxy>();

    // Proxyì— ë°ì´í„° ì „ë‹¬
    Proxy.Speed = GetOwningComponent()->GetVelocity().Size();
    Proxy.bIsInAir = GetOwningComponent()->GetMovementComponent()->IsFalling();
}
```

**âŒ ì£¼ì˜: Worker Threadì—ì„œëŠ” Proxy ì§ì ‘ ìˆ˜ì • ê¸ˆì§€**

```cpp
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ - Worker Threadì—ì„œ UObject ì ‘ê·¼
void UMyAnimInstance::NativeThreadSafeUpdateAnimation(float DeltaSeconds)
{
    // âŒ UObject ì ‘ê·¼ ë¶ˆê°€!
    // GetOwningComponent()->DoSomething();  // í¬ë˜ì‹œ!

    // âœ… Proxy ë©¤ë²„ ë³€ìˆ˜ë§Œ ì‚¬ìš©
    // ProxyëŠ” ì´ë¯¸ PreUpdateì—ì„œ ë³µì‚¬ë˜ì—ˆìŒ
}
```

---

## ğŸ¨ í•µì‹¬ ê¸°ëŠ¥ (Core Features)

### 1. AnimGraph vs EventGraph

**ì—­í•  ë¶„ë¦¬:**

| | AnimGraph | EventGraph |
|---|-----------|------------|
| **ëª©ì ** | í¬ì¦ˆ ê³„ì‚° | ê²Œì„ ë¡œì§ |
| **ì‹¤í–‰ ì‹œì ** | Evaluate Phase | Update Phase |
| **ì‹¤í–‰ ìŠ¤ë ˆë“œ** | Worker Thread ê°€ëŠ¥ | Game Thread ì „ìš© |
| **ì ‘ê·¼ ê°€ëŠ¥ ë°ì´í„°** | Proxy ë©¤ë²„ ë³€ìˆ˜ | UObject, Component ë“± ëª¨ë‘ |
| **ì‚¬ìš© ì˜ˆì‹œ** | BlendSpace, StateMachine, IK | ì†ë„ ê³„ì‚°, ë°©í–¥ ê³„ì‚°, ì í”„ ì²´í¬ |

**ì‹¤í–‰ íë¦„:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EventGraph     â”‚  â†’   â”‚   Proxy ë³µì‚¬     â”‚  â†’   â”‚   AnimGraph      â”‚
â”‚  (Game Thread)   â”‚      â”‚                  â”‚      â”‚ (Worker Thread)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - ì†ë„ ê³„ì‚°      â”‚      â”‚ Speed, bIsInAir  â”‚      â”‚ - BlendSpace     â”‚
â”‚ - ë°©í–¥ ê³„ì‚°      â”‚      â”‚ Direction ë“±     â”‚      â”‚ - StateMachine   â”‚
â”‚ - ì í”„ ì²´í¬      â”‚      â”‚ ë³€ìˆ˜ ë³µì‚¬        â”‚      â”‚ - IK             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. Montage ì‹œìŠ¤í…œ (Montage System)

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:610-808`

#### Montage ì¬ìƒ (Play)

```cpp
// AnimInstance.h:613
UFUNCTION(BlueprintCallable, Category = "Animation|Montage")
float Montage_Play(UAnimMontage* MontageToPlay,
                   float InPlayRate = 1.f,
                   EMontagePlayReturnType ReturnValueType = EMontagePlayReturnType::MontageLength,
                   float InTimeToStartMontageAt = 0.f,
                   bool bStopAllMontages = true);
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… ê¸°ë³¸ ì¬ìƒ
float Duration = Montage_Play(AttackMontage);

// âœ… ì»¤ìŠ¤í…€ ì¬ìƒ ì†ë„
float Duration = Montage_Play(AttackMontage, 1.5f);  // 1.5ë°°ì†

// âœ… íŠ¹ì • ì‹œê°„ë¶€í„° ì‹œì‘
float Duration = Montage_Play(AttackMontage, 1.f, EMontagePlayReturnType::MontageLength, 0.5f);

// âœ… ë¸”ë Œë“œ ì„¤ì • ì»¤ìŠ¤í…€ (UE 5.0+)
FAlphaBlendArgs BlendIn;
BlendIn.BlendTime = 0.1f;
BlendIn.BlendOption = EAlphaBlendOption::Cubic;
Montage_PlayWithBlendIn(AttackMontage, BlendIn);
```

#### Montage ì œì–´

```cpp
// ì •ì§€
Montage_Stop(0.25f, AttackMontage);  // 0.25ì´ˆ ë¸”ë Œë“œ ì•„ì›ƒ

// ì¼ì‹œì •ì§€
Montage_Pause(AttackMontage);

// ì¬ê°œ
Montage_Resume(AttackMontage);

// ì„¹ì…˜ ì í”„
Montage_JumpToSection(FName("Loop"), AttackMontage);

// ë‹¤ìŒ ì„¹ì…˜ ì„¤ì • (ë™ì  ë£¨í”„ ì œì–´)
Montage_SetNextSection(FName("Loop"), FName("End"), AttackMontage);

// ì¬ìƒ ì†ë„ ë³€ê²½
Montage_SetPlayRate(AttackMontage, 2.0f);
```

#### Montage ì¿¼ë¦¬

```cpp
// ì¬ìƒ ì¤‘ì¸ê°€?
bool bIsPlaying = Montage_IsPlaying(AttackMontage);

// í™œì„±í™”ë˜ì–´ ìˆëŠ”ê°€? (ë¸”ë Œë”© ì•„ì›ƒ ì¤‘ì´ ì•„ë‹Œê°€?)
bool bIsActive = Montage_IsActive(AttackMontage);

// í˜„ì¬ ì„¹ì…˜ ì´ë¦„
FName CurrentSection = Montage_GetCurrentSection(AttackMontage);

// í˜„ì¬ ìœ„ì¹˜
float Position = Montage_GetPosition(AttackMontage);

// ì¬ìƒ ì†ë„
float PlayRate = Montage_GetPlayRate(AttackMontage);
float EffectivePlayRate = Montage_GetEffectivePlayRate(AttackMontage);  // RateScale ë°˜ì˜
```

#### Montage ì´ë²¤íŠ¸ (Delegates)

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:743-765`

```cpp
// AnimInstance.h:743-765
/** Called when a montage starts blending out, whether interrupted or finished */
UPROPERTY(BlueprintAssignable)
FOnMontageBlendingOutStartedMCDelegate OnMontageBlendingOut;

/** Called when a montage finishes blending in */
UPROPERTY(BlueprintAssignable)
FOnMontageBlendedInEndedMCDelegate OnMontageBlendedIn;

/** Called when a montage has started */
UPROPERTY(BlueprintAssignable)
FOnMontageStartedMCDelegate OnMontageStarted;

/** Called when a montage has ended, whether interrupted or finished*/
UPROPERTY(BlueprintAssignable)
FOnMontageEndedMCDelegate OnMontageEnded;
```

**ì‚¬ìš© ì˜ˆì‹œ (C++):**

```cpp
void UMyAnimInstance::NativeInitializeAnimation()
{
    Super::NativeInitializeAnimation();

    // âœ… Montage ì¢…ë£Œ ì´ë²¤íŠ¸ ë°”ì¸ë”©
    OnMontageEnded.AddDynamic(this, &UMyAnimInstance::OnAttackMontageEnded);
}

void UMyAnimInstance::OnAttackMontageEnded(UAnimMontage* Montage, bool bInterrupted)
{
    if (Montage == AttackMontage)
    {
        if (bInterrupted)
        {
            UE_LOG(LogTemp, Warning, TEXT("Attack interrupted!"));
        }
        else
        {
            UE_LOG(LogTemp, Log, TEXT("Attack completed!"));
        }
    }
}
```

---

### 3. Slot ì‹œìŠ¤í…œ (Slot System)

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:574-605`

**ìŠ¬ë¡¯ ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ (ë™ì  ëª½íƒ€ì£¼ ìƒì„±):**

```cpp
// AnimInstance.h:578
UFUNCTION(BlueprintCallable, Category="Animation|Montage")
UAnimMontage* PlaySlotAnimationAsDynamicMontage(
    UAnimSequenceBase* Asset,
    FName SlotNodeName,
    float BlendInTime = 0.25f,
    float BlendOutTime = 0.25f,
    float InPlayRate = 1.f,
    int32 LoopCount = 1,
    float BlendOutTriggerTime = -1.f,
    float InTimeToStartMontageAt = 0.f);
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… ìŠ¬ë¡¯ì— ì• ë‹ˆë©”ì´ì…˜ ì¬ìƒ
UAnimMontage* DynamicMontage = PlaySlotAnimationAsDynamicMontage(
    ReloadAnimation,        // UAnimSequence
    FName("UpperBodySlot"), // Slot Node Name
    0.1f,                   // Blend In
    0.1f,                   // Blend Out
    1.0f,                   // Play Rate
    1                       // Loop Count
);

// âœ… ìŠ¬ë¡¯ ì• ë‹ˆë©”ì´ì…˜ ì •ì§€
StopSlotAnimation(0.2f, FName("UpperBodySlot"));

// âœ… ìŠ¬ë¡¯ í™œì„±í™” ì—¬ë¶€
bool bIsActive = IsSlotActive(FName("UpperBodySlot"));

// âœ… ìŠ¬ë¡¯ ë¡œì»¬ ê°€ì¤‘ì¹˜
float LocalWeight = GetSlotMontageLocalWeight(FName("UpperBodySlot"));

// âœ… ìŠ¬ë¡¯ ê¸€ë¡œë²Œ ê°€ì¤‘ì¹˜
float GlobalWeight = GetSlotMontageGlobalWeight(FName("UpperBodySlot"));
```

**Slot í™œìš© ì‹œë‚˜ë¦¬ì˜¤:**

```
ì „ì‹  ì• ë‹ˆë©”ì´ì…˜ (Idle, Walk, Run)
       +
ìƒì²´ë§Œ ì• ë‹ˆë©”ì´ì…˜ (Reload, ì´ ì¡°ì¤€)  â† Slot "UpperBodySlot"
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•˜ì²´: Idle/Walk/Run ì• ë‹ˆë©”ì´ì…˜ â”‚
â”‚  ìƒì²´: Reload ì• ë‹ˆë©”ì´ì…˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. ì»¤ë¸Œ ê´€ë¦¬ (Curve Management)

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:1199-1230`

#### ì»¤ë¸Œ ê°’ ì½ê¸°

```cpp
// AnimInstance.h:1205
UFUNCTION(BlueprintPure, Category="Animation|Curves", meta=(BlueprintThreadSafe))
float GetCurveValue(FName CurveName) const;

// AnimInstance.h:1214
UFUNCTION(BlueprintPure, Category="Animation|Curves", meta=(BlueprintThreadSafe))
bool GetCurveValueWithDefault(FName CurveName, float DefaultValue, float& OutValue);
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… ì»¤ë¸Œ ê°’ ì½ê¸°
float JumpHeight = GetCurveValue(FName("JumpHeight"));

// âœ… ê¸°ë³¸ê°’ í¬í•¨ ì½ê¸°
float IKFootHeight;
if (GetCurveValueWithDefault(FName("IK_Foot_Height"), 0.0f, IKFootHeight))
{
    // ì»¤ë¸Œê°€ ì¡´ì¬í•˜ê³  ê°’ì„ ê°€ì ¸ì˜´
}

// âœ… í™œì„± ì»¤ë¸Œ ëª©ë¡
TArray<FName> ActiveCurves;
GetActiveCurveNames(EAnimCurveType::AttributeCurve, ActiveCurves);
```

#### ì»¤ë¸Œ ê°’ ì˜¤ë²„ë¼ì´ë“œ

```cpp
// AnimInstance.h:1229
void OverrideCurveValue(FName CurveName, float Value);
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… ëŸ°íƒ€ì„ì— ì»¤ë¸Œ ê°’ ê°•ì œ ì„¤ì •
OverrideCurveValue(FName("Speed"), 450.0f);  // ë‹¤ìŒ í”„ë ˆì„ í‰ê°€ ë•Œ ë¦¬ì…‹ë¨
```

**ì£¼ì˜ì‚¬í•­:**
- `OverrideCurveValue`ëŠ” **ì¼ì‹œì **ì…ë‹ˆë‹¤ (ë‹¤ìŒ í‰ê°€ ì‹œ ë¦¬ì…‹ë¨)
- **ì˜êµ¬ì  ë³€ê²½**ì´ í•„ìš”í•˜ë©´ AnimGraphì—ì„œ **Modify Curve** ë…¸ë“œ ì‚¬ìš©

---

### 5. State Machine ì¿¼ë¦¬ (Anim Getter)

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:1047-1145`

#### State Machine ì •ë³´

```cpp
// AnimInstance.h:1068
UFUNCTION(BlueprintPure, Category = "Animation|State Machines",
          meta = (DisplayName = "Machine Weight", BlueprintInternalUseOnly = "true",
                  AnimGetter = "true", BlueprintThreadSafe))
float GetInstanceMachineWeight(int32 MachineIndex);

// AnimInstance.h:1072
UFUNCTION(BlueprintPure, Category="Animation|State Machines",
          meta = (DisplayName="State Weight", BlueprintInternalUseOnly = "true",
                  AnimGetter="true", BlueprintThreadSafe))
float GetInstanceStateWeight(int32 MachineIndex, int32 StateIndex);

// AnimInstance.h:1232
UFUNCTION(BlueprintPure, Category="Animation|State Machines",
          meta=(BlueprintInternalUseOnly = "true", AnimGetter = "true", BlueprintThreadSafe))
FName GetCurrentStateName(int32 MachineIndex);
```

#### Transition ì •ë³´

```cpp
// AnimInstance.h:1080
UFUNCTION(BlueprintPure, Category="Animation|State Machines",
          meta = (DisplayName="Get Transition Crossfade Duration",
                  BlueprintInternalUseOnly = "true", AnimGetter="true", BlueprintThreadSafe))
float GetInstanceTransitionCrossfadeDuration(int32 MachineIndex, int32 TransitionIndex);

// AnimInstance.h:1088
UFUNCTION(BlueprintPure, Category="Animation|State Machines",
          meta = (DisplayName="Get Transition Time Elapsed (ratio)",
                  BlueprintInternalUseOnly = "true", AnimGetter="true",
                  GetterContext="CustomBlend", BlueprintThreadSafe))
float GetInstanceTransitionTimeElapsedFraction(int32 MachineIndex, int32 TransitionIndex);
```

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**

```
Transition Rule (Idle â†’ Walk):
  â””â”€ GetRelevantAnimTimeRemaining(0, 0) < 0.1f
  â””â”€ ë‚¨ì€ ì‹œê°„ì´ 0.1ì´ˆ ë¯¸ë§Œì¼ ë•Œë§Œ ì „í™˜ í—ˆìš©
```

**Blueprintì—ì„œì˜ ì‚¬ìš©:**
- **Anim Getter** ë©”íƒ€ë°ì´í„°ê°€ ìˆëŠ” í•¨ìˆ˜ë“¤ì€ Blueprintì—ì„œ **ìë™ìœ¼ë¡œ ë…¸ì¶œ**ë©ë‹ˆë‹¤.
- **Context** ì œì•½: `GetterContext="Transition"`ì€ Transition Rule ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥

---

### 6. Pose Snapshots

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:459-478`

```cpp
// AnimInstance.h:459
UFUNCTION(BlueprintCallable, Category = "Animation|Pose")
virtual void SavePoseSnapshot(FName SnapshotName);

// AnimInstance.h:466
UFUNCTION(BlueprintCallable, Category = "Animation|Pose")
void RemovePoseSnapshot(FName SnapshotName);

// AnimInstance.h:469
const FPoseSnapshot* GetPoseSnapshot(FName SnapshotName) const;

// AnimInstance.h:477
UFUNCTION(BlueprintCallable, Category = "Animation|Pose")
virtual void SnapshotPose(UPARAM(ref) FPoseSnapshot& Snapshot);
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… í˜„ì¬ í¬ì¦ˆ ì €ì¥
SavePoseSnapshot(FName("HitReaction"));

// âœ… ì €ì¥ëœ í¬ì¦ˆ ê°€ì ¸ì˜¤ê¸° (AnimGraphì—ì„œ ì‚¬ìš©)
// AnimGraph: "Pose Snapshot" ë…¸ë“œì—ì„œ FName("HitReaction") ì‚¬ìš©

// âœ… í¬ì¦ˆ ìŠ¤ëƒ…ìƒ· ì œê±°
RemovePoseSnapshot(FName("HitReaction"));
```

**í™œìš© ì‹œë‚˜ë¦¬ì˜¤:**
- **Hit Reaction**: í”¼ê²© ìˆœê°„ í¬ì¦ˆ ì €ì¥ â†’ ë³µê·€ ì• ë‹ˆë©”ì´ì…˜ì—ì„œ ë¸”ë Œë“œ
- **Pose Matching**: íŠ¹ì • í¬ì¦ˆ ì €ì¥ â†’ ë‚˜ì¤‘ì— ì •í™•í•œ ë³µì›
- **Animation Debugging**: íŠ¹ì • í”„ë ˆì„ í¬ì¦ˆ ì €ì¥ â†’ ì—ë””í„°ì—ì„œ ê²€ì‚¬

---

### 7. Linked Anim Graphs & Layers

**ğŸ“‚ ìœ„ì¹˜:** `AnimInstance.h:821-896`

#### Linked Anim Graph (íƒœê·¸ ê¸°ë°˜)

```cpp
// AnimInstance.h:832
UFUNCTION(BlueprintPure, Category = "Animation|Linked Anim Graphs")
UAnimInstance* GetLinkedAnimGraphInstanceByTag(FName InTag) const;

// AnimInstance.h:847
UFUNCTION(BlueprintCallable, Category = "Animation|Linked Anim Graphs")
void LinkAnimGraphByTag(FName InTag, TSubclassOf<UAnimInstance> InClass);
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… íƒœê·¸ë¡œ Linked Instance ê°€ì ¸ì˜¤ê¸°
UAnimInstance* WeaponAnimInstance = GetLinkedAnimGraphInstanceByTag(FName("Weapon"));

// âœ… íƒœê·¸ë¡œ í´ë˜ìŠ¤ ì—°ê²°
LinkAnimGraphByTag(FName("Weapon"), URifleAnimInstance::StaticClass());
```

#### Animation Layers

```cpp
// AnimInstance.h:859
UFUNCTION(BlueprintCallable, Category = "Animation|Linked Anim Graphs")
virtual void LinkAnimClassLayers(TSubclassOf<UAnimInstance> InClass);

// AnimInstance.h:877
UFUNCTION(BlueprintPure, Category = "Animation|Linked Anim Graphs")
UAnimInstance* GetLinkedAnimLayerInstanceByGroup(FName InGroup) const;
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… Layer Override ì„¤ì •
LinkAnimClassLayers(UMyCustomLayerClass::StaticClass());

// âœ… ê·¸ë£¹ë³„ Layer Instance ê°€ì ¸ì˜¤ê¸°
UAnimInstance* UpperBodyLayer = GetLinkedAnimLayerInstanceByGroup(FName("UpperBody"));

// âœ… Layer Override í•´ì œ
UnlinkAnimClassLayers(UMyCustomLayerClass::StaticClass());
```

**í™œìš© ì‹œë‚˜ë¦¬ì˜¤:**
- **ë¬´ê¸°ë³„ ìƒì²´ ì• ë‹ˆë©”ì´ì…˜**: ì´ê¸° íƒ€ì…ì— ë”°ë¼ ìƒì²´ ë ˆì´ì–´ êµì²´
- **ìš´ë°˜ ìƒíƒœ**: ë¬¼ì²´ë¥¼ ë“¤ê³  ìˆì„ ë•Œ ìƒì²´ ë ˆì´ì–´ ì˜¤ë²„ë¼ì´ë“œ
- **ìŠ¤íƒ€ì¼ ë³€ê²½**: ê°™ì€ ìºë¦­í„°ì— ë‹¤ë¥¸ ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼ ì ìš©

---

## ğŸ’¡ ì‹¤ì „ ì˜ˆì‹œ (Practical Examples)

### âœ… ì¢‹ì€ ì˜ˆ: ë³‘ë ¬ í‰ê°€ í™œìš©

```cpp
UCLASS()
class UMyAnimInstance : public UAnimInstance
{
    GENERATED_BODY()

public:
    // âœ… Blueprint-visible ë³€ìˆ˜ (UPROPERTY í•„ìˆ˜)
    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    float Speed;

    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    float Direction;

    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    bool bIsInAir;

protected:
    // âœ… Game Threadì—ì„œ ê²Œì„ ë¡œì§ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
    virtual void NativeUpdateAnimation(float DeltaSeconds) override
    {
        Super::NativeUpdateAnimation(DeltaSeconds);

        APawn* Pawn = TryGetPawnOwner();
        if (!Pawn) return;

        // UObject ì ‘ê·¼ì€ Game Threadì—ì„œë§Œ!
        FVector Velocity = Pawn->GetVelocity();
        Speed = Velocity.Size();
        Direction = CalculateDirection(Velocity, Pawn->GetActorRotation());
        bIsInAir = Pawn->GetMovementComponent()->IsFalling();
    }

    // âœ… Worker Threadì—ì„œ ì•ˆì „í•œ ê³„ì‚°
    virtual void NativeThreadSafeUpdateAnimation(float DeltaSeconds) override
    {
        Super::NativeThreadSafeUpdateAnimation(DeltaSeconds);

        // âœ… ì´ë¯¸ ë³µì‚¬ëœ Speed, Direction, bIsInAir ë³€ìˆ˜ ì‚¬ìš© ê°€ëŠ¥
        // âœ… UObject ì ‘ê·¼ ë¶ˆê°€ (Proxyì—ì„œë§Œ ì‹¤í–‰ë¨)

        // ì˜ˆ: ë³µì¡í•œ ê³„ì‚°ì´ í•„ìš”í•˜ë‹¤ë©´ ì—¬ê¸°ì„œ ìˆ˜í–‰
        // (ì´ ì˜ˆì‹œì—ì„œëŠ” AnimGraphê°€ ì•Œì•„ì„œ ì²˜ë¦¬)
    }
};
```

---

### âœ… ì¢‹ì€ ì˜ˆ: Montage ì´ë²¤íŠ¸ ì²˜ë¦¬

```cpp
UCLASS()
class UMyCharacterAnimInstance : public UAnimInstance
{
    GENERATED_BODY()

public:
    UPROPERTY(EditDefaultsOnly, Category = "Animation")
    UAnimMontage* AttackMontage;

protected:
    virtual void NativeInitializeAnimation() override
    {
        Super::NativeInitializeAnimation();

        // âœ… Montage ì´ë²¤íŠ¸ ë°”ì¸ë”©
        OnMontageStarted.AddDynamic(this, &UMyCharacterAnimInstance::OnMontageStartedCallback);
        OnMontageEnded.AddDynamic(this, &UMyCharacterAnimInstance::OnMontageEndedCallback);
        OnMontageBlendingOut.AddDynamic(this, &UMyCharacterAnimInstance::OnMontageBlendingOutCallback);
    }

private:
    UFUNCTION()
    void OnMontageStartedCallback(UAnimMontage* Montage)
    {
        if (Montage == AttackMontage)
        {
            UE_LOG(LogTemp, Log, TEXT("Attack montage started"));

            // âœ… ê³µê²© ì‹œì‘ ë¡œì§ (ë¬´ì  í”„ë ˆì„, ì´í™íŠ¸ ë“±)
            if (AMyCharacter* Character = Cast<AMyCharacter>(TryGetPawnOwner()))
            {
                Character->OnAttackStarted();
            }
        }
    }

    UFUNCTION()
    void OnMontageEndedCallback(UAnimMontage* Montage, bool bInterrupted)
    {
        if (Montage == AttackMontage)
        {
            if (bInterrupted)
            {
                UE_LOG(LogTemp, Warning, TEXT("Attack interrupted!"));
            }
            else
            {
                UE_LOG(LogTemp, Log, TEXT("Attack completed successfully"));
            }

            // âœ… ê³µê²© ì¢…ë£Œ ë¡œì§
            if (AMyCharacter* Character = Cast<AMyCharacter>(TryGetPawnOwner()))
            {
                Character->OnAttackEnded(bInterrupted);
            }
        }
    }

    UFUNCTION()
    void OnMontageBlendingOutCallback(UAnimMontage* Montage, bool bInterrupted)
    {
        // âœ… ë¸”ë Œë“œ ì•„ì›ƒ ì‹œì‘ ì‹œì  (Montageê°€ ëë‚˜ê¸° ì§ì „)
        UE_LOG(LogTemp, Log, TEXT("Montage blending out"));
    }
};
```

---

### âŒ ë‚˜ìœ ì˜ˆ: Worker Threadì—ì„œ UObject ì ‘ê·¼

```cpp
UCLASS()
class UBadAnimInstance : public UAnimInstance
{
    GENERATED_BODY()

protected:
    // âŒ Worker Threadì—ì„œ UObject ì ‘ê·¼ ì‹œë„
    virtual void NativeThreadSafeUpdateAnimation(float DeltaSeconds) override
    {
        Super::NativeThreadSafeUpdateAnimation(DeltaSeconds);

        // âŒ í¬ë˜ì‹œ ìœ„í—˜! Worker Threadì—ì„œ UObject ì ‘ê·¼ ë¶ˆê°€
        APawn* Pawn = TryGetPawnOwner();  // âŒ ìœ„í—˜!
        if (Pawn)
        {
            Speed = Pawn->GetVelocity().Size();  // âŒ í¬ë˜ì‹œ!
        }
    }
};
```

**ì˜¬ë°”ë¥¸ ë°©ë²•:**

```cpp
UCLASS()
class UGoodAnimInstance : public UAnimInstance
{
    GENERATED_BODY()

public:
    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    float Speed;

protected:
    // âœ… Game Threadì—ì„œ UObject ì ‘ê·¼
    virtual void NativeUpdateAnimation(float DeltaSeconds) override
    {
        Super::NativeUpdateAnimation(DeltaSeconds);

        APawn* Pawn = TryGetPawnOwner();
        if (Pawn)
        {
            Speed = Pawn->GetVelocity().Size();  // âœ… ì•ˆì „!
        }
    }

    // âœ… Worker Threadì—ì„œëŠ” ì´ë¯¸ ë³µì‚¬ëœ Speed ë³€ìˆ˜ë§Œ ì‚¬ìš©
    virtual void NativeThreadSafeUpdateAnimation(float DeltaSeconds) override
    {
        Super::NativeThreadSafeUpdateAnimation(DeltaSeconds);

        // Speed ë³€ìˆ˜ëŠ” ì´ë¯¸ ë³µì‚¬ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì•ˆì „í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥
        // (AnimGraphì—ì„œ ì‚¬ìš©ë¨)
    }
};
```

---

### âœ… ì¢‹ì€ ì˜ˆ: ì»¤ìŠ¤í…€ Proxy ì‚¬ìš©

```cpp
// === 1. Custom Proxy ì •ì˜ ===
struct FMyAnimInstanceProxy : public FAnimInstanceProxy
{
public:
    FMyAnimInstanceProxy()
        : FAnimInstanceProxy()
    {}

    FMyAnimInstanceProxy(UAnimInstance* InAnimInstance)
        : FAnimInstanceProxy(InAnimInstance)
    {}

    // âœ… Proxy ì „ìš© ë³€ìˆ˜ (ìŠ¤ë ˆë“œ ì•ˆì „)
    float Speed;
    float Direction;
    bool bIsInAir;

    // âœ… Worker Threadì—ì„œ ì‹¤í–‰ë  ë¡œì§
    virtual void PreUpdate(UAnimInstance* InAnimInstance, float DeltaSeconds) override
    {
        FAnimInstanceProxy::PreUpdate(InAnimInstance, DeltaSeconds);

        // ë°ì´í„° ë³µì‚¬ (Game Thread â†’ Worker Thread)
        UMyAnimInstance* MyAnimInstance = Cast<UMyAnimInstance>(InAnimInstance);
        if (MyAnimInstance)
        {
            Speed = MyAnimInstance->Speed;
            Direction = MyAnimInstance->Direction;
            bIsInAir = MyAnimInstance->bIsInAir;
        }
    }
};

// === 2. AnimInstanceì—ì„œ Custom Proxy ì‚¬ìš© ===
UCLASS()
class UMyAnimInstance : public UAnimInstance
{
    GENERATED_BODY()

public:
    typedef FMyAnimInstanceProxy ProxyType;  // âœ… Custom Proxy ì„ ì–¸

    // Blueprint-visible ë³€ìˆ˜
    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    float Speed;

    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    float Direction;

    UPROPERTY(BlueprintReadOnly, Category = "Movement")
    bool bIsInAir;

protected:
    // âœ… Custom Proxy ìƒì„±
    virtual FAnimInstanceProxy* CreateAnimInstanceProxy() override
    {
        return new FMyAnimInstanceProxy(this);
    }

    virtual void NativeUpdateAnimation(float DeltaSeconds) override
    {
        Super::NativeUpdateAnimation(DeltaSeconds);

        // Game Threadì—ì„œ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
        APawn* Pawn = TryGetPawnOwner();
        if (Pawn)
        {
            FVector Velocity = Pawn->GetVelocity();
            Speed = Velocity.Size();
            Direction = CalculateDirection(Velocity, Pawn->GetActorRotation());
            bIsInAir = Pawn->GetMovementComponent()->IsFalling();
        }
    }
};
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™” (Performance Optimization)

### âœ… í•´ì•¼ í•  ê²ƒ

**1. ë³‘ë ¬ í‰ê°€ í™œì„±í™”:**

```cpp
// Animation Blueprint ì—ë””í„°ì—ì„œ:
// - Class Settings â†’ Use Multi Threaded Animation Update = true
// ë˜ëŠ” C++ì—ì„œ:

UCLASS()
class UMyAnimInstance : public UAnimInstance
{
    GENERATED_BODY()

public:
    UMyAnimInstance()
    {
        // âœ… ë³‘ë ¬ í‰ê°€ í™œì„±í™”
        bUseMultiThreadedAnimationUpdate = true;
    }
};
```

**íš¨ê³¼:**
- ë³µì¡í•œ ìºë¦­í„°: 2-3ë°° ì„±ëŠ¥ í–¥ìƒ
- ë‹¤ìˆ˜ ìºë¦­í„°: ì„ í˜• ì¦ê°€ ë°©ì§€

---

**2. NativeThreadSafeUpdateAnimation ì‚¬ìš©:**

```cpp
// âœ… ë¬´ê±°ìš´ ê³„ì‚°ì€ Worker Threadë¡œ
virtual void NativeThreadSafeUpdateAnimation(float DeltaSeconds) override
{
    Super::NativeThreadSafeUpdateAnimation(DeltaSeconds);

    // âœ… ë³µì¡í•œ ìˆ˜í•™ ê³„ì‚°
    // âœ… ë°ì´í„° ë³€í™˜
    // âœ… ì•Œê³ ë¦¬ì¦˜ ì‹¤í–‰ (UObject ì ‘ê·¼ ë¶ˆê°€)
}
```

---

**3. ë¶ˆí•„ìš”í•œ Montage ì •ë¦¬:**

```cpp
// âœ… ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Montage ì¦‰ì‹œ ì •ì§€
if (!bNeedMontage)
{
    StopAllMontages(0.f);  // ì¦‰ì‹œ ì •ì§€
}
```

---

**4. LODì— ë”°ë¥¸ ì—…ë°ì´íŠ¸ ìƒëµ:**

```cpp
virtual void NativeUpdateAnimation(float DeltaSeconds) override
{
    Super::NativeUpdateAnimation(DeltaSeconds);

    // âœ… ë†’ì€ LODì—ì„œëŠ” ë³µì¡í•œ ê³„ì‚° ìƒëµ
    int32 LODLevel = GetLODLevel();
    if (LODLevel >= 2)
    {
        // ë‹¨ìˆœí™”ëœ ì—…ë°ì´íŠ¸ë§Œ ìˆ˜í–‰
        return;
    }

    // ë³µì¡í•œ ê³„ì‚°...
}
```

---

### âŒ í”¼í•´ì•¼ í•  ê²ƒ

**1. NativeUpdateAnimationì—ì„œ ë¬´ê±°ìš´ ê³„ì‚°:**

```cpp
// âŒ Game Thread ë³‘ëª© ë°œìƒ
virtual void NativeUpdateAnimation(float DeltaSeconds) override
{
    Super::NativeUpdateAnimation(DeltaSeconds);

    // âŒ ë³µì¡í•œ ê³„ì‚° (Game Thread ë¸”ë¡!)
    for (int32 i = 0; i < 10000; ++i)
    {
        // ë¬´ê±°ìš´ ì‘ì—…...
    }
}
```

**í•´ê²°ì±…:** NativeThreadSafeUpdateAnimationìœ¼ë¡œ ì´ë™

---

**2. ë§¤ í”„ë ˆì„ TryGetPawnOwner ìºìŠ¤íŒ…:**

```cpp
// âŒ ë§¤ í”„ë ˆì„ ìºìŠ¤íŒ… ì˜¤ë²„í—¤ë“œ
virtual void NativeUpdateAnimation(float DeltaSeconds) override
{
    AMyCharacter* Character = Cast<AMyCharacter>(TryGetPawnOwner());  // âŒ ë§¤ë²ˆ ìºìŠ¤íŒ…
    if (Character)
    {
        Speed = Character->GetSpeed();
    }
}
```

**í•´ê²°ì±…:** ì´ˆê¸°í™” ì‹œ ìºì‹±

```cpp
// âœ… ì´ˆê¸°í™” ì‹œ 1íšŒ ìºì‹±
UPROPERTY()
AMyCharacter* CachedCharacter;

virtual void NativeInitializeAnimation() override
{
    Super::NativeInitializeAnimation();
    CachedCharacter = Cast<AMyCharacter>(TryGetPawnOwner());
}

virtual void NativeUpdateAnimation(float DeltaSeconds) override
{
    Super::NativeUpdateAnimation(DeltaSeconds);

    if (CachedCharacter)  // âœ… ìºì‹±ëœ í¬ì¸í„° ì‚¬ìš©
    {
        Speed = CachedCharacter->GetSpeed();
    }
}
```

---

**3. ë¶ˆí•„ìš”í•œ ì»¤ë¸Œ ì˜¤ë²„ë¼ì´ë“œ:**

```cpp
// âŒ ë§¤ í”„ë ˆì„ ë¶ˆí•„ìš”í•œ ì»¤ë¸Œ ì˜¤ë²„ë¼ì´ë“œ
virtual void NativeUpdateAnimation(float DeltaSeconds) override
{
    Super::NativeUpdateAnimation(DeltaSeconds);

    OverrideCurveValue(FName("Speed"), Speed);  // âŒ ë¶ˆí•„ìš”!
}
```

**í•´ê²°ì±…:** AnimGraphì—ì„œ ì§ì ‘ ë³€ìˆ˜ ì‚¬ìš©

```
AnimGraph:
  Speed ë³€ìˆ˜ â†’ BlendSpace ì…ë ¥
  (ì»¤ë¸Œ ì˜¤ë²„ë¼ì´ë“œ ë¶ˆí•„ìš”)
```

---

## ğŸ”§ ë””ë²„ê¹… ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (Debugging & Troubleshooting)

### Stat ëª…ë ¹ì–´

```
stat Anim             // ì• ë‹ˆë©”ì´ì…˜ ì „ì²´ í†µê³„
stat AnimNodes        // ê°œë³„ ë…¸ë“œ ë¹„ìš©
stat Game             // ê²Œì„ ìŠ¤ë ˆë“œ ì‹œê°„ (UpdateAnimation í¬í•¨)
```

**ì£¼ìš” ì§€í‘œ:**
- **Game Thread Time**: UpdateAnimation ì‹œê°„ (ëª©í‘œ: < 1ms)
- **Worker Thread Time**: AnimGraph í‰ê°€ ì‹œê°„ (ëª©í‘œ: < 2ms)
- **AnimNode Count**: í™œì„± ë…¸ë“œ ìˆ˜ (ëª©í‘œ: < 100)

---

### ë””ë²„ê¹… íŒ

**âœ… Anim Instanceê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ:**

```cpp
// í™•ì¸:
bool bIsInit = IsInitialized();
if (!bIsInit)
{
    UE_LOG(LogTemp, Warning, TEXT("AnimInstance not initialized!"));
}
```

**ì›ì¸:**
- SkeletalMeshComponentê°€ ì•„ì§ ë“±ë¡ë˜ì§€ ì•ŠìŒ
- InitializeAnimation() í˜¸ì¶œë˜ì§€ ì•ŠìŒ

**í•´ê²°ì±…:**
- `NativeBeginPlay()` ì´í›„ì— ì• ë‹ˆë©”ì´ì…˜ ë¡œì§ ì‹¤í–‰
- `IsInitialized()` ì²´í¬ ì¶”ê°€

---

**âœ… Montageê°€ ì¬ìƒë˜ì§€ ì•ŠìŒ:**

```cpp
// í™•ì¸:
float Duration = Montage_Play(AttackMontage);
if (Duration <= 0.f)
{
    UE_LOG(LogTemp, Error, TEXT("Failed to play montage!"));

    // ì›ì¸ ì²´í¬
    bool bIsValid = AttackMontage != nullptr;
    bool bHasSlot = AttackMontage->SlotAnimTracks.Num() > 0;
    UE_LOG(LogTemp, Log, TEXT("Montage valid: %d, Has slot: %d"), bIsValid, bHasSlot);
}
```

**í”í•œ ì›ì¸:**
- Montageì— Slot Nodeê°€ ì—†ìŒ (AnimGraphì— Slot ë…¸ë“œ ì¶”ê°€ í•„ìš”)
- Slot ì´ë¦„ ë¶ˆì¼ì¹˜
- ì´ë¯¸ ë‹¤ë¥¸ Montageê°€ ì¬ìƒ ì¤‘ (bStopAllMontages = falseì¸ ê²½ìš°)

---

**âœ… Worker Thread í¬ë˜ì‹œ:**

```cpp
// âŒ í¬ë˜ì‹œ ì›ì¸ ì°¾ê¸°
virtual void NativeThreadSafeUpdateAnimation(float DeltaSeconds) override
{
    Super::NativeThreadSafeUpdateAnimation(DeltaSeconds);

    // âŒ UObject ì ‘ê·¼ ì‹œ í¬ë˜ì‹œ
    // TryGetPawnOwner();  // ì—¬ê¸°ì„œ í¬ë˜ì‹œ!
}
```

**í™•ì¸ ë°©ë²•:**
- Call Stackì—ì„œ `NativeThreadSafeUpdateAnimation` í™•ì¸
- UObject ì ‘ê·¼ ì½”ë“œ ì œê±°
- NativeUpdateAnimationìœ¼ë¡œ ì´ë™

---

**âœ… ì»¤ë¸Œ ê°’ì´ 0:**

```cpp
// í™•ì¸:
float CurveValue = GetCurveValue(FName("MyCurve"));
if (FMath::IsNearlyZero(CurveValue))
{
    // ì›ì¸ ì²´í¬
    TArray<FName> AllCurves;
    GetAllCurveNames(AllCurves);

    bool bExists = AllCurves.Contains(FName("MyCurve"));
    UE_LOG(LogTemp, Warning, TEXT("Curve exists: %d"), bExists);
}
```

**í”í•œ ì›ì¸:**
- ì»¤ë¸Œ ì´ë¦„ ì˜¤íƒ€
- ì• ë‹ˆë©”ì´ì…˜ì— ì»¤ë¸Œê°€ ì—†ìŒ
- ì»¤ë¸Œê°€ ë¹„í™œì„±í™”ë¨ (AnimGraphì—ì„œ í•„í„°ë§ë¨)

---

### Pose Watch (ì—ë””í„° ì „ìš©)

**ì—ë””í„°ì—ì„œ íŠ¹ì • ë…¸ë“œì˜ í¬ì¦ˆ ì‹œê°í™”:**

1. Animation Blueprint ì—ë””í„° ì—´ê¸°
2. AnimGraphì—ì„œ ë…¸ë“œ ìš°í´ë¦­
3. "Toggle Pose Watch" ì„ íƒ
4. PIE ì‹¤í–‰ â†’ í•´ë‹¹ ë…¸ë“œì˜ í¬ì¦ˆê°€ 3D ë·°í¬íŠ¸ì— í‘œì‹œë¨

**í™œìš©:**
- íŠ¹ì • ë…¸ë“œ ì¶œë ¥ í™•ì¸
- ë¸”ë Œë”© ê°€ì¤‘ì¹˜ ë””ë²„ê¹…
- IK ê²°ê³¼ ê²€ì¦

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ (Related Documents)

- [Overview.md](../Overview.md) - UAF ì „ì²´ ê°œìš”
- [AnimSequence.md](./AnimSequence.md) - ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤
- [StateMachine.md](../AnimGraph/StateMachine.md) - ìƒíƒœ ë¨¸ì‹  ì‹œìŠ¤í…œ
- [BlendSpace.md](../AnimGraph/BlendSpace.md) - ë¸”ë Œë“œ ìŠ¤í˜ì´ìŠ¤
- [AnimMontage.md](../AnimGraph/AnimMontage.md) - ëª½íƒ€ì£¼ ì‹œìŠ¤í…œ

---

## ğŸ“š ì°¸ê³  ìë£Œ (References)

### ì†ŒìŠ¤ íŒŒì¼
- `Engine/Source/Runtime/Engine/Classes/Animation/AnimInstance.h` (1,700+ ë¼ì¸)
- `Engine/Source/Runtime/Engine/Public/Animation/AnimInstanceProxy.h` (1,000+ ë¼ì¸)
- `Engine/Source/Runtime/Engine/Private/Animation/AnimInstance.cpp`

### ê³µì‹ ë¬¸ì„œ
- [Unreal Engine - Animation Blueprint](https://docs.unrealengine.com/5.7/en-US/animation-blueprints-in-unreal-engine/)
- [Animation Instance Class](https://docs.unrealengine.com/5.7/en-US/API/Runtime/Engine/Animation/UAnimInstance/)

### ì£¼ìš” API
```cpp
// ì´ˆê¸°í™”
void InitializeAnimation(bool bInDeferRootNodeInitialization = false);
virtual void NativeInitializeAnimation();

// ì—…ë°ì´íŠ¸
void UpdateAnimation(float DeltaSeconds, bool bNeedsValidRootMotion,
                     EUpdateAnimationFlag UpdateFlag = EUpdateAnimationFlag::Default);
virtual void NativeUpdateAnimation(float DeltaSeconds);
virtual void NativeThreadSafeUpdateAnimation(float DeltaSeconds);
void PostUpdateAnimation();

// í‰ê°€
void ParallelEvaluateAnimation(bool bForceRefPose, const USkeletalMesh* InSkeletalMesh,
                                FParallelEvaluationData& OutAnimationPoseData);
virtual void NativePostEvaluateAnimation();

// Montage
float Montage_Play(UAnimMontage* MontageToPlay, float InPlayRate = 1.f, ...);
void Montage_Stop(float InBlendOutTime, const UAnimMontage* Montage = NULL);
void Montage_JumpToSection(FName SectionName, const UAnimMontage* Montage = NULL);
bool Montage_IsPlaying(const UAnimMontage* Montage) const;

// ì»¤ë¸Œ
float GetCurveValue(FName CurveName) const;
void OverrideCurveValue(FName CurveName, float Value);

// Proxy
template <typename T> T& GetProxyOnGameThread();
```

---

> ğŸ”„ **ì‘ì„±ì¼**: 2025-11-07
> ğŸ“ **ë¬¸ì„œ ë²„ì „**: v1.0
> âœ… **ì†ŒìŠ¤ ê²€ì¦**: UE 5.7.0
> ğŸ“‚ **ë‹¤ìŒ ë¬¸ì„œ**: [AnimSequence.md](./AnimSequence.md)
