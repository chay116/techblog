---
title: "UAnimSequence - ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤ ë°ì´í„° (Animation Sequence Data)"
date: "2026-02-18"
status: "stable"
project: "UnrealEngine"
lang: "ko"
category: "unreal-summary"
track: "Animation"
tags: ["unreal", "Animation", "Core"]
---
# UAnimSequence - ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤ ë°ì´í„° (Animation Sequence Data)

## ğŸ§­ ê°œìš” (Overview)

**UAnimSequence**ëŠ” Unreal Animation Frameworkì˜ **í•µì‹¬ ì—ì…‹ í´ë˜ìŠ¤**ë¡œ, ì• ë‹ˆë©”ì´ì…˜ í‚¤í”„ë ˆì„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. ìŠ¤ì¼ˆë ˆíƒˆ ë©”ì‹œì˜ ë³¸(Bone) ì• ë‹ˆë©”ì´ì…˜ê³¼ ì»¤ë¸Œ(Curve) ë°ì´í„°ë¥¼ í¬í•¨í•˜ë©°, ì••ì¶•, ë£¨íŠ¸ ëª¨ì…˜, Additive ì• ë‹ˆë©”ì´ì…˜, ë¦¬íƒ€ê²ŒíŒ… ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.

**í•µì‹¬ ì—­í• :**
- **ì• ë‹ˆë©”ì´ì…˜ ë°ì´í„° ì €ì¥**: í‚¤í”„ë ˆì„ ê¸°ë°˜ ë³¸ Transform ë° ì»¤ë¸Œ ë°ì´í„°
- **ì••ì¶• ì‹œìŠ¤í…œ**: ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ìœ„í•œ ê³ ë„ ì••ì¶• (Codec ê¸°ë°˜)
- **í¬ì¦ˆ ì¶”ì¶œ (Pose Extraction)**: íŠ¹ì • ì‹œê°„ì˜ ë³¸ Transform ê³„ì‚°
- **Additive Animation**: ê¸°ì¤€ í¬ì¦ˆ ëŒ€ë¹„ ì°¨ì´ ì• ë‹ˆë©”ì´ì…˜
- **Root Motion**: ë£¨íŠ¸ ë³¸ ì´ë™ ì¶”ì¶œ ë° ìºë¦­í„° ì´ë™ ì ìš©
- **Sync Markers**: ì• ë‹ˆë©”ì´ì…˜ ë™ê¸°í™” ë§ˆì»¤ ì‹œìŠ¤í…œ
- **Retargeting**: ë‹¤ë¥¸ ìŠ¤ì¼ˆë ˆí†¤ìœ¼ë¡œ ì• ë‹ˆë©”ì´ì…˜ ì´ì‹

**ğŸ“‚ ìœ„ì¹˜:** `Engine/Source/Runtime/Engine/Classes/Animation/AnimSequence.h:200`

---

## ğŸ¯ ì„¤ê³„ ì² í•™: ì™œ UAnimSequenceì¸ê°€?

### ë¬¸ì œ: ì• ë‹ˆë©”ì´ì…˜ ë°ì´í„°ì˜ íš¨ìœ¨ì  ì €ì¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì „í†µì  ì• ë‹ˆë©”ì´ì…˜ ì €ì¥ ë°©ì‹ì˜ í•œê³„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 1: ë©”ëª¨ë¦¬ í­ë°œ                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  60 FPS, 5ì´ˆ ì• ë‹ˆë©”ì´ì…˜, 100ê°œ ë³¸:        â”‚                          â”‚
â”‚  â”‚  300 keys Ã— 100 bones Ã— 40 bytes/key      â”‚                          â”‚
â”‚  â”‚  = 1,200,000 bytes (1.2 MB)              â”‚                          â”‚
â”‚  â”‚                                          â”‚                          â”‚
â”‚  â”‚  100ê°œ ì• ë‹ˆë©”ì´ì…˜ â†’ 120 MB!               â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 2: ë¶ˆí•„ìš”í•œ í‚¤í”„ë ˆì„                                            â”‚
â”‚  - ì •ì  ë³¸ (ì›€ì§ì´ì§€ ì•ŠìŒ)ë„ ëª¨ë“  í”„ë ˆì„ ì €ì¥                             â”‚
â”‚  - ì„ í˜• ë³´ê°„ ê°€ëŠ¥í•œ ë°ì´í„°ë„ ëª¨ë“  í”„ë ˆì„ ì €ì¥                             â”‚
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 3: ë¶€ë™ì†Œìˆ˜ì  ì •ë°€ë„ ë‚­ë¹„                                       â”‚
â”‚  - FVector3f (12 bytes), FQuat4f (16 bytes)                            â”‚
â”‚  - ëŒ€ë¶€ë¶„ì˜ ê²½ìš° 32ë¹„íŠ¸ ì •ë°€ë„ ë¶ˆí•„ìš”                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                   UAnimSequence ì†”ë£¨ì…˜:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 1: ì••ì¶• ì‹œìŠ¤í…œ (Codec ê¸°ë°˜)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimBoneCompressionCodec               â”‚                          â”‚
â”‚  â”‚  - ì–‘ìí™” (Quantization)                 â”‚                          â”‚
â”‚  â”‚  - ì¤‘ë³µ í‚¤ ì œê±°                           â”‚                          â”‚
â”‚  â”‚  - ì„ í˜• ë³´ê°„ ê°€ëŠ¥ í‚¤ ì œê±°                  â”‚                          â”‚
â”‚  â”‚  - ë¹„íŠ¸ íŒ¨í‚¹                              â”‚                          â”‚
â”‚  â”‚                                          â”‚                          â”‚
â”‚  â”‚  ê²°ê³¼: 1.2 MB â†’ ~100-200 KB (6-12ë°° ì••ì¶•) â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 2: ì›ë³¸/ì••ì¶• ë¶„ë¦¬ (ì—ë””í„° vs ëŸ°íƒ€ì„)                             â”‚
â”‚  - ì—ë””í„°: ì›ë³¸ ë°ì´í„° ìœ ì§€ (í¸ì§‘ ê°€ëŠ¥)                                   â”‚
â”‚  - ëŸ°íƒ€ì„: ì••ì¶• ë°ì´í„°ë§Œ ë¡œë“œ                                            â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 3: í”Œë«í¼ë³„ ì••ì¶•                                                â”‚
â”‚  - ëª¨ë°”ì¼: ë†’ì€ ì••ì¶•ë¥                                                    â”‚
â”‚  - PC/ì½˜ì†”: í’ˆì§ˆ ìš°ì„                                                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ê³„ ê²°ì •

| ê²°ì • ì‚¬í•­ | ì´ìœ  | íŠ¸ë ˆì´ë“œì˜¤í”„ |
|----------|------|-------------|
| **Codec ê¸°ë°˜ ì••ì¶•** | ë‹¤ì–‘í•œ ì••ì¶• ì•Œê³ ë¦¬ì¦˜ ì§€ì› | ì••ì¶•/í•´ì œ ì‹œê°„ |
| **ì›ë³¸ ë°ì´í„° ì—ë””í„° ì „ìš©** | ëŸ°íƒ€ì„ ë©”ëª¨ë¦¬ ì ˆê° | ì—ë””í„° ë¹Œë“œ í¬ê¸° ì¦ê°€ |
| **í”Œë«í¼ë³„ DDC** | í”Œë«í¼ ìµœì í™” | DDC ì €ì¥ ê³µê°„ ì¦ê°€ |
| **KeyReduce ì•Œê³ ë¦¬ì¦˜** | ì¤‘ë³µ í‚¤ ì œê±° | ë¡œì§• ì˜¤ì°¨ ë°œìƒ ê°€ëŠ¥ |

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `AnimSequence.h:200-983` - UAnimSequence í´ë˜ìŠ¤ ì •ì˜
- `AnimTypes.h:852-925` - FRawAnimSequenceTrack êµ¬ì¡°
- `AnimCompressionTypes.h:774-854` - FCompressedAnimSequence êµ¬ì¡°

---

## ğŸ—ï¸ ë°ì´í„° êµ¬ì¡° (Data Structures)

### 1. ì›ë³¸ ë°ì´í„°: FRawAnimSequenceTrack

**ğŸ“‚ ìœ„ì¹˜:** `Engine/Source/Runtime/Engine/Public/Animation/AnimTypes.h:852`

```cpp
// AnimTypes.h:852-925
USTRUCT(BlueprintType)
struct FRawAnimSequenceTrack
{
    GENERATED_USTRUCT_BODY()

    /** Position keys. */
    UPROPERTY()
    TArray<FVector3f> PosKeys;

    /** Rotation keys. */
    UPROPERTY()
    TArray<FQuat4f> RotKeys;

    /** Scale keys. */
    UPROPERTY()
    TArray<FVector3f> ScaleKeys;

    static const uint32 SingleKeySize = sizeof(FVector3f) + sizeof(FQuat4f) + sizeof(FVector3f);
    // = 12 + 16 + 12 = 40 bytes per key
};
```

**ë©”ëª¨ë¦¬ ë ˆì´ì•„ì›ƒ:**

```
ë‹¨ì¼ í‚¤ (Single Key):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Position (FVector3f)   â”‚  Rotation (FQuat4f)    â”‚  Scale       â”‚
â”‚  12 bytes               â”‚  16 bytes              â”‚  12 bytes    â”‚
â”‚  (X, Y, Z: 4B each)     â”‚  (X, Y, Z, W: 4B each) â”‚  (X, Y, Z)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ì´ 40 bytes per key

ë³¸ í•˜ë‚˜ì˜ ì „ì²´ ì• ë‹ˆë©”ì´ì…˜ (Nê°œ í‚¤):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key 0   â”‚  Key 1   â”‚  Key 2   â”‚  ...  â”‚  Key N-1            â”‚
â”‚  40B     â”‚  40B     â”‚  40B     â”‚  ...  â”‚  40B                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ì´ N Ã— 40 bytes per bone

ì „ì²´ ì• ë‹ˆë©”ì´ì…˜ (Mê°œ ë³¸):
Bone 0 Track: N Ã— 40 bytes
Bone 1 Track: N Ã— 40 bytes
...
Bone M-1 Track: N Ã— 40 bytes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ M Ã— N Ã— 40 bytes (ì••ì¶• ì „)

ì˜ˆì‹œ: 60 FPS, 5ì´ˆ, 100ê°œ ë³¸
= 300 keys Ã— 100 bones Ã— 40 bytes
= 1,200,000 bytes (1.2 MB)
```

---

### 2. ì••ì¶• ë°ì´í„°: FCompressedAnimSequence

**ğŸ“‚ ìœ„ì¹˜:** `Engine/Source/Runtime/Engine/Public/Animation/AnimCompressionTypes.h:774`

```cpp
// AnimCompressionTypes.h:774-854
struct FCompressedAnimSequence
{
public:
    // ì••ì¶• íŠ¸ë™ â†’ ìŠ¤ì¼ˆë ˆí†¤ ë³¸ ë§µí•‘
    TArray<struct FTrackToSkeletonMap> CompressedTrackToSkeletonMapTable;

    // ì••ì¶•ëœ ì»¤ë¸Œ ì´ë¦„ (FNameìœ¼ë¡œ ì •ë ¬ëœ ì¸ë±ìŠ¤)
    TArray<FAnimCompressedCurveIndexedName> IndexedCurveNames;

    // ì••ì¶•ëœ ì• ë‹ˆë©”ì´ì…˜ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ (ì•Œê³ ë¦¬ì¦˜ ì˜ì¡´ì )
#if WITH_EDITOR
    TArray<uint8> CompressedByteStream;
    FByteBulkData OptionalBulk;
#else
    TMaybeMappedArray<uint8> CompressedByteStream;
#endif

    // ì••ì¶•ëœ ì»¤ë¸Œ ë°ì´í„°
    TArray<uint8> CompressedCurveByteStream;

    // ì•Œê³ ë¦¬ì¦˜ë³„ ì••ì¶• ë°ì´í„° êµ¬ì¡°
    TUniquePtr<ICompressedAnimData> CompressedDataStructure;

    // ë³¸ ì••ì¶• ì½”ë±
    TObjectPtr<class UAnimBoneCompressionCodec> BoneCompressionCodec;

    // ì»¤ë¸Œ ì••ì¶• ì½”ë±
    TObjectPtr<class UAnimCurveCompressionCodec> CurveCompressionCodec;

    // ì›ë³¸ ë°ì´í„° í¬ê¸° (ë¹„êµìš©)
    int32 CompressedRawDataSize;
};
```

**ì••ì¶• ë°ì´í„° íë¦„:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì••ì¶• ë°ì´í„° ìƒì„± ê³¼ì •                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  [1] ì›ë³¸ ë°ì´í„°                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  FRawAnimSequenceTrack[]                 â”‚                          â”‚
â”‚  â”‚  - PosKeys, RotKeys, ScaleKeys           â”‚                          â”‚
â”‚  â”‚  - ê° ë³¸ë§ˆë‹¤ Nê°œ í‚¤í”„ë ˆì„                 â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚         â†“ UAnimBoneCompressionCodec::Compress()                        â”‚
â”‚  [2] ì••ì¶• ì²˜ë¦¬                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  1. KeyReduction (í‚¤ ì¤„ì´ê¸°)             â”‚                          â”‚
â”‚  â”‚     - ì •ì  ë³¸ ê°ì§€ (ëª¨ë“  í‚¤ ë™ì¼)         â”‚                          â”‚
â”‚  â”‚     - ì„ í˜• ë³´ê°„ ê°€ëŠ¥ í‚¤ ì œê±°              â”‚                          â”‚
â”‚  â”‚                                          â”‚                          â”‚
â”‚  â”‚  2. Quantization (ì–‘ìí™”)                â”‚                          â”‚
â”‚  â”‚     - Position: 16-bit fixed point       â”‚                          â”‚
â”‚  â”‚     - Rotation: QuatLog + 11-bit/axis    â”‚                          â”‚
â”‚  â”‚     - Scale: 16-bit fixed point          â”‚                          â”‚
â”‚  â”‚                                          â”‚                          â”‚
â”‚  â”‚  3. BitPacking (ë¹„íŠ¸ íŒ¨í‚¹)               â”‚                          â”‚
â”‚  â”‚     - ì •ë°€ë„ ë²”ìœ„ ì••ì¶•                    â”‚                          â”‚
â”‚  â”‚     - ì—”íŠ¸ë¡œí”¼ ì½”ë”©                       â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚         â†“                                                               â”‚
â”‚  [3] ì••ì¶• ê²°ê³¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  CompressedByteStream                    â”‚                          â”‚
â”‚  â”‚  - ì•Œê³ ë¦¬ì¦˜ë³„ ì»¤ìŠ¤í…€ í¬ë§·                  â”‚                          â”‚
â”‚  â”‚  - CompressedDataStructure (ë©”íƒ€ë°ì´í„°)  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â”‚  ì••ì¶•ë¥ : 1.2 MB â†’ ~100-200 KB (6-12ë°°)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§± UAnimSequence í´ë˜ìŠ¤ êµ¬ì¡°

### í´ë˜ìŠ¤ ê³„ì¸µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UAnimSequence                                   â”‚
â”‚  (ì• ë‹ˆë©”ì´ì…˜ ì‹œí€€ìŠ¤ ì—ì…‹)                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ìƒì†: UObject â†’ UAnimationAsset â†’ UAnimSequenceBase â†’ UAnimSequence    â”‚
â”‚                                                                         â”‚
â”‚  Public:                                                                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ì••ì¶• ì„¤ì •                                                 â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + BoneCompressionSettings : UAnimBoneCompressionSettings â”‚       â”‚
â”‚    â”‚  + CurveCompressionSettings : UAnimCurveCompressionSettings       â”‚
â”‚    â”‚  + VariableFrameStrippingSettings : UVariableFrameStrippingSettingsâ”‚
â”‚    â”‚  + bAllowFrameStripping : bool                            â”‚       â”‚
â”‚    â”‚  + CompressionErrorThresholdScale : float                 â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  Additive ì„¤ì •                                             â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + AdditiveAnimType : EAdditiveAnimationType             â”‚       â”‚
â”‚    â”‚    - AAT_None, AAT_LocalSpaceBase, AAT_RotationOffsetMeshSpace    â”‚
â”‚    â”‚  + RefPoseType : EAdditiveBasePoseType                   â”‚       â”‚
â”‚    â”‚    - ABPT_None, ABPT_RefPose, ABPT_AnimScaled, ABPT_AnimFrame    â”‚
â”‚    â”‚  + RefFrameIndex : int32                                  â”‚       â”‚
â”‚    â”‚  + RefPoseSeq : UAnimSequence*                            â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ë£¨íŠ¸ ëª¨ì…˜ ì„¤ì •                                            â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + bEnableRootMotion : bool                               â”‚       â”‚
â”‚    â”‚  + RootMotionRootLock : ERootMotionRootLock::Type         â”‚       â”‚
â”‚    â”‚    - RefPose, AnimFirstFrame, Zero                        â”‚       â”‚
â”‚    â”‚  + bForceRootLock : bool                                  â”‚       â”‚
â”‚    â”‚  + bUseNormalizedRootMotionScale : bool                   â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ë¦¬íƒ€ê²ŒíŒ… ì„¤ì •                                             â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + RetargetSource : FName                                 â”‚       â”‚
â”‚    â”‚  + RetargetSourceAsset : TSoftObjectPtr<USkeletalMesh>   â”‚       â”‚
â”‚    â”‚  + RetargetSourceAssetReferencePose : TArray<FTransform> â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  ë³´ê°„ ì„¤ì •                                                 â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + Interpolation : EAnimInterpolationType                â”‚       â”‚
â”‚    â”‚    - Linear, Step                                         â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚  Sync Markers                                              â”‚       â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚    â”‚  + AuthoredSyncMarkers : TArray<FAnimSyncMarker>         â”‚       â”‚
â”‚    â”‚  + UniqueMarkerNames : TArray<FName>                      â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                         â”‚
â”‚  Protected:                                                             â”‚
â”‚    + PlatformTargetFrameRate : FPerPlatformFrameRate                   â”‚
â”‚    + AttributeCurves : TMap<FAnimationAttributeIdentifier, FAttributeCurve>â”‚
â”‚                                                                         â”‚
â”‚  Private (ì—ë””í„° ì „ìš©):                                                  â”‚
â”‚    + DataByPlatformKeyHash : TMap<FIoHash, TUniquePtr<FCompressedAnimSequence>>â”‚
â”‚    + CacheTasksByKeyHash : TMap<FIoHash, TPimplPtr<FAnimationSequenceAsyncCacheTask>>â”‚
â”‚    + SharedCompressedDataMutex : UE::FSharedRecursiveMutex             â”‚
â”‚                                                                         â”‚
â”‚  ì£¼ìš” ë©”ì„œë“œ:                                                            â”‚
â”‚    + GetAnimationPose(OutPoseData, ExtractionContext) : void          â”‚
â”‚    + GetBonePose(OutPoseData, ExtractionContext, bForceUseRawData) : voidâ”‚
â”‚    + ExtractRootMotion(ExtractionContext) : FTransform                â”‚
â”‚    + EvaluateCurveData(OutCurve, ExtractionContext, bForceUseRawData) : voidâ”‚
â”‚    + GetCompressedData() : FScopedCompressedAnimSequence              â”‚
â”‚    + IsCompressedDataValid() : bool                                   â”‚
â”‚    + GetApproxCompressedSize() : int32                                â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:** `Engine/Source/Runtime/Engine/Classes/Animation/AnimSequence.h:200-983`

---

## ğŸ”„ í¬ì¦ˆ ì¶”ì¶œ (Pose Extraction)

### í¬ì¦ˆ ì¶”ì¶œ í”„ë¡œì„¸ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GetAnimationPose() - í¬ì¦ˆ ì¶”ì¶œ ì „ì²´ íë¦„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  [Input]                                                                â”‚
â”‚  - FAnimationPoseData& OutAnimationPoseData                            â”‚
â”‚    - OutPose : FCompactPose (ë³¸ Transform ë°°ì—´)                        â”‚
â”‚    - OutCurve : FBlendedCurve (ì»¤ë¸Œ ê°’)                                 â”‚
â”‚    - OutAttributes : FStackCustomAttributes (ì»¤ìŠ¤í…€ ì†ì„±)               â”‚
â”‚  - FAnimExtractContext& ExtractionContext                              â”‚
â”‚    - CurrentTime : double (ì¶”ì¶œ ì‹œê°„)                                   â”‚
â”‚    - bLooping : bool (ë£¨í”„ ì—¬ë¶€)                                        â”‚
â”‚    - InterpolationOverride : TOptional<EAnimInterpolationType>         â”‚
â”‚                                                                         â”‚
â”‚  [Step 1: ê²½ë¡œ ê²°ì •]                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  ShouldUseRawDataForPoseExtraction()?  â”‚                            â”‚
â”‚  â”‚  - ì••ì¶• ë°ì´í„° ìœ íš¨?                    â”‚                            â”‚
â”‚  â”‚  - bForceUseRawData í”Œë˜ê·¸?             â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â”œâ”€ Yes: ì›ë³¸ ë°ì´í„° ì‚¬ìš© (ì—ë””í„° ì „ìš©)                             â”‚
â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚       â”‚   â”‚  IAnimationDataModel ì‚¬ìš©        â”‚                          â”‚
â”‚       â”‚   â”‚  - GetBoneTrackTransform()       â”‚                          â”‚
â”‚       â”‚   â”‚  - í‚¤í”„ë ˆì„ ë³´ê°„ (Linear/Step)   â”‚                          â”‚
â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚       â”‚                                                                 â”‚
â”‚       â””â”€ No: ì••ì¶• ë°ì´í„° ì‚¬ìš© (ëŸ°íƒ€ì„)                                   â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚  GetCompressedData_Internal()    â”‚                          â”‚
â”‚           â”‚  â†“                               â”‚                          â”‚
â”‚           â”‚  Codec->DecompressPose()         â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                    â†“                                                   â”‚
â”‚  [Step 2: í¬ì¦ˆ í•´ì œ (Decompression)]                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  For each bone in RequiredBones:       â”‚                            â”‚
â”‚  â”‚  {                                     â”‚                            â”‚
â”‚  â”‚      TrackIndex = GetTrackIndex(BoneIndex);                         â”‚
â”‚  â”‚      if (TrackIndex != INDEX_NONE)     â”‚                            â”‚
â”‚  â”‚      {                                 â”‚                            â”‚
â”‚  â”‚          FTransform BoneTransform =    â”‚                            â”‚
â”‚  â”‚              Codec->GetBoneAtom(...);  â”‚                            â”‚
â”‚  â”‚          OutPose[BoneIndex] = BoneTransform;                        â”‚
â”‚  â”‚      }                                 â”‚                            â”‚
â”‚  â”‚  }                                     â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â†“                                                   â”‚
â”‚  [Step 3: Additive ì²˜ë¦¬ (ì„ íƒì )]                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  if (IsValidAdditive())                â”‚                            â”‚
â”‚  â”‚  {                                     â”‚                            â”‚
â”‚  â”‚      GetBonePose_Additive(...);        â”‚                            â”‚
â”‚  â”‚      // ê¸°ì¤€ í¬ì¦ˆ (Base Pose) ê³„ì‚°      â”‚                            â”‚
â”‚  â”‚      // ì°¨ì´ ê³„ì‚° (Delta Transform)     â”‚                            â”‚
â”‚  â”‚  }                                     â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â†“                                                   â”‚
â”‚  [Step 4: ë¦¬íƒ€ê²ŒíŒ… (ì„ íƒì )]                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  if (RetargetSource != NAME_None)      â”‚                            â”‚
â”‚  â”‚  {                                     â”‚                            â”‚
â”‚  â”‚      For each bone:                    â”‚                            â”‚
â”‚  â”‚          RetargetBoneTransform(...);   â”‚                            â”‚
â”‚  â”‚  }                                     â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â†“                                                   â”‚
â”‚  [Step 5: ì»¤ë¸Œ í‰ê°€]                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  EvaluateCurveData(OutCurve, ...);     â”‚                            â”‚
â”‚  â”‚  - ì••ì¶• ì»¤ë¸Œ ë°ì´í„° í•´ì œ                 â”‚                            â”‚
â”‚  â”‚  - ì‹œê°„ì— ë”°ë¥¸ ë³´ê°„                      â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â†“                                                   â”‚
â”‚  [Step 6: ì»¤ìŠ¤í…€ ì†ì„± í‰ê°€]                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  EvaluateAttributes(OutAttributes, ...);â”‚                            â”‚
â”‚  â”‚  - AttributeCurves í‰ê°€                 â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:** `AnimSequence.h:433` - GetAnimationPose()

---

## ğŸ¨ í•µì‹¬ ê¸°ëŠ¥ (Core Features)

### 1. ì••ì¶• ì‹œìŠ¤í…œ (Compression System)

#### Codec ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Codec ê¸°ë°˜ ì••ì¶• ì‹œìŠ¤í…œ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  [Bone Compression Codec]                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimBoneCompressionCodec               â”‚                          â”‚
â”‚  â”‚  â”œâ”€ UAnimCompress_BitwiseCompressOnly    â”‚                          â”‚
â”‚  â”‚  â”‚  - ê¸°ë³¸ ë¹„íŠ¸ì™€ì´ì¦ˆ ì••ì¶•                â”‚                          â”‚
â”‚  â”‚  â”‚  - ì–‘ìí™” + ë¹„íŠ¸ íŒ¨í‚¹                  â”‚                          â”‚
â”‚  â”‚  â”‚                                       â”‚                          â”‚
â”‚  â”‚  â”œâ”€ UAnimCompress_RemoveLinearKeys       â”‚                          â”‚
â”‚  â”‚  â”‚  - ì„ í˜• ë³´ê°„ ê°€ëŠ¥ í‚¤ ì œê±°              â”‚                          â”‚
â”‚  â”‚  â”‚  - KeyReduction ì•Œê³ ë¦¬ì¦˜               â”‚                          â”‚
â”‚  â”‚  â”‚                                       â”‚                          â”‚
â”‚  â”‚  â””â”€ UAnimCompress_Automatic              â”‚                          â”‚
â”‚  â”‚     - ìë™ ìµœì  ì•Œê³ ë¦¬ì¦˜ ì„ íƒ             â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â”‚  [Curve Compression Codec]                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  UAnimCurveCompressionCodec              â”‚                          â”‚
â”‚  â”‚  â”œâ”€ UAnimCurveCompressionCodec_UniformIndexable                     â”‚
â”‚  â”‚  â”‚  - ê· ì¼ ìƒ˜í”Œë§                         â”‚                          â”‚
â”‚  â”‚  â”‚                                       â”‚                          â”‚
â”‚  â”‚  â””â”€ UAnimCurveCompressionCodec_CompressedRichCurve                  â”‚
â”‚  â”‚     - FRichCurve ì••ì¶•                    â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… ì••ì¶• ì„¤ì • ë³€ê²½
UCLASS()
class UMyAnimSequence : public UAnimSequence
{
    GENERATED_BODY()

public:
    void SetupCompression()
    {
        // ë³¸ ì••ì¶• ì„¤ì •
        BoneCompressionSettings = LoadObject<UAnimBoneCompressionSettings>(
            nullptr,
            TEXT("/Engine/Animation/DefaultAnimBoneCompressionSettings.DefaultAnimBoneCompressionSettings")
        );

        // ì»¤ë¸Œ ì••ì¶• ì„¤ì •
        CurveCompressionSettings = LoadObject<UAnimCurveCompressionSettings>(
            nullptr,
            TEXT("/Engine/Animation/DefaultAnimCurveCompressionSettings.DefaultAnimCurveCompressionSettings")
        );

        // ì••ì¶• ì˜¤ì°¨ ì„ê³„ê°’ ìŠ¤ì¼€ì¼ (ê¸°ë³¸: 1.0)
        CompressionErrorThresholdScale = 1.0f;

        // í”„ë ˆì„ ìŠ¤íŠ¸ë¦¬í•‘ í—ˆìš© (ì¶”ê°€ ì••ì¶•)
        bAllowFrameStripping = true;
    }

    void CheckCompressionStatus()
    {
        // ì••ì¶• ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
        bool bValid = IsCompressedDataValid();
        check(bValid);

        // ì••ì¶• í¬ê¸° í™•ì¸
        int32 CompressedSize = GetApproxCompressedSize();
        int32 BoneCompressedSize = GetApproxBoneCompressedSize();

        UE_LOG(LogAnimation, Log, TEXT("Compressed Size: %d bytes"), CompressedSize);
        UE_LOG(LogAnimation, Log, TEXT("Bone Compressed Size: %d bytes"), BoneCompressedSize);

#if WITH_EDITOR
        // ì›ë³¸ í¬ê¸° í™•ì¸ (ì—ë””í„° ì „ìš©)
        int64 RawSize = GetApproxRawSize();
        float CompressionRatio = (float)RawSize / (float)CompressedSize;
        UE_LOG(LogAnimation, Log, TEXT("Compression Ratio: %.2fx"), CompressionRatio);
#endif
    }
};
```

---

### 2. Additive Animation

#### Additive Animation ê°œë…

**Additive Animation**ì€ ê¸°ì¤€ í¬ì¦ˆ(Base Pose) ëŒ€ë¹„ **ì°¨ì´(Delta)**ë¥¼ ì €ì¥í•˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì…ë‹ˆë‹¤. ê¸°ë³¸ ì• ë‹ˆë©”ì´ì…˜ ìœ„ì— ì¶”ê°€ë¡œ ì ìš©í•˜ì—¬ í‘œí˜„ì˜ í­ì„ ë„“í™ë‹ˆë‹¤.

```
ê¸°ì¤€ í¬ì¦ˆ (Base Pose)   +   Additive Animation   =   ìµœì¢… í¬ì¦ˆ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Idle í¬ì¦ˆ      â”‚    +    â”‚  Breathing Delta â”‚   =   â”‚  Breathing Idle â”‚
â”‚   (ì •ì )         â”‚         â”‚  (ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„)â”‚       â”‚  (ìƒë™ê° ìˆìŒ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì˜ˆì‹œ:
Base: Idle (ì„œ ìˆëŠ” í¬ì¦ˆ)
Additive: +Breathing (ê°€ìŠ´ ìœ„ì•„ë˜ ì•½ê°„ ì›€ì§ì„)
Additive: +Wind (ë°”ëŒì— í”ë“¤ë¦¼)
â†’ ìµœì¢…: Idle + Breathing + Wind (ë³µí•© íš¨ê³¼)
```

#### Additive íƒ€ì…

```cpp
// EAdditiveAnimationType
enum EAdditiveAnimationType : uint8
{
    AAT_None = 0,                        // Non-additive (ì¼ë°˜ ì• ë‹ˆë©”ì´ì…˜)
    AAT_LocalSpaceBase,                  // Local Space Additive (ë¡œì»¬ ê³µê°„ ì°¨ì´)
    AAT_RotationOffsetMeshSpace,         // Mesh Space Rotation Only (ë©”ì‹œ ê³µê°„ íšŒì „ë§Œ)
};

// EAdditiveBasePoseType
enum EAdditiveBasePoseType : uint8
{
    ABPT_None = 0,                       // None (Additive ì•„ë‹˜)
    ABPT_RefPose,                        // Reference Pose (ìŠ¤ì¼ˆë ˆí†¤ ê¸°ì¤€ í¬ì¦ˆ)
    ABPT_AnimScaled,                     // Animation Scaled (ì• ë‹ˆë©”ì´ì…˜ ìŠ¤ì¼€ì¼)
    ABPT_AnimFrame,                      // Animation Frame (íŠ¹ì • í”„ë ˆì„)
};
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… Additive Animation ì„¤ì •
void SetupAdditiveAnimation(UAnimSequence* AnimSeq)
{
    // Local Space Additiveë¡œ ì„¤ì •
    AnimSeq->AdditiveAnimType = EAdditiveAnimationType::AAT_LocalSpaceBase;

    // ê¸°ì¤€ í¬ì¦ˆ: RefPose (ìŠ¤ì¼ˆë ˆí†¤ ê¸°ì¤€ í¬ì¦ˆ ì‚¬ìš©)
    AnimSeq->RefPoseType = EAdditiveBasePoseType::ABPT_RefPose;

    // ë˜ëŠ” íŠ¹ì • í”„ë ˆì„ì„ ê¸°ì¤€ìœ¼ë¡œ
    // AnimSeq->RefPoseType = EAdditiveBasePoseType::ABPT_AnimFrame;
    // AnimSeq->RefFrameIndex = 0;  // ì²« í”„ë ˆì„

    // ë˜ëŠ” ë‹¤ë¥¸ ì• ë‹ˆë©”ì´ì…˜ì„ ê¸°ì¤€ìœ¼ë¡œ
    // AnimSeq->RefPoseType = EAdditiveBasePoseType::ABPT_AnimScaled;
    // AnimSeq->RefPoseSeq = IdleAnimation;
}

// âœ… Additive í¬ì¦ˆ ì¶”ì¶œ
void ExtractAdditivePose(UAnimSequence* AnimSeq)
{
    if (!AnimSeq->IsValidAdditive())
    {
        UE_LOG(LogAnimation, Warning, TEXT("Not a valid additive animation"));
        return;
    }

    FAnimExtractContext ExtractionContext(0.5);  // 0.5ì´ˆ ì‹œì 

    FBoneContainer BoneContainer;
    // BoneContainer ì´ˆê¸°í™”...

    FCompactPose Pose;
    Pose.SetBoneContainer(&BoneContainer);

    FBlendedCurve Curve;
    FStackCustomAttributes Attributes;

    FAnimationPoseData OutPoseData(Pose, Curve, Attributes);

    // Additive í¬ì¦ˆ ì¶”ì¶œ
    AnimSeq->GetBonePose_Additive(OutPoseData, ExtractionContext);

    // OutPoseData.GetPose()ëŠ” ì´ì œ Delta Transform í¬í•¨
    // (ê¸°ì¤€ í¬ì¦ˆ ëŒ€ë¹„ ì°¨ì´)
}
```

**ë‚´ë¶€ ë™ì‘:**

```
GetBonePose_Additive() ë‚´ë¶€:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. í˜„ì¬ í”„ë ˆì„ í¬ì¦ˆ ì¶”ì¶œ:                                       â”‚
â”‚     CurrentPose = GetBonePose(CurrentTime);                    â”‚
â”‚                                                                â”‚
â”‚  2. ê¸°ì¤€ í¬ì¦ˆ ì¶”ì¶œ:                                             â”‚
â”‚     switch (RefPoseType)                                       â”‚
â”‚     {                                                          â”‚
â”‚     case ABPT_RefPose:                                         â”‚
â”‚         BasePose = Skeleton->GetRefPose();                     â”‚
â”‚         break;                                                 â”‚
â”‚     case ABPT_AnimFrame:                                       â”‚
â”‚         BasePose = GetBonePose(RefFrameTime);                  â”‚
â”‚         break;                                                 â”‚
â”‚     case ABPT_AnimScaled:                                      â”‚
â”‚         BasePose = RefPoseSeq->GetBonePose(ScaledTime);        â”‚
â”‚         break;                                                 â”‚
â”‚     }                                                          â”‚
â”‚                                                                â”‚
â”‚  3. Delta ê³„ì‚°:                                                 â”‚
â”‚     For each bone:                                             â”‚
â”‚         FTransform Delta = CurrentPose[i] - BasePose[i];       â”‚
â”‚         OutPose[i] = Delta;                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3. Root Motion

**Root Motion**ì€ ì• ë‹ˆë©”ì´ì…˜ì—ì„œ ë£¨íŠ¸ ë³¸(Root Bone)ì˜ ì´ë™ì„ ì¶”ì¶œí•˜ì—¬ ìºë¦­í„°ì˜ ì‹¤ì œ ì›”ë“œ ì´ë™ì— ì ìš©í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

```
ì „í†µì  ë°©ì‹ (Root Motion ì—†ìŒ):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì• ë‹ˆë©”ì´ì…˜: ì œìë¦¬ì—ì„œ ê±·ëŠ” ì• ë‹ˆë©”ì´ì…˜                          â”‚
â”‚  ìºë¦­í„° ì´ë™: ì½”ë“œë¡œ ìˆ˜ë™ ì´ë™ (MoveForward)                    â”‚
â”‚  ë¬¸ì œ: ë°œì´ ë¯¸ë„ëŸ¬ì§ (Foot Sliding)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Root Motion ë°©ì‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì• ë‹ˆë©”ì´ì…˜: ì‹¤ì œë¡œ ì „ì§„í•˜ëŠ” ê±·ê¸° ì• ë‹ˆë©”ì´ì…˜                      â”‚
â”‚  ë£¨íŠ¸ ëª¨ì…˜ ì¶”ì¶œ: ë£¨íŠ¸ ë³¸ ì´ë™ ì¶”ì¶œ (1ì´ˆë‹¹ 100cm ì´ë™)            â”‚
â”‚  ìºë¦­í„° ì´ë™: ì¶”ì¶œëœ ë£¨íŠ¸ ëª¨ì…˜ ì ìš©                              â”‚
â”‚  ê²°ê³¼: ë°œì´ ì •í™•íˆ ì§€ë©´ì— ë‹¿ìŒ (No Sliding)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì„¤ì •:**

```cpp
// âœ… Root Motion í™œì„±í™”
void EnableRootMotion(UAnimSequence* AnimSeq)
{
    // ë£¨íŠ¸ ëª¨ì…˜ í™œì„±í™”
    AnimSeq->bEnableRootMotion = true;

    // ë£¨íŠ¸ ë³¸ ì ê¸ˆ ë°©ì‹
    AnimSeq->RootMotionRootLock = ERootMotionRootLock::RefPose;
    // - RefPose: ìŠ¤ì¼ˆë ˆí†¤ ê¸°ì¤€ í¬ì¦ˆë¡œ ì ê¸ˆ
    // - AnimFirstFrame: ì• ë‹ˆë©”ì´ì…˜ ì²« í”„ë ˆì„ìœ¼ë¡œ ì ê¸ˆ
    // - Zero: ì›ì ìœ¼ë¡œ ì ê¸ˆ

    // ê°•ì œ ë£¨íŠ¸ ì ê¸ˆ (ë£¨íŠ¸ ëª¨ì…˜ ë¹„í™œì„±í™” ì‹œì—ë„ ì ê¸ˆ)
    AnimSeq->bForceRootLock = false;

    // ì •ê·œí™”ëœ ë£¨íŠ¸ ëª¨ì…˜ ìŠ¤ì¼€ì¼ ì‚¬ìš© (FVector(1,1,1))
    AnimSeq->bUseNormalizedRootMotionScale = false;
}

// âœ… Root Motion ì¶”ì¶œ
void ExtractRootMotionExample(UAnimSequence* AnimSeq)
{
    // 0.0ì´ˆ ~ 1.0ì´ˆ êµ¬ê°„ì˜ ë£¨íŠ¸ ëª¨ì…˜ ì¶”ì¶œ
    FAnimExtractContext ExtractionContext(0.0);
    FTransform RootMotion = AnimSeq->ExtractRootMotionFromRange(0.0, 1.0, ExtractionContext);

    UE_LOG(LogAnimation, Log, TEXT("Root Motion Translation: %s"), *RootMotion.GetLocation().ToString());
    UE_LOG(LogAnimation, Log, TEXT("Root Motion Rotation: %s"), *RootMotion.Rotator().ToString());

    // ìºë¦­í„°ì— ì ìš© (ì¼ë°˜ì ìœ¼ë¡œ UCharacterMovementComponentì—ì„œ ìë™ ì²˜ë¦¬)
    // Character->AddMovementInput(RootMotion.GetLocation());
}
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:** `AnimSequence.h:319-332` - Root Motion ì„¤ì •

---

### 4. Sync Markers

**Sync Markers**ëŠ” ì• ë‹ˆë©”ì´ì…˜ ë™ê¸°í™”ë¥¼ ìœ„í•œ ë§ˆì»¤ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì„œë¡œ ë‹¤ë¥¸ ê¸¸ì´ì˜ ì• ë‹ˆë©”ì´ì…˜ì„ íŠ¹ì • ì´ë²¤íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤.

```
Sync Marker ì˜ˆì‹œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Walk Animation (1.0ì´ˆ):                                        â”‚
â”‚  0.0s      0.25s       0.5s       0.75s       1.0s             â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
â”‚  Start   LeftFoot    RightFoot  LeftFoot    End                â”‚
â”‚                                                                â”‚
â”‚  Run Animation (0.5ì´ˆ):                                         â”‚
â”‚  0.0s    0.125s     0.25s      0.375s     0.5s                 â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
â”‚  Start  LeftFoot   RightFoot  LeftFoot    End                  â”‚
â”‚                                                                â”‚
â”‚  Sync ê²°ê³¼: LeftFoot ë§ˆì»¤ ê¸°ì¤€ìœ¼ë¡œ ë™ê¸°í™”                        â”‚
â”‚  Walkì˜ 0.25s = Runì˜ 0.125s (LeftFoot ì‹œì )                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```cpp
// âœ… Sync Marker ì¶”ê°€
void AddSyncMarkers(UAnimSequence* AnimSeq)
{
    // Marker ì¶”ê°€ (ì—ë””í„° ì „ìš©)
    FAnimSyncMarker Marker1;
    Marker1.MarkerName = FName(TEXT("LeftFoot"));
    Marker1.Time = 0.25f;  // 0.25ì´ˆ ì‹œì 

    FAnimSyncMarker Marker2;
    Marker2.MarkerName = FName(TEXT("RightFoot"));
    Marker2.Time = 0.5f;   // 0.5ì´ˆ ì‹œì 

    AnimSeq->AuthoredSyncMarkers.Add(Marker1);
    AnimSeq->AuthoredSyncMarkers.Add(Marker2);

    // Marker ì •ë ¬
    AnimSeq->SortSyncMarkers();

    // Unique Marker ì´ë¦„ ê°±ì‹ 
    AnimSeq->RefreshSyncMarkerDataFromAuthored();
}

// âœ… Marker ê¸°ë°˜ ì‹œê°„ ê³„ì‚°
void CalculateTimeFromMarkers(UAnimSequence* AnimSeq)
{
    FMarkerPair PrevMarker;
    FMarkerPair NextMarker;
    float PositionBetweenMarkers = 0.5f;  // ë‘ ë§ˆì»¤ ì‚¬ì´ 50% ìœ„ì¹˜

    // ë§ˆì»¤ ê¸°ë°˜ í˜„ì¬ ì‹œê°„ ê³„ì‚°
    float CurrentTime = AnimSeq->GetCurrentTimeFromMarkers(
        PrevMarker,
        NextMarker,
        PositionBetweenMarkers
    );

    UE_LOG(LogAnimation, Log, TEXT("Current Time: %f"), CurrentTime);
}

// âœ… Marker ê¸°ë°˜ ë™ê¸°í™”
void SyncAnimationsByMarkers(UAnimSequence* LeaderAnim, UAnimSequence* FollowerAnim)
{
    // Leaderì˜ í˜„ì¬ ë§ˆì»¤ ìœ„ì¹˜
    FMarkerPair LeaderPrevMarker;
    FMarkerPair LeaderNextMarker;
    float LeaderTime = 0.3f;

    TArray<FName> ValidMarkerNames = { FName(TEXT("LeftFoot")), FName(TEXT("RightFoot")) };

    LeaderAnim->GetMarkerIndicesForTime(
        LeaderTime,
        true,  // bLooping
        ValidMarkerNames,
        LeaderPrevMarker,
        LeaderNextMarker
    );

    // Followerë¥¼ ê°™ì€ ë§ˆì»¤ ìœ„ì¹˜ë¡œ ë™ê¸°í™”
    float FollowerTime = 0.0f;
    FMarkerPair FollowerPrevMarker;
    FMarkerPair FollowerNextMarker;

    FMarkerSyncAnimPosition SyncPosition = LeaderAnim->GetMarkerSyncPositionFromMarkerIndicies(
        LeaderPrevMarker.MarkerIndex,
        LeaderNextMarker.MarkerIndex,
        LeaderTime,
        nullptr  // MirrorTable
    );

    FollowerAnim->GetMarkerIndicesForPosition(
        SyncPosition,
        true,  // bLooping
        FollowerPrevMarker,
        FollowerNextMarker,
        FollowerTime,  // ì¶œë ¥: Followerì˜ ë™ê¸°í™”ëœ ì‹œê°„
        nullptr
    );

    UE_LOG(LogAnimation, Log, TEXT("Leader Time: %f, Follower Time: %f"), LeaderTime, FollowerTime);
}
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `AnimSequence.h:746-750` - AuthoredSyncMarkers, UniqueMarkerNames
- `AnimSequence.h:666-676` - Marker ê¸°ë°˜ ì‹œê°„ ê³„ì‚° ë©”ì„œë“œ

---

### 5. Retargeting

**Retargeting**ì€ í•˜ë‚˜ì˜ ìŠ¤ì¼ˆë ˆí†¤ìš© ì• ë‹ˆë©”ì´ì…˜ì„ ë‹¤ë¥¸ ìŠ¤ì¼ˆë ˆí†¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë³€í™˜í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

```
Retargeting ê°œë…:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Source Skeleton                 Target Skeleton               â”‚
â”‚  (í‚¤ í° ìºë¦­í„°, 2m)               (í‚¤ ì‘ì€ ìºë¦­í„°, 1.5m)         â”‚
â”‚                                                                â”‚
â”‚  Spine: 50cm                     Spine: 37.5cm (50 Ã— 0.75)    â”‚
â”‚  Arm: 60cm                       Arm: 45cm (60 Ã— 0.75)        â”‚
â”‚  Leg: 90cm                       Leg: 67.5cm (90 Ã— 0.75)      â”‚
â”‚                                                                â”‚
â”‚  ì• ë‹ˆë©”ì´ì…˜: Walk (Sourceìš©)                                    â”‚
â”‚  Retargeting â†’ Walk (Targetìš©) ìë™ ìƒì„±                        â”‚
â”‚  (ë¹„ìœ¨ì— ë§ê²Œ ìŠ¤ì¼€ì¼ ì¡°ì •)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì„¤ì •:**

```cpp
// âœ… Retarget Source ì„¤ì •
void SetupRetargeting(UAnimSequence* AnimSeq)
{
    // Retarget Source ì´ë¦„ ì„¤ì • (USkeletonì˜ Rigì— ì •ì˜ëœ ì´ë¦„)
    AnimSeq->RetargetSource = FName(TEXT("MyRetargetSource"));

    // ë˜ëŠ” íŠ¹ì • ìŠ¤ì¼ˆë ˆíƒˆ ë©”ì‹œë¥¼ ê¸°ì¤€ìœ¼ë¡œ
#if WITH_EDITOR
    USkeletalMesh* SourceMesh = LoadObject<USkeletalMesh>(
        nullptr,
        TEXT("/Game/Characters/SourceCharacter_Skeleton.SourceCharacter_Skeleton")
    );

    AnimSeq->SetRetargetSourceAsset(SourceMesh);

    // Retarget ê¸°ì¤€ í¬ì¦ˆ ì—…ë°ì´íŠ¸
    AnimSeq->UpdateRetargetSourceAssetData();
#endif
}

// âœ… Retargeting ì ìš© í™•ì¸
void CheckRetargeting(UAnimSequence* AnimSeq)
{
    // Retarget Transform ë°°ì—´ ê°€ì ¸ì˜¤ê¸°
    const TArray<FTransform>& RetargetTransforms = AnimSeq->GetRetargetTransforms();
    FName SourceName = AnimSeq->GetRetargetTransformsSourceName();

    UE_LOG(LogAnimation, Log, TEXT("Retarget Source: %s"), *SourceName.ToString());
    UE_LOG(LogAnimation, Log, TEXT("Retarget Transforms Count: %d"), RetargetTransforms.Num());

    // í¬ì¦ˆ ì¶”ì¶œ ì‹œ ìë™ìœ¼ë¡œ Retargeting ì ìš©ë¨
    FAnimExtractContext ExtractionContext(0.5);
    FBoneContainer BoneContainer;
    // ...

    FCompactPose Pose;
    Pose.SetBoneContainer(&BoneContainer);

    FBlendedCurve Curve;
    FStackCustomAttributes Attributes;

    FAnimationPoseData OutPoseData(Pose, Curve, Attributes);

    // GetBonePose ë‚´ë¶€ì—ì„œ RetargetBoneTransform() ìë™ í˜¸ì¶œ
    AnimSeq->GetBonePose(OutPoseData, ExtractionContext, false);
}

// âœ… ìˆ˜ë™ Retargeting (ê³ ê¸‰)
void ManualRetarget(UAnimSequence* AnimSeq, FTransform& BoneTransform, int32 SkeletonBoneIndex)
{
    FBoneContainer BoneContainer;
    // ...

    FCompactPoseBoneIndex BoneIndex = BoneContainer.MakeCompactPoseIndex(
        FMeshPoseBoneIndex(SkeletonBoneIndex)
    );

    bool bIsBakedAdditive = AnimSeq->IsValidAdditive();

    // Retargeting ì ìš©
    AnimSeq->RetargetBoneTransform(
        BoneTransform,
        SkeletonBoneIndex,
        BoneIndex,
        BoneContainer,
        bIsBakedAdditive
    );

    // BoneTransformì€ ì´ì œ íƒ€ê²Ÿ ìŠ¤ì¼ˆë ˆí†¤ì— ë§ê²Œ ì¡°ì •ë¨
}
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `AnimSequence.h:300-312` - Retarget ì„¤ì •
- `AnimSequence.h:467-481` - Retarget API (SetRetargetSourceAsset, UpdateRetargetSourceAssetData)
- `AnimSequence.h:503` - RetargetBoneTransform()

---

## ğŸ’¡ ì‹¤ì „ ì˜ˆì‹œ (Practical Examples)

### âœ… ì¢‹ì€ ì˜ˆ: ì••ì¶•ëœ í¬ì¦ˆ ì¶”ì¶œ

```cpp
// âœ… ìŠ¤ë ˆë“œ ì•ˆì „í•œ ì••ì¶• ë°ì´í„° ì ‘ê·¼
void SafeAccessCompressedData(const UAnimSequence* AnimSeq)
{
    // FScopedCompressedAnimSequenceë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•˜ê²Œ ì ‘ê·¼
    UAnimSequence::FScopedCompressedAnimSequence ScopedData = AnimSeq->GetCompressedData();

    const FCompressedAnimSequence& CompressedData = ScopedData.Get();

    // ì••ì¶• íŠ¸ë™ ì •ë³´
    int32 NumTracks = CompressedData.CompressedTrackToSkeletonMapTable.Num();
    UE_LOG(LogAnimation, Log, TEXT("Compressed Tracks: %d"), NumTracks);

    // ì»¤ë¸Œ ì •ë³´
    int32 NumCurves = CompressedData.IndexedCurveNames.Num();
    UE_LOG(LogAnimation, Log, TEXT("Compressed Curves: %d"), NumCurves);

    // ë©”ëª¨ë¦¬ í¬ê¸°
    SIZE_T MemorySize = CompressedData.GetMemorySize();
    UE_LOG(LogAnimation, Log, TEXT("Compressed Data Memory: %llu bytes"), MemorySize);

    // ScopedDataê°€ ìŠ¤ì½”í”„ë¥¼ ë²—ì–´ë‚˜ë©´ ìë™ìœ¼ë¡œ ë½ í•´ì œ
}

// âœ… í¬ì¦ˆ ì¶”ì¶œ (ëŸ°íƒ€ì„)
void ExtractPoseAtTime(const UAnimSequence* AnimSeq, float Time)
{
    FAnimExtractContext ExtractionContext(Time);
    ExtractionContext.bLooping = true;  // ë£¨í”„ ì• ë‹ˆë©”ì´ì…˜

    // BoneContainer ì´ˆê¸°í™” (í•„ìˆ˜)
    FBoneContainer BoneContainer;
    USkeleton* Skeleton = AnimSeq->GetSkeleton();
    check(Skeleton);

    TArray<FBoneIndexType> RequiredBones;
    // í•„ìš”í•œ ë³¸ ì¸ë±ìŠ¤ ì¶”ê°€...
    RequiredBones.Add(0);  // Root
    // ...

    FReferenceSkeleton& RefSkeleton = Skeleton->GetReferenceSkeleton();
    BoneContainer.InitializeTo(RequiredBones, FCurveEvaluationOption(true), *Skeleton);

    // Pose ë° Curve ì¤€ë¹„
    FCompactPose Pose;
    Pose.SetBoneContainer(&BoneContainer);

    FBlendedCurve Curve;
    Curve.InitFrom(BoneContainer);

    FStackCustomAttributes Attributes;
    FAnimationPoseData OutPoseData(Pose, Curve, Attributes);

    // í¬ì¦ˆ ì¶”ì¶œ
    AnimSeq->GetBonePose(OutPoseData, ExtractionContext, false);

    // ê²°ê³¼ ì‚¬ìš©
    for (const FCompactPoseBoneIndex& BoneIndex : Pose.ForEachBoneIndex())
    {
        const FTransform& BoneTransform = Pose[BoneIndex];
        UE_LOG(LogAnimation, Log, TEXT("Bone %d: %s"), BoneIndex.GetInt(), *BoneTransform.ToString());
    }
}
```

---

### âŒ ë‚˜ìœ ì˜ˆ: ì••ì¶• ë°ì´í„° ì§ì ‘ ì ‘ê·¼

```cpp
// âŒ ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì§€ ì•Šì€ ì ‘ê·¼
void UnsafeAccessCompressedData(const UAnimSequence* AnimSeq)
{
PRAGMA_DISABLE_DEPRECATION_WARNINGS
    // âŒ CompressedDataëŠ” deprecated (UE 5.6+)
    const FCompressedAnimSequence& CompressedData = AnimSeq->CompressedData;
PRAGMA_ENABLE_DEPRECATION_WARNINGS

    // âŒ ì—ë””í„°ì—ì„œ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ í¬ë˜ì‹œ ê°€ëŠ¥
    // âŒ SharedCompressedDataMutex ë½ ì—†ì´ ì ‘ê·¼
}
```

**ì˜¬ë°”ë¥¸ ë°©ë²•:**

```cpp
// âœ… FScopedCompressedAnimSequence ì‚¬ìš©
UAnimSequence::FScopedCompressedAnimSequence ScopedData = AnimSeq->GetCompressedData();
const FCompressedAnimSequence& CompressedData = ScopedData.Get();
```

---

### âœ… ì¢‹ì€ ì˜ˆ: Additive Animation í™œìš©

```cpp
// âœ… Idle + Breathing Additive
void ApplyBreathingAdditive(UAnimSequence* IdleAnim, UAnimSequence* BreathingAdditive)
{
    // Breathingì„ Additiveë¡œ ì„¤ì •
    BreathingAdditive->AdditiveAnimType = EAdditiveAnimationType::AAT_LocalSpaceBase;
    BreathingAdditive->RefPoseType = EAdditiveBasePoseType::ABPT_RefPose;

    // AnimGraphì—ì„œ ì‚¬ìš©:
    // [Idle] â†’ [Apply Additive] â† [Breathing (Additive)]
    //           â†“
    //        [Output Pose]

    // C++ì—ì„œ ìˆ˜ë™ ì ìš©:
    FAnimExtractContext ExtractionContext(0.5);
    FBoneContainer BoneContainer;
    // ...

    FCompactPose IdlePose, BreathingPose;
    IdlePose.SetBoneContainer(&BoneContainer);
    BreathingPose.SetBoneContainer(&BoneContainer);

    FBlendedCurve Curve;
    FStackCustomAttributes Attributes;

    FAnimationPoseData IdlePoseData(IdlePose, Curve, Attributes);
    FAnimationPoseData BreathingPoseData(BreathingPose, Curve, Attributes);

    // Idle í¬ì¦ˆ ì¶”ì¶œ
    IdleAnim->GetBonePose(IdlePoseData, ExtractionContext, false);

    // Breathing Additive í¬ì¦ˆ ì¶”ì¶œ
    BreathingAdditive->GetBonePose_Additive(BreathingPoseData, ExtractionContext);

    // Additive ì ìš© (Local Space)
    for (const FCompactPoseBoneIndex& BoneIndex : IdlePose.ForEachBoneIndex())
    {
        FTransform& BaseBone = IdlePose[BoneIndex];
        const FTransform& AdditiveBone = BreathingPose[BoneIndex];

        // Local Space Additive ê³µì‹:
        // Result = Base + Additive
        BaseBone.SetTranslation(BaseBone.GetTranslation() + AdditiveBone.GetTranslation());
        BaseBone.SetRotation(BaseBone.GetRotation() * AdditiveBone.GetRotation());
        BaseBone.SetScale3D(BaseBone.GetScale3D() * AdditiveBone.GetScale3D());
    }

    // IdlePoseëŠ” ì´ì œ Breathing íš¨ê³¼ê°€ ì ìš©ëœ í¬ì¦ˆ
}
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™” (Performance Optimization)

### âœ… í•´ì•¼ í•  ê²ƒ

**1. ì ì ˆí•œ ì••ì¶• ì„¤ì • ì‚¬ìš©:**

```cpp
// âœ… í”Œë«í¼ë³„ ì••ì¶• ì„¤ì •
void SetupPlatformCompression(UAnimSequence* AnimSeq)
{
    // ëª¨ë°”ì¼: ë†’ì€ ì••ì¶•ë¥  ìš°ì„ 
    if (TargetPlatform->IsMobile())
    {
        AnimSeq->CompressionErrorThresholdScale = 2.0f;  // ì˜¤ì°¨ í—ˆìš© ì¦ê°€
        AnimSeq->bAllowFrameStripping = true;  // í”„ë ˆì„ ìŠ¤íŠ¸ë¦¬í•‘ í—ˆìš©
    }
    // PC/ì½˜ì†”: í’ˆì§ˆ ìš°ì„ 
    else
    {
        AnimSeq->CompressionErrorThresholdScale = 1.0f;  // ê¸°ë³¸ í’ˆì§ˆ
        AnimSeq->bAllowFrameStripping = false;
    }
}
```

**2. ì••ì¶• ë°ì´í„° ê²€ì¦ ë° ì¬ì••ì¶•:**

```cpp
// âœ… ì••ì¶• ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ë° ì¬ì••ì¶•
void ValidateAndRecompress(UAnimSequence* AnimSeq)
{
#if WITH_EDITOR
    // ì••ì¶• ë°ì´í„°ê°€ êµ¬ì‹ì¸ì§€ í™•ì¸
    if (AnimSeq->IsCompressedDataOutOfDate())
    {
        UE_LOG(LogAnimation, Warning, TEXT("Compressed data is out of date, recompressing..."));

        // í˜„ì¬ í”Œë«í¼ìš© ì¬ì••ì¶•
        AnimSeq->CacheDerivedDataForCurrentPlatform();
    }

    // ì••ì¶• ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
    bool bValid = AnimSeq->IsCompressedDataValid();
    if (!bValid)
    {
        UE_LOG(LogAnimation, Error, TEXT("Compressed data is invalid!"));
    }
#endif
}
```

**3. í¬ì¦ˆ ì¶”ì¶œ ìµœì í™” (ìºì‹±):**

```cpp
// âœ… í¬ì¦ˆ ìºì‹± (ë™ì¼ ì‹œê°„ ë°˜ë³µ ì¶”ì¶œ ì‹œ)
class FAnimationPoseCache
{
public:
    void CachePose(const UAnimSequence* AnimSeq, float Time)
    {
        FCachedPose& Cached = CachedPoses.FindOrAdd(Time);

        if (!Cached.bIsValid)
        {
            FAnimExtractContext ExtractionContext(Time);
            FBoneContainer BoneContainer;
            // ...

            FCompactPose Pose;
            Pose.SetBoneContainer(&BoneContainer);

            FBlendedCurve Curve;
            FStackCustomAttributes Attributes;

            FAnimationPoseData PoseData(Pose, Curve, Attributes);

            AnimSeq->GetBonePose(PoseData, ExtractionContext, false);

            // ìºì‹œ ì €ì¥
            Cached.Pose = Pose;
            Cached.bIsValid = true;
        }
    }

private:
    struct FCachedPose
    {
        FCompactPose Pose;
        bool bIsValid = false;
    };

    TMap<float, FCachedPose> CachedPoses;
};
```

---

### âŒ í”¼í•´ì•¼ í•  ê²ƒ

**1. ë§¤ í”„ë ˆì„ ì›ë³¸ ë°ì´í„° ì‚¬ìš©:**

```cpp
// âŒ ëŸ°íƒ€ì„ì— bForceUseRawData = true ì‚¬ìš©
void BadPoseExtraction(UAnimSequence* AnimSeq, float Time)
{
    FAnimExtractContext ExtractionContext(Time);
    // ...

    // âŒ ì›ë³¸ ë°ì´í„° ê°•ì œ ì‚¬ìš© (ì••ì¶• ë°ì´í„° ë¬´ì‹œ)
    // ì—ë””í„°ì—ì„œë§Œ ê°€ëŠ¥í•˜ë©°, ë§¤ìš° ëŠë¦¼
    AnimSeq->GetBonePose(PoseData, ExtractionContext, true);  // âŒ bForceUseRawData = true
}
```

**í•´ê²°ì±…:**

```cpp
// âœ… ì••ì¶• ë°ì´í„° ì‚¬ìš© (ê¸°ë³¸)
AnimSeq->GetBonePose(PoseData, ExtractionContext, false);  // âœ… bForceUseRawData = false
```

---

**2. ë¶ˆí•„ìš”í•œ ì••ì¶• ì¬ìˆ˜í–‰:**

```cpp
// âŒ ë§¤ë²ˆ ì••ì¶• ì¬ìˆ˜í–‰
void BadCompression(UAnimSequence* AnimSeq)
{
#if WITH_EDITOR
    // âŒ í•„ìš” ì—†ì–´ë„ ë§¤ë²ˆ ì¬ì••ì¶•
    AnimSeq->CacheDerivedDataForCurrentPlatform();  // ë§¤ìš° ëŠë¦¼ (~ìˆ˜ ì´ˆ)
#endif
}
```

**í•´ê²°ì±…:**

```cpp
// âœ… í•„ìš”í•  ë•Œë§Œ ì¬ì••ì¶•
#if WITH_EDITOR
if (AnimSeq->IsCompressedDataOutOfDate())
{
    AnimSeq->CacheDerivedDataForCurrentPlatform();
}
#endif
```

---

**3. ì••ì¶• ì„¤ì • ê³¼ë„í•˜ê²Œ ë‚®ì¶¤:**

```cpp
// âŒ ì••ì¶• ì™„ì „ ë¹„í™œì„±í™”
void DisableCompression(UAnimSequence* AnimSeq)
{
#if WITH_EDITOR
    // âŒ ì••ì¶• ì•ˆ í•¨
    AnimSeq->bDoNotOverrideCompression = true;
    // ë©”ëª¨ë¦¬ í­ë°œ!
#endif
}
```

---

## ğŸ”§ ë””ë²„ê¹… ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (Debugging & Troubleshooting)

### Stat ëª…ë ¹ì–´

```
stat Anim             // ì• ë‹ˆë©”ì´ì…˜ ì „ë°˜ í†µê³„
stat AnimSequence     // AnimSequence ìƒì„¸ í†µê³„
```

**ì£¼ìš” ì§€í‘œ:**
- **Compressed Data Size**: ì••ì¶•ëœ ë°ì´í„° í¬ê¸°
- **Decompression Time**: í¬ì¦ˆ ì¶”ì¶œ ì‹œê°„
- **Cache Hits**: ì••ì¶• ë°ì´í„° ìºì‹œ íˆíŠ¸ìœ¨

---

### ë””ë²„ê¹… íŒ

**âœ… ì••ì¶• ë°ì´í„° í™•ì¸:**

```cpp
// ì••ì¶• ìƒíƒœ í™•ì¸
void CheckCompressionStatus(const UAnimSequence* AnimSeq)
{
    UE_LOG(LogAnimation, Log, TEXT("=== Animation Compression Status ==="));
    UE_LOG(LogAnimation, Log, TEXT("IsCompressedDataValid: %d"), AnimSeq->IsCompressedDataValid());
    UE_LOG(LogAnimation, Log, TEXT("IsBoneCompressedDataValid: %d"), AnimSeq->IsBoneCompressedDataValid());
    UE_LOG(LogAnimation, Log, TEXT("IsCurveCompressedDataValid: %d"), AnimSeq->IsCurveCompressedDataValid());

#if WITH_EDITOR
    UE_LOG(LogAnimation, Log, TEXT("IsCompressedDataOutOfDate: %d"), AnimSeq->IsCompressedDataOutOfDate());

    int64 RawSize = AnimSeq->GetApproxRawSize();
    int32 CompressedSize = AnimSeq->GetApproxCompressedSize();
    float Ratio = (float)RawSize / (float)CompressedSize;

    UE_LOG(LogAnimation, Log, TEXT("Raw Size: %lld bytes"), RawSize);
    UE_LOG(LogAnimation, Log, TEXT("Compressed Size: %d bytes"), CompressedSize);
    UE_LOG(LogAnimation, Log, TEXT("Compression Ratio: %.2fx"), Ratio);
#endif
}
```

---

**âœ… Additive ìœ íš¨ì„± í™•ì¸:**

```cpp
// Additive ì• ë‹ˆë©”ì´ì…˜ í™•ì¸
void ValidateAdditiveAnimation(const UAnimSequence* AnimSeq)
{
    if (!AnimSeq->IsValidAdditive())
    {
        UE_LOG(LogAnimation, Warning, TEXT("Not a valid additive animation"));

        // ì›ì¸ í™•ì¸
        UE_LOG(LogAnimation, Log, TEXT("AdditiveAnimType: %d"), (int32)AnimSeq->AdditiveAnimType);
        UE_LOG(LogAnimation, Log, TEXT("RefPoseType: %d"), (int32)AnimSeq->RefPoseType);

        if (AnimSeq->RefPoseType == EAdditiveBasePoseType::ABPT_AnimFrame)
        {
            UE_LOG(LogAnimation, Log, TEXT("RefFrameIndex: %d"), AnimSeq->RefFrameIndex);
        }
        else if (AnimSeq->RefPoseType == EAdditiveBasePoseType::ABPT_AnimScaled)
        {
            UE_LOG(LogAnimation, Log, TEXT("RefPoseSeq: %s"),
                AnimSeq->RefPoseSeq ? *AnimSeq->RefPoseSeq->GetName() : TEXT("None"));
        }
    }
    else
    {
        UE_LOG(LogAnimation, Log, TEXT("Valid additive animation"));
    }
}
```

---

**âœ… Root Motion í™•ì¸:**

```cpp
// Root Motion í™•ì¸
void ValidateRootMotion(const UAnimSequence* AnimSeq)
{
    if (!AnimSeq->HasRootMotion())
    {
        UE_LOG(LogAnimation, Warning, TEXT("Root Motion is disabled"));
        return;
    }

    UE_LOG(LogAnimation, Log, TEXT("Root Motion Enabled"));
    UE_LOG(LogAnimation, Log, TEXT("RootMotionRootLock: %d"), (int32)AnimSeq->RootMotionRootLock);
    UE_LOG(LogAnimation, Log, TEXT("bForceRootLock: %d"), AnimSeq->bForceRootLock);
    UE_LOG(LogAnimation, Log, TEXT("bUseNormalizedRootMotionScale: %d"), AnimSeq->bUseNormalizedRootMotionScale);

    // ì „ì²´ ì• ë‹ˆë©”ì´ì…˜ì˜ ë£¨íŠ¸ ëª¨ì…˜ ì¶”ì¶œ
    FAnimExtractContext ExtractionContext(0.0);
    float Duration = AnimSeq->GetPlayLength();
    FTransform TotalRootMotion = AnimSeq->ExtractRootMotionFromRange(0.0, Duration, ExtractionContext);

    UE_LOG(LogAnimation, Log, TEXT("Total Root Motion Translation: %s"), *TotalRootMotion.GetLocation().ToString());
    UE_LOG(LogAnimation, Log, TEXT("Total Root Motion Rotation: %s"), *TotalRootMotion.Rotator().ToString());
}
```

---

**âœ… Sync Marker í™•ì¸:**

```cpp
// Sync Marker í™•ì¸
void ValidateSyncMarkers(const UAnimSequence* AnimSeq)
{
    UE_LOG(LogAnimation, Log, TEXT("=== Sync Markers ==="));
    UE_LOG(LogAnimation, Log, TEXT("Authored Sync Markers: %d"), AnimSeq->AuthoredSyncMarkers.Num());
    UE_LOG(LogAnimation, Log, TEXT("Unique Marker Names: %d"), AnimSeq->UniqueMarkerNames.Num());

    for (const FAnimSyncMarker& Marker : AnimSeq->AuthoredSyncMarkers)
    {
        UE_LOG(LogAnimation, Log, TEXT("  Marker: %s at %.3fs"), *Marker.MarkerName.ToString(), Marker.Time);
    }

    for (const FName& MarkerName : AnimSeq->UniqueMarkerNames)
    {
        UE_LOG(LogAnimation, Log, TEXT("  Unique: %s"), *MarkerName.ToString());
    }
}
```

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ (Related Documents)

- [Overview.md](../Overview.md) - UAF ì „ì²´ ê°œìš”
- [AnimInstance.md](./AnimInstance.md) - ëŸ°íƒ€ì„ ì• ë‹ˆë©”ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤
- [StateMachine.md](../AnimGraph/StateMachine.md) - ìƒíƒœ ë¨¸ì‹  ì‹œìŠ¤í…œ
- [BlendSpace.md](../AnimGraph/BlendSpace.md) - ë¸”ë Œë“œ ìŠ¤í˜ì´ìŠ¤
- [AnimMontage.md](../AnimGraph/AnimMontage.md) - ëª½íƒ€ì£¼ ì‹œìŠ¤í…œ

---

## ğŸ“š ì°¸ê³  ìë£Œ (References)

### ì†ŒìŠ¤ íŒŒì¼
- `Engine/Source/Runtime/Engine/Classes/Animation/AnimSequence.h` (1,002 ë¼ì¸)
- `Engine/Source/Runtime/Engine/Public/Animation/AnimTypes.h` - FRawAnimSequenceTrack (852-925)
- `Engine/Source/Runtime/Engine/Public/Animation/AnimCompressionTypes.h` - FCompressedAnimSequence (774-854)
- `Engine/Source/Runtime/Engine/Private/Animation/AnimSequence.cpp`

### ê³µì‹ ë¬¸ì„œ
- [Unreal Engine - Animation Compression](https://docs.unrealengine.com/5.7/en-US/animation-compression-in-unreal-engine/)
- [Animation Sequence](https://docs.unrealengine.com/5.7/en-US/API/Runtime/Engine/Animation/UAnimSequence/)
- [Additive Animations](https://docs.unrealengine.com/5.7/en-US/additive-animations-in-unreal-engine/)
- [Root Motion](https://docs.unrealengine.com/5.7/en-US/root-motion-in-unreal-engine/)

### ì£¼ìš” API
```cpp
// í¬ì¦ˆ ì¶”ì¶œ
void GetAnimationPoseData(FAnimationPoseData& OutPoseData, const FAnimExtractContext& ExtractionContext) const override;
void GetBonePose(FAnimationPoseData& OutPoseData, const FAnimExtractContext& ExtractionContext, bool bForceUseRawData = false) const;

// Root Motion
FTransform ExtractRootMotion(const FAnimExtractContext& ExtractionContext) const override;
FTransform ExtractRootMotionFromRange(double StartTime, double EndTime, const FAnimExtractContext& ExtractionContext) const override;

// Additive
void GetBonePose_Additive(FAnimationPoseData& OutPoseData, const FAnimExtractContext& ExtractionContext) const;
void GetAdditiveBasePose(FAnimationPoseData& OutPoseData, const FAnimExtractContext& ExtractionContext) const;

// ì»¤ë¸Œ í‰ê°€
void EvaluateCurveData(FBlendedCurve& OutCurve, const FAnimExtractContext& AnimExtractContext, bool bForceUseRawData = false) const override;
float EvaluateCurveData(FName CurveName, const FAnimExtractContext& AnimExtractContext, bool bForceUseRawData = false) const override;

// ì••ì¶• ë°ì´í„° ì ‘ê·¼
FScopedCompressedAnimSequence GetCompressedData() const;
FScopedCompressedAnimSequence GetCompressedData(const FAnimExtractContext& AnimExtractContext) const;
bool IsCompressedDataValid() const;
int32 GetApproxCompressedSize() const;

// Sync Markers
void SortSyncMarkers();
float GetCurrentTimeFromMarkers(FMarkerPair& PrevMarker, FMarkerPair& NextMarker, float PositionBetweenMarkers) const;
void GetMarkerIndicesForTime(float CurrentTime, bool bLooping, const TArray<FName>& ValidMarkerNames, FMarkerPair& OutPrevMarker, FMarkerPair& OutNextMarker) const;

// Retargeting
void RetargetBoneTransform(FTransform& BoneTransform, const int32 SkeletonBoneIndex, const FCompactPoseBoneIndex& BoneIndex, const FBoneContainer& RequiredBones, const bool bIsBakedAdditive) const;
const TArray<FTransform>& GetRetargetTransforms() const;
FName GetRetargetTransformsSourceName() const;
```

---

> ğŸ”„ **ì‘ì„±ì¼**: 2025-11-07
> ğŸ“ **ë¬¸ì„œ ë²„ì „**: v1.0
> âœ… **ì†ŒìŠ¤ ê²€ì¦**: UE 5.7.0
> ğŸ“‚ **ë‹¤ìŒ ë¬¸ì„œ**: [StateMachine.md](../AnimGraph/StateMachine.md)
