---
title: "NiagaraScript - Niagara ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ ì‹œìŠ¤í…œ (Niagara Script Compilation System)"
date: "2025-11-21"
status: "stable"
project: "UnrealEngine"
lang: "ko"
category: "unreal-summary"
track: "Niagara"
tags: ["unreal", "Niagara", "Core"]
---
# NiagaraScript - Niagara ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ ì‹œìŠ¤í…œ (Niagara Script Compilation System)

## ğŸ§­ ê°œìš” (Overview)

**UNiagaraScript**ëŠ” **Niagara ê·¸ë˜í”„(ë…¸ë“œ ê¸°ë°˜ ë¹„ì£¼ì–¼ ìŠ¤í¬ë¦½íŒ…)ë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•œ ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” ì»´íŒŒì¼ ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤. Blueprintì™€ ìœ ì‚¬í•œ ê·¸ë˜í”„ ì—ë””í„°ì—ì„œ ì‘ì„±ëœ ë¡œì§ì„ CPUìš© VectorVM ë°”ì´íŠ¸ì½”ë“œ ë˜ëŠ” GPUìš© HLSL ì½”ë“œë¡œ ì»´íŒŒì¼í•˜ì—¬ ê³ ì„±ëŠ¥ íŒŒí‹°í´ ì‹œë®¬ë ˆì´ì…˜ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

**í•µì‹¬ ì—­í• :**
- **ê·¸ë˜í”„ â†’ ì½”ë“œ ë³€í™˜**: Niagara ì—ë””í„° ê·¸ë˜í”„ë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•œ ë°”ì´íŠ¸ì½”ë“œ/HLSLë¡œ ì»´íŒŒì¼
- **CPU ì‹¤í–‰**: VectorVM ë°”ì´íŠ¸ì½”ë“œ ìƒì„± (SIMD ìµœì í™”)
- **GPU ì‹¤í–‰**: HLSL Compute Shader ì½”ë“œ ìƒì„±
- **DDC í†µí•©**: Derived Data Cacheë¡œ ì»´íŒŒì¼ ê²°ê³¼ ìºì‹± (ì¬ì»´íŒŒì¼ ë°©ì§€)
- **ë²„ì „ ê´€ë¦¬**: í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€í•˜ë©° ìŠ¤í¬ë¦½íŠ¸ ì—…ë°ì´íŠ¸
- **íƒ€ì… ì•ˆì „ì„±**: ì»´íŒŒì¼ ì‹œ íƒ€ì… ì²´í¬ ë° ì—ëŸ¬ ê²€ì¶œ

**ì»´íŒŒì¼ íë¦„:**

```
Niagara Graph (ì—ë””í„°)
      â†“
  Compiler
      â†“
  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
  â†“        â†“
CPU     GPU
VectorVM  HLSL
ByteCode  Code
  â†“        â†“
VectorVM  Compute
::Exec()  Shader
```

**ğŸ“‚ ìœ„ì¹˜:**
- `Engine/Plugins/FX/Niagara/Source/Niagara/Classes/NiagaraScript.h:781` (UNiagaraScript í´ë˜ìŠ¤)
- `Engine/Plugins/FX/Niagara/Source/Niagara/Classes/NiagaraScript.h:396` (FNiagaraVMExecutableData)

---

## ğŸ¯ ì„¤ê³„ ì² í•™: ì™œ ì»´íŒŒì¼ ì‹œìŠ¤í…œì¸ê°€?

### ë¬¸ì œ: ì§ì ‘ ì½”ë“œ ì‘ì„±ì˜ í•œê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì§ì ‘ C++/HLSL ì‘ì„± ì‹œ ë¬¸ì œì                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 1: ì•„í‹°ìŠ¤íŠ¸ ì ‘ê·¼ì„± ì œì•½                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  - íŒŒí‹°í´ ì´í™íŠ¸ ì œì‘ì— C++/HLSL í”„ë¡œê·¸ë˜ë° ëŠ¥ë ¥ í•„ìš”    â”‚          â”‚
â”‚  â”‚  - ì•„í‹°ìŠ¤íŠ¸ê°€ í”„ë¡œê·¸ë˜ë¨¸ ì˜ì¡´í•´ì•¼ í•¨                     â”‚          â”‚
â”‚  â”‚  - ë¹ ë¥¸ ì´í„°ë ˆì´ì…˜ ë¶ˆê°€ëŠ¥                                â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 2: CPU/GPU ì´ì¤‘ êµ¬í˜„                                            â”‚
â”‚  - ë™ì¼ ë¡œì§ì„ C++ (CPU)ì™€ HLSL (GPU)ë¡œ ë‘ ë²ˆ ì‘ì„±                      â”‚
â”‚  - ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ 2ë°°                                                     â”‚
â”‚  - ë™ê¸°í™” ì˜¤ë¥˜ ë°œìƒ ìœ„í—˜                                                 â”‚
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 3: ì¬ì»´íŒŒì¼ ì‹œê°„                                                â”‚
â”‚  - C++ ìˆ˜ì • â†’ ì—”ì§„ ì¬ì»´íŒŒì¼ (5~10ë¶„)                                    â”‚
â”‚  - Shader ìˆ˜ì • â†’ Shader ì¬ì»´íŒŒì¼ (1~5ë¶„)                                â”‚
â”‚  - ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘ ë¶ˆê°€ëŠ¥                                              â”‚
â”‚                                                                         â”‚
â”‚  âŒ ë¬¸ì œ 4: ì¬ì‚¬ìš©ì„± ë¶€ì¡±                                                â”‚
â”‚  - ëª¨ë“ˆí™” ì–´ë ¤ì›€                                                         â”‚
â”‚  - ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¶• ë¶ˆê°€ëŠ¥                                                â”‚
â”‚  - í”„ë¡œì íŠ¸ ê°„ ê³µìœ  ì–´ë ¤ì›€                                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
                   UNiagaraScript ì†”ë£¨ì…˜:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 1: ë¹„ì£¼ì–¼ ìŠ¤í¬ë¦½íŒ…                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Niagara ì—ë””í„° (Blueprintì™€ ìœ ì‚¬)                       â”‚          â”‚
â”‚  â”‚  â”œâ”€ ë…¸ë“œ ê¸°ë°˜ ê·¸ë˜í”„ í¸ì§‘                                â”‚          â”‚
â”‚  â”‚  â”œâ”€ ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ëª¨ë“ˆ ì¡°í•©                         â”‚          â”‚
â”‚  â”‚  â”œâ”€ ì‹¤ì‹œê°„ í”„ë¦¬ë·°                                         â”‚          â”‚
â”‚  â”‚  â””â”€ í”„ë¡œê·¸ë˜ë° ì§€ì‹ ë¶ˆí•„ìš”                               â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  ì•„í‹°ìŠ¤íŠ¸ê°€ ì§ì ‘ ì œì‘ ê°€ëŠ¥!                               â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 2: ìë™ CPU/GPU ì½”ë“œ ìƒì„±                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  ë‹¨ì¼ Niagara ê·¸ë˜í”„                                      â”‚          â”‚
â”‚  â”‚  â””â”€ Compiler                                             â”‚          â”‚
â”‚  â”‚      â”œâ”€ CPU: VectorVM ë°”ì´íŠ¸ì½”ë“œ ìƒì„±                    â”‚          â”‚
â”‚  â”‚      â”‚   â””â”€ SIMD ìµœì í™” (SSE/AVX)                       â”‚          â”‚
â”‚  â”‚      â””â”€ GPU: HLSL ì½”ë“œ ìƒì„±                              â”‚          â”‚
â”‚  â”‚          â””â”€ Compute Shader ì»´íŒŒì¼                        â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  â†’ í•œ ë²ˆ ì‘ì„±, ì–‘ìª½ì—ì„œ ì‹¤í–‰                             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 3: DDC (Derived Data Cache) í†µí•©                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  ì»´íŒŒì¼ ê²°ê³¼ë¥¼ ìºì‹±:                                      â”‚          â”‚
â”‚  â”‚  - ê·¸ë˜í”„ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ì¬ì»´íŒŒì¼ ì•ˆ í•¨                  â”‚          â”‚
â”‚  â”‚  - DDC íˆíŠ¸ ì‹œ ì¦‰ì‹œ ë¡œë“œ (<1ì´ˆ)                          â”‚          â”‚
â”‚  â”‚  - íŒ€ì› ê°„ ìºì‹œ ê³µìœ  (ë„¤íŠ¸ì›Œí¬ DDC)                      â”‚          â”‚
â”‚  â”‚  - ì¿ í‚¹ ì‹œê°„ ëŒ€í­ ë‹¨ì¶•                                    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 4: ëª¨ë“ˆ ì‹œìŠ¤í…œ                                                  â”‚
â”‚  - Module Script: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë…ë¦½ ë¡œì§                                â”‚
â”‚  - Function Script: í—¬í¼ í•¨ìˆ˜                                           â”‚
â”‚  - DynamicInput Script: ê³„ì‚°ì‹                                          â”‚
â”‚  â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬í™” ê°€ëŠ¥                                                     â”‚
â”‚                                                                         â”‚
â”‚  âœ… í•´ê²° 5: íƒ€ì… ì•ˆì „ì„±                                                  â”‚
â”‚  - ì»´íŒŒì¼ ì‹œ íƒ€ì… ì²´í¬                                                   â”‚
â”‚  - ë…¸ë“œ ì—°ê²° ì˜¤ë¥˜ ì‚¬ì „ ê°ì§€                                              â”‚
â”‚  - ëŸ°íƒ€ì„ í¬ë˜ì‹œ ë°©ì§€                                                    â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„¤ê³„ ê²°ì •

| ê²°ì • ì‚¬í•­ | ì´ìœ  | íŠ¸ë ˆì´ë“œì˜¤í”„ |
|----------|------|-------------|
| **ë¹„ì£¼ì–¼ ìŠ¤í¬ë¦½íŒ…** | ì•„í‹°ìŠ¤íŠ¸ ì ‘ê·¼ì„±, ë¹ ë¥¸ ì´í„°ë ˆì´ì…˜ | ë³µì¡í•œ ë¡œì§ì€ C++ í”ŒëŸ¬ê·¸ì¸ í•„ìš” |
| **ì»´íŒŒì¼ ê¸°ë°˜** | ëŸ°íƒ€ì„ ì„±ëŠ¥, íƒ€ì… ì•ˆì „ì„± | ì»´íŒŒì¼ ì‹œê°„ í•„ìš” (DDCë¡œ ì™„í™”) |
| **CPU/GPU ìë™ ìƒì„±** | ë‹¨ì¼ ì†ŒìŠ¤, ìœ ì§€ë³´ìˆ˜ ìš©ì´ | í”Œë«í¼ë³„ ìµœì í™” ì œí•œì  |
| **DDC ìºì‹±** | ì¬ì»´íŒŒì¼ ì‹œê°„ ì ˆê° | ë””ìŠ¤í¬ ê³µê°„ ì‚¬ìš© (20GB+) |
| **ë²„ì „ ì‹œìŠ¤í…œ** | í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€ | ë³µì¡ë„ ì¦ê°€ |

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (System Architecture)

### UNiagaraScript í´ë˜ìŠ¤ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UNiagaraScript                                  â”‚
â”‚  (ì»´íŒŒì¼ ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸ ì—ì…‹)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìƒì†: UObject â†’ UNiagaraScriptBase â†’ UNiagaraScript                    â”‚
â”‚        FNiagaraVersionedObject, INiagaraParameterDefinitionsSubscriber  â”‚
â”‚                                                                         â”‚
â”‚  Public:                                                                â”‚
â”‚    - Usage : ENiagaraScriptUsage                                       â”‚
â”‚      // Module, Function, DynamicInput, ParticleSpawnScript ë“±          â”‚
â”‚                                                                         â”‚
â”‚  Private:                                                               â”‚
â”‚    - UsageId : FGuid                                                   â”‚
â”‚      // ë™ì¼ Usageì˜ ë‹¤ìˆ˜ ìŠ¤í¬ë¦½íŠ¸ êµ¬ë¶„ (ì˜ˆ: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬)             â”‚
â”‚                                                                         â”‚
â”‚    - ExposedVersion : FGuid                                            â”‚
â”‚      // ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë²„ì „ (ì‹ ê·œ ì‚¬ìš©ììš©)                        â”‚
â”‚    - bVersioningEnabled : bool                                         â”‚
â”‚      // ë²„ì „ ê´€ë¦¬ í™œì„±í™” ì—¬ë¶€                                            â”‚
â”‚    - VersionData : TArray<FVersionedNiagaraScriptData>                 â”‚
â”‚      // ë²„ì „ë³„ ìŠ¤í¬ë¦½íŠ¸ ì„¤ì • ë° ì†ŒìŠ¤                                     â”‚
â”‚                                                                         â”‚
â”‚    - RapidIterationParameters : FNiagaraParameterStore                 â”‚
â”‚      // ëŸ°íƒ€ì„ì— ë¹ ë¥´ê²Œ ì¡°ì • ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„° (ì—ë””í„° í”„ë¦¬ë·°ìš©)           â”‚
â”‚                                                                         â”‚
â”‚    - CachedScriptVM : FNiagaraVMExecutableData                         â”‚
â”‚      // ì»´íŒŒì¼ëœ VM ë°”ì´íŠ¸ì½”ë“œ ë° ë©”íƒ€ë°ì´í„°                            â”‚
â”‚    - CachedScriptVMId : FNiagaraVMExecutableDataId                     â”‚
â”‚      // ì»´íŒŒì¼ ID (DDC í‚¤)                                              â”‚
â”‚                                                                         â”‚
â”‚    - ScriptResource : TSharedPtr<FNiagaraShaderScript>                 â”‚
â”‚      // GPUìš© Shader Resource (Render Thread)                          â”‚
â”‚                                                                         â”‚
â”‚  ì£¼ìš” ë©”ì„œë“œ:                                                            â”‚
â”‚    + GetVMExecutableData() : FNiagaraVMExecutableData&                 â”‚
â”‚      // ì»´íŒŒì¼ëœ VM ë°ì´í„° ë°˜í™˜                                          â”‚
â”‚    + GetVMExecutableDataCompilationId() : const FNiagaraVMExecutableDataId&â”‚
â”‚      // ì»´íŒŒì¼ ID ë°˜í™˜                                                   â”‚
â”‚                                                                         â”‚
â”‚  ì»´íŒŒì¼ ê´€ë ¨ (Editor Only):                                              â”‚
â”‚    + RequestCompile(FGuid ScriptVersion, bool bForceCompile) : void   â”‚
â”‚      // ë™ê¸° ì»´íŒŒì¼ ìš”ì²­                                                 â”‚
â”‚    + RequestExternallyManagedAsyncCompile(...) : bool                  â”‚
â”‚      // ë¹„ë™ê¸° ì»´íŒŒì¼ ìš”ì²­                                               â”‚
â”‚    + SetVMCompilationResults(...) : void                               â”‚
â”‚      // ì»´íŒŒì¼ ê²°ê³¼ ì„¤ì •                                                 â”‚
â”‚    + ComputeVMCompilationId(...) : void                                â”‚
â”‚      // ì»´íŒŒì¼ ID ê³„ì‚° (DDC í‚¤ ìƒì„±)                                    â”‚
â”‚                                                                         â”‚
â”‚  GPU ê´€ë ¨ (Editor Only):                                                 â”‚
â”‚    + CacheResourceShadersForCooking(...) : void                        â”‚
â”‚      // ì¿ í‚¹ìš© Shader ìºì‹±                                               â”‚
â”‚    + CacheResourceShadersForRendering(...) : void                      â”‚
â”‚      // ëŸ°íƒ€ì„ìš© Shader ìºì‹±                                             â”‚
â”‚                                                                         â”‚
â”‚  Usage íƒ€ì… ì²´í¬:                                                        â”‚
â”‚    + IsParticleSpawnScript() : bool                                    â”‚
â”‚    + IsParticleUpdateScript() : bool                                   â”‚
â”‚    + IsModuleScript() : bool                                           â”‚
â”‚    + IsFunctionScript() : bool                                         â”‚
â”‚    + IsGPUScript() : bool                                              â”‚
â”‚    + IsSystemSpawnScript() : bool                                      â”‚
â”‚    + IsEmitterSpawnScript() : bool                                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `NiagaraScript.h:781-1474` - UNiagaraScript í´ë˜ìŠ¤ ì „ì²´

### FNiagaraVMExecutableData ìƒì„¸ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FNiagaraVMExecutableData                               â”‚
â”‚  (ì»´íŒŒì¼ëœ ì‹¤í–‰ ê°€ëŠ¥ ë°ì´í„°)                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì—­í• : VectorVM ë°”ì´íŠ¸ì½”ë“œ, GPU HLSL ì½”ë“œ, ì‹¤í–‰ ë©”íƒ€ë°ì´í„° ì €ì¥          â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 1. VectorVM ë°”ì´íŠ¸ì½”ë“œ (CPU ì‹¤í–‰ìš©)                         â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   FNiagaraVMExecutableByteCode ByteCode;                     â”‚      â”‚
â”‚  â”‚   // VectorVM ëª…ë ¹ì–´ ë°°ì—´ (ì••ì¶• ê°€ëŠ¥)                        â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   int32 NumTempRegisters;                                    â”‚      â”‚
â”‚  â”‚   // VectorVM ì‹¤í–‰ ì‹œ í•„ìš”í•œ ì„ì‹œ ë ˆì§€ìŠ¤í„° ê°œìˆ˜               â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   int32 NumUserPtrs;                                         â”‚      â”‚
â”‚  â”‚   // DataInterface í¬ì¸í„° ê°œìˆ˜                                â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 2. íŒŒë¼ë¯¸í„° ì •ë³´ (Parameters)                               â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚   UPROPERTY() (Editor Only)                                  â”‚      â”‚
â”‚  â”‚   FNiagaraParameters Parameters;                             â”‚      â”‚
â”‚  â”‚   // External constants (Uniform í…Œì´ë¸”)                     â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY() (Editor Only)                                  â”‚      â”‚
â”‚  â”‚   FNiagaraParameters InternalParameters;                     â”‚      â”‚
â”‚  â”‚   // ë‚´ë¶€ íŒŒë¼ë¯¸í„°                                            â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<uint8> ScriptLiterals;                             â”‚      â”‚
â”‚  â”‚   // ìƒìˆ˜ ê°’ (í•˜ë“œì½”ë”©ëœ ê°’ë“¤)                                â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 3. DataInterface ì •ë³´                                       â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<FNiagaraScriptDataInterfaceCompileInfo> DataInterfaceInfo;â”‚ â”‚
â”‚  â”‚   // ì‚¬ìš©ëœ DataInterface ëª©ë¡ ë° íƒ€ì…                       â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<FVMExternalFunctionBindingInfo> CalledVMExternalFunctions;â”‚ â”‚
â”‚  â”‚   // í˜¸ì¶œí•  External Function ì •ë³´                           â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   TArray<FVMExternalFunction> CalledVMExternalFunctionBindings;â”‚    â”‚
â”‚  â”‚   // Runtimeì—ì„œ ì±„ì›Œì§€ëŠ” í•¨ìˆ˜ í¬ì¸í„°                         â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 4. GPU HLSL ì½”ë“œ (Editor Only)                              â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚   UPROPERTY() (Editor Only)                                  â”‚      â”‚
â”‚  â”‚   FString LastHlslTranslationGPU;                            â”‚      â”‚
â”‚  â”‚   // GPU Compute Shaderë¡œ ë³€í™˜ëœ HLSL ì½”ë“œ                   â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   FNiagaraShaderScriptParametersMetadata ShaderScriptParametersMetadata;â”‚ â”‚
â”‚  â”‚   // GPU íŒŒë¼ë¯¸í„° ë©”íƒ€ë°ì´í„°                                  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 5. ì»´íŒŒì¼ ìƒíƒœ ë° í†µê³„                                       â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   ENiagaraScriptCompileStatus LastCompileStatus;             â”‚      â”‚
â”‚  â”‚   // Success, CompileError, CompileWarning ë“±                â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<FNiagaraStatScope> StatScopes;                     â”‚      â”‚
â”‚  â”‚   // ì„±ëŠ¥ í†µê³„ ë²”ìœ„                                           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ 6. Attributes & DataSets                                    â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<FNiagaraVariableBase> Attributes;                  â”‚      â”‚
â”‚  â”‚   // ì‚¬ìš©í•˜ëŠ” Attribute ëª©ë¡ (Particles.Position ë“±)         â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<FNiagaraDataSetID> ReadDataSets;                   â”‚      â”‚
â”‚  â”‚   // ì½ê¸°í•˜ëŠ” DataSet ëª©ë¡                                   â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚   UPROPERTY()                                                â”‚      â”‚
â”‚  â”‚   TArray<FNiagaraDataSetProperties> WriteDataSets;          â”‚      â”‚
â”‚  â”‚   // ì“°ê¸°í•˜ëŠ” DataSet ëª©ë¡                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `NiagaraScript.h:396-560` - FNiagaraVMExecutableData êµ¬ì¡°ì²´

### FNiagaraVMExecutableDataId êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FNiagaraVMExecutableDataId                             â”‚
â”‚  (DDC í‚¤ ë° ì»´íŒŒì¼ ì‹ë³„ì)                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì—­í• : ìŠ¤í¬ë¦½íŠ¸ ë³€ê²½ ê°ì§€ ë° DDC í‚¤ ìƒì„±                                 â”‚
â”‚                                                                         â”‚
â”‚  UPROPERTY()                                                            â”‚
â”‚  FGuid CompilerVersionID;                                              â”‚
â”‚  // ì»´íŒŒì¼ëŸ¬ ë²„ì „ (ì—”ì§„ ë²„ì „ ë³€ê²½ ì‹œ ì¬ì»´íŒŒì¼ íŠ¸ë¦¬ê±°)                    â”‚
â”‚                                                                         â”‚
â”‚  UPROPERTY()                                                            â”‚
â”‚  FNiagaraCompileHash BaseScriptCompileHash;                            â”‚
â”‚  // ìŠ¤í¬ë¦½íŠ¸ ê·¸ë˜í”„ í•´ì‹œ (ë…¸ë“œ ë³€ê²½ ì‹œ ì¬ì»´íŒŒì¼)                         â”‚
â”‚                                                                         â”‚
â”‚  UPROPERTY() (Editor Only)                                              â”‚
â”‚  ENiagaraScriptUsage ScriptUsageType;                                  â”‚
â”‚  // ParticleSpawnScript, ParticleUpdateScript ë“±                        â”‚
â”‚                                                                         â”‚
â”‚  UPROPERTY() (Editor Only)                                              â”‚
â”‚  FGuid ScriptUsageTypeID;                                              â”‚
â”‚  // Usage ì¸ìŠ¤í„´ìŠ¤ ID                                                   â”‚
â”‚                                                                         â”‚
â”‚  UPROPERTY() (Editor Only)                                              â”‚
â”‚  TArray<FNiagaraCompileHash> ReferencedCompileHashes;                  â”‚
â”‚  // ì˜ì¡´ì„± ìŠ¤í¬ë¦½íŠ¸ í•´ì‹œ (ë¶€ëª¨ ë³€ê²½ ì‹œ ì¬ì»´íŒŒì¼)                         â”‚
â”‚                                                                         â”‚
â”‚  UPROPERTY() (Editor Only)                                              â”‚
â”‚  bool bRequiresPersistentIDs;                                          â”‚
â”‚  // Persistent ID í•„ìš” ì—¬ë¶€ (GPU Ribbon ë“±)                             â”‚
â”‚                                                                         â”‚
â”‚  ë³€ê²½ ê°ì§€ ë¡œì§:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  bool operator==(const FNiagaraVMExecutableDataId& Other)â”‚          â”‚
â”‚  â”‚  {                                                        â”‚          â”‚
â”‚  â”‚      return CompilerVersionID == Other.CompilerVersionID â”‚          â”‚
â”‚  â”‚          && BaseScriptCompileHash == Other.BaseScriptCompileHashâ”‚   â”‚
â”‚  â”‚          && ReferencedCompileHashes == Other.ReferencedCompileHashes;â”‚ â”‚
â”‚  â”‚  }                                                        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  DDC í‚¤ ìƒì„±:                                                            â”‚
â”‚  AppendKeyString(KeyString, Delimiter)                                 â”‚
â”‚  â†’ "NIAGARAVM_<CompilerVer>_<ScriptHash>_<Usage>_<Version>"           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ğŸ“‚ ì†ŒìŠ¤ ê²€ì¦:**
- `NiagaraScript.h:240-351` - FNiagaraVMExecutableDataId êµ¬ì¡°ì²´

---

## ğŸ§± Script Usage íƒ€ì… (Script Types)

Niagara ìŠ¤í¬ë¦½íŠ¸ëŠ” **Usage**ì— ë”°ë¼ ë‹¤ë¥¸ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ENiagaraScriptUsage                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  [1] íŒŒí‹°í´ ìŠ¤í¬ë¦½íŠ¸ (Particle Scripts)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  ParticleSpawnScript                                     â”‚          â”‚
â”‚  â”‚  â””â”€ íŒŒí‹°í´ ìƒì„± ì‹œ 1íšŒ ì‹¤í–‰                               â”‚          â”‚
â”‚  â”‚     â””â”€ Particles.Position, Velocity, Lifetime ì´ˆê¸°í™”     â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  ParticleSpawnScriptInterpolated                         â”‚          â”‚
â”‚  â”‚  â””â”€ ë³´ê°„ëœ ìŠ¤í° (í”„ë ˆì„ ê°„ ê· ë“± ë¶„í¬)                    â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  ParticleUpdateScript                                    â”‚          â”‚
â”‚  â”‚  â””â”€ ë§¤ í”„ë ˆì„ ëª¨ë“  íŒŒí‹°í´ì— ì‹¤í–‰                         â”‚          â”‚
â”‚  â”‚     â””â”€ Forces, Collision, Age ì—…ë°ì´íŠ¸                   â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  ParticleEventScript                                     â”‚          â”‚
â”‚  â”‚  â””â”€ ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì‹¤í–‰ (Death, Collision ë“±)            â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  ParticleSimulationStageScript                           â”‚          â”‚
â”‚  â”‚  â””â”€ Simulation Stage ì‹¤í–‰                                â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  ParticleGPUComputeScript                                â”‚          â”‚
â”‚  â”‚  â””â”€ GPU ì „ìš© ìŠ¤í¬ë¦½íŠ¸ (HLSL)                             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  [2] ì—ë¯¸í„° ìŠ¤í¬ë¦½íŠ¸ (Emitter Scripts)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  EmitterSpawnScript                                      â”‚          â”‚
â”‚  â”‚  â””â”€ ì—ë¯¸í„° ì‹œì‘ ì‹œ 1íšŒ ì‹¤í–‰                               â”‚          â”‚
â”‚  â”‚     â””â”€ ì—ë¯¸í„° ì´ˆê¸° ìƒíƒœ ì„¤ì •                              â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  EmitterUpdateScript                                     â”‚          â”‚
â”‚  â”‚  â””â”€ ë§¤ í”„ë ˆì„ ì‹¤í–‰                                        â”‚          â”‚
â”‚  â”‚     â””â”€ SpawnRate ë™ì  ì¡°ì •, ì¡°ê±´ë¶€ ìŠ¤í°                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  [3] ì‹œìŠ¤í…œ ìŠ¤í¬ë¦½íŠ¸ (System Scripts)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  SystemSpawnScript                                       â”‚          â”‚
â”‚  â”‚  â””â”€ ì‹œìŠ¤í…œ ì‹œì‘ ì‹œ 1íšŒ ì‹¤í–‰                               â”‚          â”‚
â”‚  â”‚     â””â”€ ì‹œìŠ¤í…œ ë ˆë²¨ ì´ˆê¸°í™”                                 â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  SystemUpdateScript                                      â”‚          â”‚
â”‚  â”‚  â””â”€ ë§¤ í”„ë ˆì„ ì‹¤í–‰                                        â”‚          â”‚
â”‚  â”‚     â””â”€ ì‹œìŠ¤í…œ ë ˆë²¨ ë¡œì§                                   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  [4] ë…ë¦½ ìŠ¤í¬ë¦½íŠ¸ (Standalone Scripts)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Module                                                  â”‚          â”‚
â”‚  â”‚  â””â”€ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆ (ìŠ¤íƒì— ì¶”ê°€ ê°€ëŠ¥)                 â”‚          â”‚
â”‚  â”‚     â””â”€ "Add Velocity", "Curl Noise Force" ë“±            â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  Function                                                â”‚          â”‚
â”‚  â”‚  â””â”€ í—¬í¼ í•¨ìˆ˜ (ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í˜¸ì¶œ)                    â”‚          â”‚
â”‚  â”‚     â””â”€ "CalculateNormalizedAge", "GetRandomFloat" ë“±    â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  DynamicInput                                            â”‚          â”‚
â”‚  â”‚  â””â”€ ì…ë ¥ ê°’ ê³„ì‚° (ë‹¨ì¼ ì¶œë ¥)                             â”‚          â”‚
â”‚  â”‚     â””â”€ "Random Vector", "Curve Sample" ë“±               â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Usage ì²´í¬ ë©”ì„œë“œ:**

```cpp
// NiagaraScript.h:1000-1047
bool IsParticleSpawnScript() const;
bool IsParticleUpdateScript() const;
bool IsModuleScript() const;
bool IsFunctionScript() const;
bool IsDynamicInputScript() const;
bool IsGPUScript() const;
bool IsSystemSpawnScript() const;
bool IsEmitterSpawnScript() const;

// ì»´íŒŒì¼ ê°€ëŠ¥ ì—¬ë¶€
static bool IsCompilable(ENiagaraScriptUsage Usage)
{
    // EmitterSpawn/UpdateScriptëŠ” ì»´íŒŒì¼ ì•ˆ í•¨ (EmitterInstanceì—ì„œ ì²˜ë¦¬)
    return !IsEmitterSpawnScript(Usage) && !IsEmitterUpdateScript(Usage);
}
```

---

## ğŸ”§ ì»´íŒŒì¼ ì‹œìŠ¤í…œ (Compilation System)

### ì»´íŒŒì¼ íë¦„

```
ì—ë””í„°ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •
         â†“
    ë³€ê²½ ê°ì§€
    (ChangeID ë¹„êµ)
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â†“         â†“
DDC í™•ì¸   ì—†ìœ¼ë©´ ì»´íŒŒì¼
    â”‚         â†“
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    â”‚ Niagara Compilerâ”‚
    â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚    â”‚ 1. ê·¸ë˜í”„ ë¶„ì„  â”‚
    â”‚    â”‚ 2. íƒ€ì… ì²´í¬   â”‚
    â”‚    â”‚ 3. ìµœì í™”      â”‚
    â”‚    â”‚ 4. ì½”ë“œ ìƒì„±   â”‚
    â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â†“
    â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚    â†“         â†“
    â”‚  CPU       GPU
    â”‚  VectorVM  HLSL
    â”‚  ByteCode  Code
    â”‚    â”‚         â”‚
    â†“    â†“         â†“
  DDCì— ì €ì¥
         â†“
    ëŸ°íƒ€ì„ ì‚¬ìš©
```

### ì»´íŒŒì¼ íŠ¸ë¦¬ê±°

```cpp
// ë³€ê²½ ê°ì§€ ì‹œìŠ¤í…œ
bool AreScriptAndSourceSynchronized(const FGuid& VersionGuid) const;
{
    // 1. ChangeID ë¹„êµ
    FGuid CurrentChangeID = GetBaseChangeID(VersionGuid);
    FGuid CompiledChangeID = CachedScriptVMId.ScriptVersionID;

    if (CurrentChangeID != CompiledChangeID)
        return false;  // ì¬ì»´íŒŒì¼ í•„ìš”!

    // 2. ì˜ì¡´ì„± ì²´í¬
    for (const FNiagaraCompileHash& RefHash : CachedScriptVMId.ReferencedCompileHashes)
    {
        if (RefHash != GetReferencedScriptHash())
            return false;  // ë¶€ëª¨ ë³€ê²½ë¨, ì¬ì»´íŒŒì¼!
    }

    return true;  // ë™ê¸°í™”ë¨, ì¬ì»´íŒŒì¼ ë¶ˆí•„ìš”
}
```

**ì¬ì»´íŒŒì¼ì´ í•„ìš”í•œ ê²½ìš°:**
- ê·¸ë˜í”„ ë…¸ë“œ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì •
- ëª¨ë“ˆ ìˆœì„œ ë³€ê²½
- íŒŒë¼ë¯¸í„° íƒ€ì… ë³€ê²½
- ë¶€ëª¨ ëª¨ë“ˆ ë³€ê²½
- ì—”ì§„ ë²„ì „ ì—…ê·¸ë ˆì´ë“œ

### DDC (Derived Data Cache) í†µí•©

```cpp
// DDC í‚¤ ìƒì„±
// NiagaraScript.h:1234
FString BuildNiagaraDDCKeyString(
    const FNiagaraVMExecutableDataId& CompileId,
    const FString& ScriptPath)
{
    // ì˜ˆì‹œ í‚¤:
    // "NIAGARAVM_CompilerV123_HashABCD1234_ParticleSpawnScript_v1.2"

    FString KeyString;
    KeyString += TEXT("NIAGARAVM");
    KeyString += TEXT("_");
    CompileId.AppendKeyString(KeyString);
    KeyString += TEXT("_");
    KeyString += ScriptPath;

    return KeyString;
}
```

**DDC ì‘ë™ ë°©ì‹:**

```
[1] ì»´íŒŒì¼ ìš”ì²­
â””â”€ ComputeVMCompilationId() â†’ CompileId ìƒì„±

[2] DDC ì¡°íšŒ
â””â”€ BuildNiagaraDDCKeyString(CompileId) â†’ DDC í‚¤
    â””â”€ GetDerivedDataCache()->GetSynchronous(Key)
        â”œâ”€ íˆíŠ¸ â†’ ìºì‹œëœ ë°”ì´íŠ¸ì½”ë“œ ë¡œë“œ (ì¦‰ì‹œ!)
        â””â”€ ë¯¸ìŠ¤ â†’ ì»´íŒŒì¼ ì§„í–‰

[3] ì»´íŒŒì¼ (DDC ë¯¸ìŠ¤ ì‹œ)
â””â”€ Niagara Compiler ì‹¤í–‰
    â”œâ”€ CPU: VectorVM ë°”ì´íŠ¸ì½”ë“œ ìƒì„±
    â””â”€ GPU: HLSL ì½”ë“œ ìƒì„±

[4] DDC ì €ì¥
â””â”€ GetDerivedDataCache()->Put(Key, CompiledData)

[5] ë‹¤ìŒ ì‹¤í–‰
â””â”€ DDC íˆíŠ¸ â†’ ì»´íŒŒì¼ ìŠ¤í‚µ (10ë°° ë¹ ë¦„!)
```

**ì„±ëŠ¥ ë¹„êµ:**

```
DDC ë¯¸ìŠ¤ (ì²« ì»´íŒŒì¼):
- ParticleSpawnScript: ~5ì´ˆ
- ParticleUpdateScript: ~10ì´ˆ
- GPU Script: ~15ì´ˆ (Shader ì»´íŒŒì¼ í¬í•¨)

DDC íˆíŠ¸ (ìºì‹œ ë¡œë“œ):
- ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸: <1ì´ˆ
```

---

## ğŸ’» CPU vs GPU ì½”ë“œ ìƒì„±

### CPU: VectorVM ë°”ì´íŠ¸ì½”ë“œ

```
VectorVM íŠ¹ì§•:
- SIMD ê¸°ë°˜ (SSE/AVX)
- 4ê°œ ë˜ëŠ” 8ê°œ íŒŒí‹°í´ ë™ì‹œ ì²˜ë¦¬
- SOA (Structure of Arrays) ë ˆì´ì•„ì›ƒ
- ë°”ì´íŠ¸ì½”ë“œ ì¸í„°í”„ë¦¬í„°
```

**ë°”ì´íŠ¸ì½”ë“œ ì˜ˆì‹œ:**

```hlsl
// Niagara ê·¸ë˜í”„: "Velocity += Gravity * DeltaTime"

// VectorVM ë°”ì´íŠ¸ì½”ë“œ (ì˜ì‚¬ ì½”ë“œ):
OpCode: LOAD_CONSTANT
Dest: Reg0 (Gravity = (0, 0, -980))

OpCode: LOAD_INPUT
Dest: Reg1 (DeltaTime)

OpCode: MUL_VEC3
Src1: Reg0 (Gravity)
Src2: Reg1 (DeltaTime)
Dest: Reg2

OpCode: LOAD_ATTRIBUTE
Dest: Reg3 (Particles.Velocity)

OpCode: ADD_VEC3
Src1: Reg3 (Velocity)
Src2: Reg2 (Gravity * DeltaTime)
Dest: Reg3 (Velocity ì—…ë°ì´íŠ¸)

OpCode: STORE_ATTRIBUTE
Src: Reg3
Dest: Particles.Velocity
```

**ì‹¤í–‰ ê³¼ì •:**

```cpp
// VectorVM::Exec()ì—ì„œ ì‹¤í–‰
for (int32 i = 0; i < NumParticles; i += 4)  // 4ê°œì”© ì²˜ë¦¬ (SIMD)
{
    // SIMD ë¡œë“œ
    __m128 VelX = _mm_load_ps(&VelocityX[i]);
    __m128 VelY = _mm_load_ps(&VelocityY[i]);
    __m128 VelZ = _mm_load_ps(&VelocityZ[i]);

    // Gravity * DeltaTime
    __m128 GravityVec = _mm_set1_ps(-980.0f * DeltaTime);

    // Velocity += Gravity * DeltaTime
    VelZ = _mm_add_ps(VelZ, GravityVec);

    // SIMD ì €ì¥
    _mm_store_ps(&VelocityX[i], VelX);
    _mm_store_ps(&VelocityY[i], VelY);
    _mm_store_ps(&VelocityZ[i], VelZ);
}
```

### GPU: HLSL Compute Shader

```
GPU íŠ¹ì§•:
- ì™„ì „ ë³‘ë ¬ ì²˜ë¦¬ (ìˆ˜ì²œ ìŠ¤ë ˆë“œ)
- ì»´íŒŒì¼ëœ ë„¤ì´í‹°ë¸Œ ì½”ë“œ
- GPU ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼
- DirectX/Vulkan Compute Shader
```

**HLSL ì½”ë“œ ì˜ˆì‹œ:**

```hlsl
// NiagaraScript.h:486-490 (Editor Only)
// FNiagaraVMExecutableData::LastHlslTranslationGPUì— ì €ì¥

// ë™ì¼ ë¡œì§ "Velocity += Gravity * DeltaTime"ì˜ HLSL ë²„ì „:

[numthreads(64, 1, 1)]
void NiagaraParticleUpdateCS(uint3 DispatchThreadId : SV_DispatchThreadID)
{
    uint ParticleID = DispatchThreadId.x;
    if (ParticleID >= NumParticles)
        return;

    // Gravity ìƒìˆ˜
    float3 Gravity = float3(0, 0, -980);

    // DeltaTime ì½ê¸°
    float DeltaTime = SystemParameters.DeltaTime;

    // Velocity ì½ê¸° (GPU ë©”ëª¨ë¦¬)
    float3 Velocity = ParticleData_Velocity[ParticleID];

    // ì—…ë°ì´íŠ¸
    Velocity += Gravity * DeltaTime;

    // Velocity ì“°ê¸°
    ParticleData_Velocity[ParticleID] = Velocity;
}
```

**ì‹¤í–‰ ê³¼ì •:**

```cpp
// GPUì—ì„œ ì‹¤í–‰
// 100ë§Œ íŒŒí‹°í´ì„ ìˆ˜ì²œ ìŠ¤ë ˆë“œê°€ ë³‘ë ¬ ì²˜ë¦¬

Dispatch(NumParticles / 64, 1, 1);
// â†’ 64ê°œì”© ë¬¶ì–´ì„œ ë””ìŠ¤íŒ¨ì¹˜
// â†’ GPUê°€ ìë™ìœ¼ë¡œ ë³‘ë ¬ ì‹¤í–‰
// â†’ ëª¨ë“  íŒŒí‹°í´ì´ ë™ì‹œì— ì—…ë°ì´íŠ¸ë¨ (1~2ms)
```

**ì„±ëŠ¥ ë¹„êµ:**

| íŒŒí‹°í´ ìˆ˜ | CPU (VectorVM) | GPU (HLSL) | ì„±ëŠ¥ ì°¨ì´ |
|----------|----------------|------------|----------|
| 10,000 | ~0.5ms | ~0.1ms | 5ë°° |
| 100,000 | ~5ms | ~0.5ms | 10ë°° |
| 1,000,000 | N/A (ë¶ˆê°€ëŠ¥) | ~4ms | - |

---

## ğŸ“¦ ë²„ì „ ì‹œìŠ¤í…œ (Versioning System)

### FVersionedNiagaraScriptData êµ¬ì¡°

```cpp
// NiagaraScript.h:617-772
USTRUCT()
struct FVersionedNiagaraScriptData
{
#if WITH_EDITORONLY_DATA
    UPROPERTY()
    FNiagaraAssetVersion Version;  // MajorVersion, MinorVersion, VersionGuid

    UPROPERTY()
    FText VersionChangeDescription;  // ë³€ê²½ ì‚¬í•­ ì„¤ëª…

    // ëª¨ë“ˆ ì„¤ì •
    UPROPERTY()
    int32 ModuleUsageBitmask;  // ì§€ì›í•˜ëŠ” Usage íƒ€ì…

    UPROPERTY()
    FText Category;  // ëª¨ë“ˆ ì¹´í…Œê³ ë¦¬

    // ì˜ì¡´ì„±
    UPROPERTY()
    TArray<FName> ProvidedDependencies;  // ì œê³µí•˜ëŠ” ì˜ì¡´ì„±

    UPROPERTY()
    TArray<FNiagaraModuleDependency> RequiredDependencies;  // í•„ìš”í•œ ì˜ì¡´ì„±

    // Deprecated ê´€ë¦¬
    UPROPERTY()
    bool bDeprecated;

    UPROPERTY()
    FText DeprecationMessage;

    UPROPERTY()
    TObjectPtr<UNiagaraScript> DeprecationRecommendation;  // ëŒ€ì²´ ìŠ¤í¬ë¦½íŠ¸

    // ì†ŒìŠ¤
    UPROPERTY()
    TObjectPtr<class UNiagaraScriptSourceBase> Source;  // Niagara ê·¸ë˜í”„
#endif
};
```

### ë²„ì „ ê´€ë¦¬ ì˜ˆì‹œ

```cpp
// ë²„ì „ ìƒì„±
#if WITH_EDITOR
UNiagaraScript* Script = ...;

// ë²„ì „ ê´€ë¦¬ í™œì„±í™”
Script->EnableVersioning();

// ìƒˆ ë²„ì „ ìƒì„± (v1.1)
FGuid NewVersionGuid = Script->AddNewVersion(1, 1);

// ìƒˆ ë²„ì „ ìˆ˜ì •
FVersionedNiagaraScriptData* NewData = Script->GetScriptData(NewVersionGuid);
if (NewData)
{
    NewData->VersionChangeDescription = FText::FromString(TEXT("Optimized for GPU"));
    // ê·¸ë˜í”„ ìˆ˜ì •...
}

// ìƒˆ ë²„ì „ ë…¸ì¶œ (ê¸°ë³¸ ë²„ì „ìœ¼ë¡œ)
Script->ExposeVersion(NewVersionGuid);
#endif
```

**ë²„ì „ ì‚¬ìš© íë¦„:**

```
[1] ê¸°ì¡´ í”„ë¡œì íŠ¸
â””â”€ MyModule v1.0 ì‚¬ìš© ì¤‘
    â””â”€ ë³€ê²½ ì—†ìŒ â†’ ê¸°ì¡´ ë™ì‘ ìœ ì§€

[2] ìƒˆ ë²„ì „ ìƒì„±
â””â”€ MyModule v1.1 ìƒì„±
    â””â”€ v1.0 ë³µì‚¬ë³¸ìœ¼ë¡œ ì‹œì‘

[3] ìƒˆ ë²„ì „ ìˆ˜ì •
â””â”€ v1.1ë§Œ ìˆ˜ì • (GPU ìµœì í™” ë“±)
    â””â”€ v1.0ì€ ê·¸ëŒ€ë¡œ ìœ ì§€

[4] ìƒˆ ë²„ì „ ë…¸ì¶œ
â””â”€ ExposeVersion(v1.1)
    â””â”€ ì‹ ê·œ ì‹œìŠ¤í…œ ì¶”ê°€ ì‹œ v1.1 ì‚¬ìš©
    â””â”€ ê¸°ì¡´ ì‹œìŠ¤í…œì€ ì—¬ì „íˆ v1.0 ì‚¬ìš© (í˜¸í™˜ì„±!)
```

---

## ğŸ’¡ ì‹¤ì „ ì˜ˆì‹œ (Practical Examples)

### âœ… ì¢‹ì€ ì˜ˆ: ë™ê¸° ì»´íŒŒì¼ ìš”ì²­

```cpp
#if WITH_EDITOR
// âœ… ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì • í›„ ì»´íŒŒì¼
UNiagaraScript* MyScript = LoadObject<UNiagaraScript>(...);

// ë™ê¸° ê°ì§€
if (!MyScript->AreScriptAndSourceSynchronized())
{
    UE_LOG(LogNiagara, Warning, TEXT("Script out of sync, compiling..."));

    // ë™ê¸° ì»´íŒŒì¼ ìš”ì²­
    MyScript->RequestCompile(FGuid(), /*bForceCompile=*/ false);

    // ì»´íŒŒì¼ ì™„ë£Œ ëŒ€ê¸° (ì—ë””í„°ì—ì„œë§Œ)
    while (MyScript->IsScriptCompilationPending(/*bGPUScript=*/ false))
    {
        FPlatformProcess::Sleep(0.1f);
    }

    // ê²°ê³¼ í™•ì¸
    if (MyScript->DidScriptCompilationSucceed(false))
    {
        UE_LOG(LogNiagara, Log, TEXT("Compilation succeeded"));
    }
    else
    {
        UE_LOG(LogNiagara, Error, TEXT("Compilation failed!"));
    }
}
#endif
```

### âœ… ì¢‹ì€ ì˜ˆ: ì»´íŒŒì¼ ê²°ê³¼ í™•ì¸

```cpp
#if WITH_EDITOR
void CheckScriptCompilationStatus(UNiagaraScript* Script)
{
    if (!Script) return;

    // âœ… ì»´íŒŒì¼ ìƒíƒœ í™•ì¸
    ENiagaraScriptCompileStatus Status = Script->GetLastCompileStatus();

    switch (Status)
    {
        case ENiagaraScriptCompileStatus::NCS_UpToDate:
            UE_LOG(LogNiagara, Log, TEXT("Script is up to date"));
            break;

        case ENiagaraScriptCompileStatus::NCS_Dirty:
            UE_LOG(LogNiagara, Warning, TEXT("Script needs recompilation"));
            break;

        case ENiagaraScriptCompileStatus::NCS_Error:
            UE_LOG(LogNiagara, Error, TEXT("Script has compile errors"));

            // ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥
            const FNiagaraVMExecutableData& ExecData = Script->GetVMExecutableData();
            for (const FNiagaraCompileEvent& Event : ExecData.LastCompileEvents)
            {
                if (Event.Severity == FNiagaraCompileEventSeverity::Error)
                {
                    UE_LOG(LogNiagara, Error, TEXT("  - %s"), *Event.Message);
                }
            }
            break;

        case ENiagaraScriptCompileStatus::NCS_Unknown:
            UE_LOG(LogNiagara, Warning, TEXT("Script compile status unknown"));
            break;
    }
}
#endif
```

### âœ… ì¢‹ì€ ì˜ˆ: DDC í‚¤ í™•ì¸

```cpp
#if WITH_EDITOR
void LogScriptDDCKey(UNiagaraScript* Script)
{
    if (!Script) return;

    // âœ… DDC í‚¤ ìƒì„±
    FString ScriptPath = Script->GetPathName();
    FString DDCKey = UNiagaraScript::BuildNiagaraDDCKeyString(
        Script->GetVMExecutableDataCompilationId(),
        ScriptPath
    );

    UE_LOG(LogNiagara, Log, TEXT("DDC Key: %s"), *DDCKey);

    // âœ… ìºì‹œ íˆíŠ¸ ì—¬ë¶€ í™•ì¸
    TArray<uint8> CachedData;
    bool bCacheHit = GetDerivedDataCacheRef().GetSynchronous(*DDCKey, CachedData);

    if (bCacheHit)
    {
        UE_LOG(LogNiagara, Log, TEXT("DDC HIT - Cached data available"));
    }
    else
    {
        UE_LOG(LogNiagara, Warning, TEXT("DDC MISS - Compilation needed"));
    }
}
#endif
```

### âœ… ì¢‹ì€ ì˜ˆ: Rapid Iteration Parameters

```cpp
// âœ… ëŸ°íƒ€ì„ì— ë¹ ë¥´ê²Œ ì¡°ì • ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„°
void TweakScriptParameters(UNiagaraScript* Script)
{
    if (!Script) return;

    // Rapid Iteration ParametersëŠ” ì¬ì»´íŒŒì¼ ì—†ì´ ìˆ˜ì • ê°€ëŠ¥
    FNiagaraParameterStore& RapidIterationParams = Script->RapidIterationParameters;

    // âœ… Float íŒŒë¼ë¯¸í„° ì„¤ì •
    FNiagaraVariable FireSizeVar(FNiagaraTypeDefinition::GetFloatDef(), TEXT("Module.FireSize"));
    RapidIterationParams.SetParameterValue(2.0f, FireSizeVar);

    // âœ… Vector íŒŒë¼ë¯¸í„° ì„¤ì •
    FNiagaraVariable FireColorVar(FNiagaraTypeDefinition::GetVec3Def(), TEXT("Module.FireColor"));
    RapidIterationParams.SetParameterValue(FVector(1.0f, 0.5f, 0.0f), FireColorVar);

    // ì¬ì»´íŒŒì¼ ë¶ˆí•„ìš”! ì¦‰ì‹œ ë°˜ì˜ë¨
}
```

### âŒ ë‚˜ìœ ì˜ˆ: ëŸ°íƒ€ì„ì— ì»´íŒŒì¼

```cpp
// âŒ ì ˆëŒ€ ëŸ°íƒ€ì„ì— ì»´íŒŒì¼í•˜ì§€ ë§ˆì„¸ìš”!
void BadRuntimeCompilation()
{
#if WITH_EDITOR
    UNiagaraScript* Script = ...;

    // âŒ ëŸ°íƒ€ì„ì— ì»´íŒŒì¼ ì‹œë„ (ë§¤ìš° ëŠë¦¼!)
    Script->RequestCompile(FGuid(), true);
    // â†’ ê²Œì„ì´ ë©ˆì¶¤ (5~15ì´ˆ)
    // â†’ ì—ë””í„°ì—ì„œë§Œ ê°€ëŠ¥!
    // â†’ íŒ¨í‚¤ì§•ëœ ê²Œì„ì—ì„œëŠ” ì‘ë™ ì•ˆ í•¨!
#endif
}
```

**ì˜¬ë°”ë¥¸ ë°©ë²•:**

```cpp
// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ì—ë””í„°ì—ì„œ ë¯¸ë¦¬ ì»´íŒŒì¼
// 1. ì—ë””í„°ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •
// 2. ìë™ ì»´íŒŒì¼ (ë˜ëŠ” File â†’ Compile All)
// 3. DDCì— ìºì‹±ë¨
// 4. ì¿ í‚¹ ì‹œ CachedScriptVMì´ íŒ¨í‚¤ì§•ë¨
// 5. ëŸ°íƒ€ì„ì—ëŠ” ì´ë¯¸ ì»´íŒŒì¼ëœ ë°ì´í„° ì‚¬ìš© (ì¦‰ì‹œ!)
```

### âŒ ë‚˜ìœ ì˜ˆ: CachedScriptVM ì§ì ‘ ìˆ˜ì •

```cpp
// âŒ ì ˆëŒ€ CachedScriptVMì„ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”!
void BadDirectModification(UNiagaraScript* Script)
{
    // âŒ ì˜ëª»ëœ ë°©ë²•
    FNiagaraVMExecutableData& VM = Script->GetVMExecutableData();
    VM.ByteCode.GetData().Add(0xFF);  // ë°”ì´íŠ¸ì½”ë“œ ì§ì ‘ ìˆ˜ì •
    // â†’ í¬ë˜ì‹œ ê°€ëŠ¥ì„± ë†’ìŒ!
    // â†’ íƒ€ì… ì•ˆì „ì„± ì—†ìŒ!
    // â†’ DDCì™€ ë™ê¸°í™” ê¹¨ì§!
}
```

**ì˜¬ë°”ë¥¸ ë°©ë²•:**

```cpp
// âœ… ì˜¬ë°”ë¥¸ ë°©ë²•: ì»´íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©
#if WITH_EDITOR
// ê·¸ë˜í”„ ìˆ˜ì • â†’ ìë™ ì»´íŒŒì¼ â†’ CachedScriptVM ì—…ë°ì´íŠ¸
UNiagaraScriptSourceBase* Source = Script->GetLatestSource();
// Source ìˆ˜ì •...
Script->RequestCompile(FGuid(), false);
#endif
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™” (Performance Optimization)

### ì»´íŒŒì¼ ì‹œê°„ ìµœì í™”

**1. DDC í™œìš©:**

```cpp
// âœ… DDC ìºì‹œ í™•ì¸
// Engine.ini ë˜ëŠ” DefaultEngine.ini
[DerivedDataBackendGraph]
MinimumDaysToKeepFile=7
Root=(Type=FileSystem, ReadOnly=false, Clean=false, Path="C:/DDC")

// ë„¤íŠ¸ì›Œí¬ DDC ì„¤ì • (íŒ€ ê³µìœ )
Shared=(Type=FileSystem, ReadOnly=false, Path="\\\\ServerName\\DDC")
```

**2. ì¦ë¶„ ì»´íŒŒì¼:**

```cpp
// âœ… ë³€ê²½ëœ ìŠ¤í¬ë¦½íŠ¸ë§Œ ì»´íŒŒì¼
void CompileModifiedScriptsOnly(UNiagaraSystem* System)
{
#if WITH_EDITOR
    for (const FNiagaraEmitterHandle& Handle : System->GetEmitterHandles())
    {
        UNiagaraEmitter* Emitter = Handle.GetInstance().Emitter;
        if (!Emitter) continue;

        // ê° ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
        TArray<UNiagaraScript*> Scripts;
        Scripts.Add(Emitter->GetScript(ENiagaraScriptUsage::ParticleSpawnScript));
        Scripts.Add(Emitter->GetScript(ENiagaraScriptUsage::ParticleUpdateScript));

        for (UNiagaraScript* Script : Scripts)
        {
            if (Script && !Script->AreScriptAndSourceSynchronized())
            {
                // âœ… ë³€ê²½ëœ ê²ƒë§Œ ì»´íŒŒì¼
                Script->RequestCompile(FGuid(), false);
            }
        }
    }
#endif
}
```

### ëŸ°íƒ€ì„ ì„±ëŠ¥ ìµœì í™”

**1. VectorVM ìµœì í™”:**

```cpp
// âœ… SIMD ì¹œí™”ì ì¸ ë°ì´í„° ë ˆì´ì•„ì›ƒ
// SOA (Structure of Arrays) ì‚¬ìš© - ìë™ìœ¼ë¡œ ì²˜ë¦¬ë¨

// âŒ AOS (Array of Structures) - ìºì‹œ ë¹„íš¨ìœ¨
struct Particle {
    FVector Position;  // 12 bytes
    FVector Velocity;  // 12 bytes
    float Age;         // 4 bytes
    float Lifetime;    // 4 bytes
};  // Total: 32 bytes per particle
TArray<Particle> Particles;

// âœ… SOA (Structure of Arrays) - VectorVM ì‚¬ìš©
// FNiagaraDataSetì—ì„œ ìë™ ì²˜ë¦¬:
float* PositionX[N];  // ì—°ì†ëœ ë©”ëª¨ë¦¬
float* PositionY[N];
float* PositionZ[N];
float* VelocityX[N];
// ...
// SIMD ë¡œë“œ/ì €ì¥ ìµœì í™”!
```

**2. GPU ì „í™˜ ê³ ë ¤:**

```cpp
// íŒŒí‹°í´ ê°œìˆ˜ë³„ ê¶Œì¥ì‚¬í•­:
// - 10,000 ì´í•˜: CPU (ë””ë²„ê¹… í¸ì˜)
// - 50,000 ì´ìƒ: GPU (ì„±ëŠ¥ í•„ìˆ˜)
// - 100,000 ì´ìƒ: GPU í•„ìˆ˜

if (ExpectedParticleCount > 50000)
{
    // GPU ì‹œë®¬ë ˆì´ì…˜ ì‚¬ìš©
    EmitterData->SimTarget = ENiagaraSimTarget::GPUComputeSim;
}
```

**3. ìŠ¤í¬ë¦½íŠ¸ ìµœì í™”:**

```
âœ… í•´ì•¼ í•  ê²ƒ:
- ë¶ˆí•„ìš”í•œ ê³„ì‚° ì œê±°
- ìƒìˆ˜ ê°’ì€ Literalë¡œ (ì»´íŒŒì¼ ì‹œ ìµœì í™”)
- ë³µì¡í•œ ë¡œì§ì€ Functionìœ¼ë¡œ ë¶„ë¦¬ (ì¬ì‚¬ìš©)

âŒ í”¼í•´ì•¼ í•  ê²ƒ:
- ë§¤ í”„ë ˆì„ ë™ì¼í•œ ê³„ì‚° ë°˜ë³µ
- ë¶ˆí•„ìš”í•œ DataInterface í˜¸ì¶œ
- ê³¼ë„í•œ ì¡°ê±´ë¬¸ (GPUì—ì„œ ëŠë¦¼)
```

---

## ğŸ”§ ë””ë²„ê¹… ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ… (Debugging & Troubleshooting)

### í”í•œ ì—ëŸ¬ì™€ í•´ê²° ë°©ë²•

**1. "Script compilation failed"**

```
ì›ì¸: ê·¸ë˜í”„ ì—ëŸ¬ (íƒ€ì… ë¶ˆì¼ì¹˜, ëˆ„ë½ëœ ì—°ê²° ë“±)

í•´ê²°ì±…:
1. Niagara ì—ë””í„° ì—´ê¸°
2. Compiler Result íŒ¨ë„ í™•ì¸
3. ë¹¨ê°„ìƒ‰ ë…¸ë“œ ì°¾ê¸°
4. ì—ëŸ¬ ë©”ì‹œì§€ ì½ê³  ìˆ˜ì •
5. Compile ë²„íŠ¼ í´ë¦­

ì—ë””í„° ë¡œê·¸ í™•ì¸:
Output Log â†’ LogNiagara í•„í„°
```

**2. "DDC cache miss"**

```
ì›ì¸: DDC ê²½ë¡œ ë¬¸ì œ ë˜ëŠ” ìºì‹œ ì†ìƒ

í•´ê²°ì±…:
1. DDC ê²½ë¡œ í™•ì¸: Engine.ini
2. DDC ì‚­ì œ í›„ ì¬ìƒì„±:
   - C:/DDC í´ë” ì‚­ì œ
   - ì—ë””í„° ì¬ì‹œì‘
3. ë„¤íŠ¸ì›Œí¬ DDC í™•ì¸ (íŒ€ í™˜ê²½)
```

**3. "Script is out of date"**

```
ì›ì¸: ê·¸ë˜í”„ì™€ ì»´íŒŒì¼ ê²°ê³¼ ë¶ˆì¼ì¹˜

í•´ê²°ì±…:
UNiagaraScript* Script = ...;
if (!Script->AreScriptAndSourceSynchronized())
{
    Script->RequestCompile(FGuid(), false);
}
```

**4. "GPU script not supported"**

```
ì›ì¸: í”Œë«í¼ì´ Compute Shader ë¯¸ì§€ì›

í•´ê²°ì±…:
- GPU ë¯¸ì§€ì› í”Œë«í¼ì€ CPUë¡œ Fallback
- Emitter â†’ Platforms ì„¤ì • í™•ì¸
- ë˜ëŠ” CPU ì „ìš© ì—ë¯¸í„° ì‚¬ìš©
```

**5. "External function binding failed"**

```
ì›ì¸: DataInterface ë°”ì¸ë”© ì˜¤ë¥˜

í•´ê²°ì±…:
1. DataInterfaceê°€ ì œëŒ€ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
2. GPU ì‹œë®¬ë ˆì´ì…˜ì—ì„œ CPU ì „ìš© DI ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
3. CachedScriptVM.CalledVMExternalFunctionBindings í™•ì¸
```

### ë””ë²„ê¹… íŒ

**1. ì»´íŒŒì¼ ë¡œê·¸ í™œì„±í™”:**

```cpp
// Engine.ini ë˜ëŠ” DefaultEngine.ini
[Core.Log]
LogNiagaraCompiler=Verbose
LogNiagara=Verbose

// ì½˜ì†” ëª…ë ¹ì–´
fx.Niagara.Debug.Verbose 1
```

**2. ë°”ì´íŠ¸ì½”ë“œ ì¶œë ¥:**

```cpp
#if WITH_EDITORONLY_DATA
void DumpVMBytecode(UNiagaraScript* Script)
{
    const FNiagaraVMExecutableData& VM = Script->GetVMExecutableData();

    UE_LOG(LogNiagara, Log, TEXT("=== VM ByteCode ==="));
    UE_LOG(LogNiagara, Log, TEXT("NumTempRegisters: %d"), VM.NumTempRegisters);
    UE_LOG(LogNiagara, Log, TEXT("NumUserPtrs: %d"), VM.NumUserPtrs);
    UE_LOG(LogNiagara, Log, TEXT("ByteCode Length: %d"), VM.ByteCode.GetLength());

    // HLSL ì½”ë“œ ì¶œë ¥
    if (!VM.LastHlslTranslationGPU.IsEmpty())
    {
        UE_LOG(LogNiagara, Log, TEXT("=== HLSL Code ==="));
        UE_LOG(LogNiagara, Log, TEXT("%s"), *VM.LastHlslTranslationGPU);
    }
}
#endif
```

**3. DDC ìƒíƒœ í™•ì¸:**

```cpp
// ì½˜ì†” ëª…ë ¹ì–´
// DDC í†µê³„ ì¶œë ¥
DDC.Stats

// DDC ìºì‹œ í”ŒëŸ¬ì‹œ
DDC.Flush

// íŠ¹ì • ì—ì…‹ DDC ì¬ìƒì„±
NiagaraScript.InvalidateCompileResults
```

---

## ğŸ’¾ ì €ì¥ ë° ì§ë ¬í™” (Storage and Serialization)

### FNiagaraVMExecutableData ì§ë ¬í™”

**ì €ì¥ë˜ëŠ” ë°ì´í„°:**

```cpp
// FNiagaraVMExecutableData êµ¬ì¡° (ì§ë ¬í™” ëŒ€ìƒ)
struct FNiagaraVMExecutableData
{
    // CPU ë°”ì´íŠ¸ì½”ë“œ (VectorVM)
    FNiagaraVMBytecode ByteCode;           // ì§ë ¬í™”ë¨
    int32 NumTempRegisters;                // ì§ë ¬í™”ë¨
    int32 NumUserPtrs;                     // ì§ë ¬í™”ë¨

    // GPU HLSL ì½”ë“œ
    FString LastHlslTranslationGPU;        // ì—ë””í„°ë§Œ (ë””ë²„ê·¸ìš©)
    FString LastHlslTranslation;           // ì—ë””í„°ë§Œ

    // íŒŒë¼ë¯¸í„° ì •ë³´
    TArray<FNiagaraVariableBase> Parameters;          // ì§ë ¬í™”ë¨
    TArray<FNiagaraVariableBase> InternalParameters;  // ì§ë ¬í™”ë¨

    // DataInterface ë°”ì¸ë”©
    TArray<FNiagaraDataInterfaceGPUParamInfo> DIParamInfo;  // ì§ë ¬í™”ë¨
    TMap<FName, FNiagaraDataInterfaceInfo> DataInterfaceInfo; // ì§ë ¬í™”ë¨

    // ì»´íŒŒì¼ ë©”íƒ€ë°ì´í„°
    ENiagaraScriptCompileStatus LastCompileStatus;    // ì§ë ¬í™”ë¨
    TArray<FNiagaraCompileEvent> LastCompileEvents;   // ì—ë””í„°ë§Œ

    // í†µê³„
    FNiagaraScriptExecutionStats Stats;               // ì§ë ¬í™”ë¨
};
```

### ì§ë ¬í™” í”„ë¡œì„¸ìŠ¤

```
[1] ì—ë””í„°ì—ì„œ ì»´íŒŒì¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNiagaraScript::CompileScript()                                        â”‚
â”‚  â””â”€ FNiagaraCompiler::CompileScript()                                  â”‚
â”‚      â”œâ”€ HLSL ìƒì„±                                                       â”‚
â”‚      â”œâ”€ VectorVM ë°”ì´íŠ¸ì½”ë“œ ìƒì„±                                        â”‚
â”‚      â””â”€ FNiagaraVMExecutableData ì—…ë°ì´íŠ¸                              â”‚
â”‚          â”œâ”€ ByteCode ì €ì¥                                              â”‚
â”‚          â”œâ”€ Parameters ì €ì¥                                            â”‚
â”‚          â””â”€ DataInterfaceInfo ì €ì¥                                     â”‚
â”‚                                                                         â”‚
â”‚  â””â”€ DDCì— ì €ì¥                                                          â”‚
â”‚      â”œâ”€ Key ìƒì„±: "NIAGARAVM_<Hash>_<Usage>_<Version>"                â”‚
â”‚      â””â”€ Value: Serialized FNiagaraVMExecutableData                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
[2] ì—ì…‹ ì €ì¥ (*.uasset)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNiagaraScript::Serialize(FArchive& Ar)                               â”‚
â”‚  {                                                                      â”‚
â”‚      Super::Serialize(Ar);                                             â”‚
â”‚                                                                         â”‚
â”‚      // CachedScriptVM ì§ë ¬í™”                                           â”‚
â”‚      Ar << CachedScriptVM.ByteCode;                                    â”‚
â”‚      Ar << CachedScriptVM.NumTempRegisters;                            â”‚
â”‚      Ar << CachedScriptVM.Parameters;                                  â”‚
â”‚      Ar << CachedScriptVM.DataInterfaceInfo;                           â”‚
â”‚      // ... ëª¨ë“  í•„ë“œ ì§ë ¬í™”                                            â”‚
â”‚                                                                         â”‚
â”‚      // ScriptResource (GPU Shader) ì§ë ¬í™”                             â”‚
â”‚      if (Ar.IsLoading())                                               â”‚
â”‚      {                                                                  â”‚
â”‚          ScriptResource = new FNiagaraShaderScript();                  â”‚
â”‚          ScriptResource->SerializeShaderMap(Ar);                       â”‚
â”‚      }                                                                  â”‚
â”‚      else if (Ar.IsSaving())                                           â”‚
â”‚      {                                                                  â”‚
â”‚          if (ScriptResource)                                           â”‚
â”‚          {                                                              â”‚
â”‚              ScriptResource->SerializeShaderMap(Ar);                   â”‚
â”‚          }                                                              â”‚
â”‚      }                                                                  â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
[3] ì¿ í‚¹ (Packaging)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNiagaraScript::Serialize(FArchive& Ar) [ì¿ í‚¹ ëª¨ë“œ]                   â”‚
â”‚  {                                                                      â”‚
â”‚      // âœ… CachedScriptVMì€ í•­ìƒ í¬í•¨ (CPU)                             â”‚
â”‚      Ar << CachedScriptVM;                                             â”‚
â”‚                                                                         â”‚
â”‚      // âœ… ScriptResource (GPU Shader) í”Œë«í¼ë³„ ì»´íŒŒì¼                  â”‚
â”‚      if (Ar.IsCooking())                                               â”‚
â”‚      {                                                                  â”‚
â”‚          // íƒ€ê²Ÿ í”Œë«í¼ë³„ Shader ì»´íŒŒì¼                                 â”‚
â”‚          // - Windows: DX11, DX12, Vulkan                              â”‚
â”‚          // - PS5: GNM                                                 â”‚
â”‚          // - Xbox Series X: DX12                                      â”‚
â”‚          ScriptResource->CompileForPlatform(TargetPlatform);           â”‚
â”‚      }                                                                  â”‚
â”‚                                                                         â”‚
â”‚      // âŒ ì—ë””í„° ì „ìš© ë°ì´í„° ì œì™¸                                       â”‚
â”‚      // - LastHlslTranslation (HLSL ì†ŒìŠ¤ ì½”ë“œ)                         â”‚
â”‚      // - LastCompileEvents (ì»´íŒŒì¼ ë¡œê·¸)                               â”‚
â”‚      // - Source (UNiagaraGraph) - WITH_EDITORONLY_DATA                â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
[4] ëŸ°íƒ€ì„ ë¡œë”© (íŒ¨í‚¤ì§•ëœ ê²Œì„)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UNiagaraScript* Script = LoadObject<UNiagaraScript>(...);            â”‚
â”‚  â””â”€ UNiagaraScript::Serialize(FArchive& Ar) [ë¡œë”© ëª¨ë“œ]               â”‚
â”‚      â”œâ”€ CachedScriptVM ì—­ì§ë ¬í™”                                        â”‚
â”‚      â”‚   â”œâ”€ ByteCode ë¡œë“œ (VectorVM ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ)                   â”‚
â”‚      â”‚   â”œâ”€ Parameters ë¡œë“œ                                           â”‚
â”‚      â”‚   â””â”€ DataInterfaceInfo ë¡œë“œ                                    â”‚
â”‚      â”‚                                                                 â”‚
â”‚      â””â”€ ScriptResource ì—­ì§ë ¬í™”                                        â”‚
â”‚          â””â”€ í”Œë«í¼ì— ë§ëŠ” Shader ë¡œë“œ (GPU ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ)             â”‚
â”‚                                                                         â”‚
â”‚  â†’ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥! (ì¬ì»´íŒŒì¼ ë¶ˆí•„ìš”)                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### DDC í‚¤ ìƒì„±

**DDC í‚¤ êµ¬ì¡°:**

```cpp
// UNiagaraScript::BuildNiagaraDDCKeyString() ë‚´ë¶€
FString UNiagaraScript::BuildNiagaraDDCKeyString(
    const FNiagaraVMExecutableDataId& CompilationId,
    const FString& AssetPath)
{
    // í‚¤ êµ¬ì„± ìš”ì†Œ:
    // 1. ë²„ì „ í•´ì‹œ (Niagara ì»´íŒŒì¼ëŸ¬ ë²„ì „)
    // 2. ìŠ¤í¬ë¦½íŠ¸ Source í•´ì‹œ (ê·¸ë˜í”„ ë‚´ìš©)
    // 3. Usage íƒ€ì… (ParticleSpawn, ParticleUpdate ë“±)
    // 4. Usage ID (GUID)
    // 5. ì—ì…‹ ê²½ë¡œ

    FString Key = FString::Printf(
        TEXT("NIAGARAVM_%s_%s_%s_%s_%s"),
        *FString::FromInt(CompilationId.CompilerVersionID),  // ì»´íŒŒì¼ëŸ¬ ë²„ì „
        *CompilationId.ScriptUsageType.ToString(),            // Usage íƒ€ì…
        *CompilationId.ScriptUsageTypeID.ToString(),          // Usage ID
        *CompilationId.BaseScriptID.ToString(),               // Script ID
        *FMD5::HashAnsiString(*AssetPath)                     // ì—ì…‹ ê²½ë¡œ í•´ì‹œ
    );

    return Key;
}

// ì˜ˆì‹œ í‚¤:
// "NIAGARAVM_57_ParticleUpdateScript_A1B2C3D4_E5F6G7H8_1234ABCD"
```

**DDC ì €ì¥/ë¡œë“œ íë¦„:**

```
ì»´íŒŒì¼ ì™„ë£Œ í›„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [1] DDCì— ì €ì¥                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  FString DDCKey = BuildNiagaraDDCKeyString(...);        â”‚          â”‚
â”‚  â”‚  TArray<uint8> SerializedData;                          â”‚          â”‚
â”‚  â”‚  FMemoryWriter Ar(SerializedData);                      â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  // FNiagaraVMExecutableData ì§ë ¬í™”                      â”‚          â”‚
â”‚  â”‚  CachedScriptVM.SerializeData(Ar);                      â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  // DDCì— ì €ì¥                                           â”‚          â”‚
â”‚  â”‚  GetDerivedDataCacheRef().Put(                          â”‚          â”‚
â”‚  â”‚      *DDCKey,                                            â”‚          â”‚
â”‚  â”‚      SerializedData,                                     â”‚          â”‚
â”‚  â”‚      /*bPutEvenIfExists=*/ true                         â”‚          â”‚
â”‚  â”‚  );                                                      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                         â”‚
â”‚  [2] DDCì—ì„œ ë¡œë“œ (ë‹¤ìŒ ì‹¤í–‰ ì‹œ)                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  FString DDCKey = BuildNiagaraDDCKeyString(...);        â”‚          â”‚
â”‚  â”‚  TArray<uint8> SerializedData;                          â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  bool bCacheHit = GetDerivedDataCacheRef().GetSynchronous(â”‚        â”‚
â”‚  â”‚      *DDCKey,                                            â”‚          â”‚
â”‚  â”‚      SerializedData                                      â”‚          â”‚
â”‚  â”‚  );                                                      â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  if (bCacheHit)                                          â”‚          â”‚
â”‚  â”‚  {                                                       â”‚          â”‚
â”‚  â”‚      // ì—­ì§ë ¬í™”                                         â”‚          â”‚
â”‚  â”‚      FMemoryReader Ar(SerializedData);                  â”‚          â”‚
â”‚  â”‚      CachedScriptVM.SerializeData(Ar);                  â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚      // âœ… ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥! (ì¬ì»´íŒŒì¼ ë¶ˆí•„ìš”)             â”‚          â”‚
â”‚  â”‚      // ì‹œê°„ ì ˆì•½: ~1000ms â†’ ~100ms (10ë°° ë¹ ë¦„)         â”‚          â”‚
â”‚  â”‚  }                                                       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì—ì…‹ íŒŒì¼ êµ¬ì¡° (*.uasset)

```
MyParticleSystem.uasset (ë°”ì´ë„ˆë¦¬ íŒŒì¼ êµ¬ì¡°):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Header]                                                               â”‚
â”‚  - Package Version                                                      â”‚
â”‚  - Licensee Version                                                     â”‚
â”‚  - Engine Version                                                       â”‚
â”‚  - Summary (Object Count, Name Table, Import Table ë“±)                 â”‚
â”‚                                                                         â”‚
â”‚  [Name Table]                                                           â”‚
â”‚  - "NiagaraScript"                                                      â”‚
â”‚  - "ParticleUpdateScript"                                               â”‚
â”‚  - "Particles.Position"                                                 â”‚
â”‚  - ... (ëª¨ë“  ì´ë¦„ ë¬¸ìì—´)                                               â”‚
â”‚                                                                         â”‚
â”‚  [Import Table]                                                         â”‚
â”‚  - ì™¸ë¶€ ì°¸ì¡° (Engine.CoreUObject, NiagaraCore ë“±)                       â”‚
â”‚                                                                         â”‚
â”‚  [Export Table]                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Export #1: UNiagaraSystem                              â”‚          â”‚
â”‚  â”‚  - System í”„ë¡œí¼í‹°                                       â”‚          â”‚
â”‚  â”‚  - EmitterHandles ë°°ì—´                                  â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  Export #2: UNiagaraEmitter                             â”‚          â”‚
â”‚  â”‚  - Emitter í”„ë¡œí¼í‹°                                      â”‚          â”‚
â”‚  â”‚  - Scripts ë°°ì—´ â†’ Export #3, #4, #5 ì°¸ì¡°               â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  Export #3: UNiagaraScript (ParticleSpawnScript)       â”‚          â”‚
â”‚  â”‚  â”œâ”€ CachedScriptVM (ì§ë ¬í™”ë¨)                           â”‚          â”‚
â”‚  â”‚  â”‚   â”œâ”€ ByteCode: [0x12, 0x34, 0x56, ... ] (N bytes)  â”‚          â”‚
â”‚  â”‚  â”‚   â”œâ”€ NumTempRegisters: 32                           â”‚          â”‚
â”‚  â”‚  â”‚   â”œâ”€ Parameters: [{Name, Type, Offset}, ...]        â”‚          â”‚
â”‚  â”‚  â”‚   â””â”€ DataInterfaceInfo: [{Name, Type, ...}, ...]   â”‚          â”‚
â”‚  â”‚  â”‚                                                      â”‚          â”‚
â”‚  â”‚  â””â”€ ScriptResource (GPU Shader)                        â”‚          â”‚
â”‚  â”‚      â”œâ”€ ShaderMap                                       â”‚          â”‚
â”‚  â”‚      â”œâ”€ Platform: PC-D3D-SM5                            â”‚          â”‚
â”‚  â”‚      â””â”€ ShaderBytecode: [0xAB, 0xCD, ... ] (M bytes)  â”‚          â”‚
â”‚  â”‚                                                          â”‚          â”‚
â”‚  â”‚  Export #4: UNiagaraScript (ParticleUpdateScript)      â”‚          â”‚
â”‚  â”‚  â””â”€ ... (ë™ì¼ êµ¬ì¡°)                                     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

íŒŒì¼ í¬ê¸° ì˜ˆì‹œ (Simple Particle System):
- UNiagaraSystem: ~1 KB
- UNiagaraEmitter: ~2 KB
- UNiagaraScript (SpawnScript):
  - CachedScriptVM (ByteCode): ~5 KB
  - ScriptResource (GPU Shader): ~20 KB
- UNiagaraScript (UpdateScript):
  - CachedScriptVM: ~15 KB
  - ScriptResource: ~50 KB
- Total: ~93 KB
```

### ì¿ í‚¹ ì‹œ ìµœì í™”

```cpp
// ì¿ í‚¹ ì‹œ í”Œë«í¼ë³„ ìµœì í™”
void UNiagaraScript::Serialize(FArchive& Ar)
{
    if (Ar.IsCooking())
    {
        // âœ… íƒ€ê²Ÿ í”Œë«í¼ì— ë§ëŠ” Shaderë§Œ í¬í•¨
        EShaderPlatform TargetPlatform = Ar.CookingTarget()->GetPlatformInfo().ShaderPlatform;

        // âŒ ë‹¤ë¥¸ í”Œë«í¼ Shader ì œê±° (íŒ¨í‚¤ì§€ í¬ê¸° ì ˆì•½)
        if (TargetPlatform == SP_PCD3D_SM5)
        {
            // PCìš© DX11 Shaderë§Œ í¬í•¨
            ScriptResource->StripShaders(~(1 << SP_PCD3D_SM5));
        }
        else if (TargetPlatform == SP_VULKAN_SM5)
        {
            // Vulkan Shaderë§Œ í¬í•¨
            ScriptResource->StripShaders(~(1 << SP_VULKAN_SM5));
        }
        // ...

        // âŒ ì—ë””í„° ì „ìš© ë°ì´í„° ì œê±°
        // - LastHlslTranslation (HLSL ì†ŒìŠ¤)
        // - Source (ê·¸ë˜í”„ ì—ì…‹)
        // - VersionData (ë²„ì „ ê´€ë¦¬ ë°ì´í„°)
    }
}
```

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ (Related Documents)

- **[Overview.md](../Overview.md)** - Niagara ì‹œìŠ¤í…œ ì „ì²´ ê°œìš”
- **[NiagaraSystem.md](NiagaraSystem.md)** - ì‹œìŠ¤í…œ ì»¨í…Œì´ë„ˆ
- **[NiagaraEmitter.md](NiagaraEmitter.md)** - ì—ë¯¸í„° (Scripts ì‚¬ìš©)
- **[Simulation.md](Simulation.md)** - ëŸ°íƒ€ì„ ì‹œë®¬ë ˆì´ì…˜ (ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰)
- **[DataInterface.md](DataInterface.md)** - DataInterface (External Function)

---

## ğŸ“š ì°¸ê³  ìë£Œ (References)

### ì†ŒìŠ¤ íŒŒì¼

- `Engine/Plugins/FX/Niagara/Source/Niagara/Classes/NiagaraScript.h` (1,553 ë¼ì¸)
- `Engine/Plugins/FX/Niagara/Source/Niagara/Private/NiagaraScript.cpp`
- `Engine/Plugins/FX/Niagara/Source/NiagaraEditor/Private/NiagaraCompiler.cpp`

### ê³µì‹ ë¬¸ì„œ

- [Niagara Overview](https://docs.unrealengine.com/5.7/en-US/niagara-overview/)
- [Creating Niagara Scripts](https://docs.unrealengine.com/5.7/en-US/creating-niagara-scripts/)

### ì£¼ìš” API

```cpp
// UNiagaraScript (ì£¼ìš” ë©”ì„œë“œ)
const FNiagaraVMExecutableData& GetVMExecutableData() const;
const FNiagaraVMExecutableDataId& GetVMExecutableDataCompilationId() const;

ENiagaraScriptUsage GetUsage() const;
FGuid GetUsageId() const;

bool IsParticleSpawnScript() const;
bool IsParticleUpdateScript() const;
bool IsModuleScript() const;
bool IsGPUScript() const;

#if WITH_EDITORONLY_DATA
FVersionedNiagaraScriptData* GetLatestScriptData();
FVersionedNiagaraScriptData* GetScriptData(const FGuid& VersionGuid);

void RequestCompile(const FGuid& ScriptVersion, bool bForceCompile = false);
bool AreScriptAndSourceSynchronized(const FGuid& VersionGuid = FGuid()) const;
void InvalidateCompileResults(const FString& Reason);

ENiagaraScriptCompileStatus GetLastCompileStatus() const;
bool IsScriptCompilationPending(bool bGPUScript) const;
bool DidScriptCompilationSucceed(bool bGPUScript) const;

static FString BuildNiagaraDDCKeyString(const FNiagaraVMExecutableDataId& CompileId, const FString& ScriptPath);
#endif

// FNiagaraVMExecutableData (ì£¼ìš” ë©¤ë²„)
FNiagaraVMExecutableByteCode ByteCode;
int32 NumTempRegisters;
int32 NumUserPtrs;
TArray<FVMExternalFunctionBindingInfo> CalledVMExternalFunctions;
TArray<FNiagaraScriptDataInterfaceCompileInfo> DataInterfaceInfo;
ENiagaraScriptCompileStatus LastCompileStatus;

#if WITH_EDITORONLY_DATA
FString LastHlslTranslationGPU;
TArray<FNiagaraCompileEvent> LastCompileEvents;
#endif
```

---

> ğŸ”„ **ì‘ì„±ì¼**: 2025-11-10
> ğŸ“ **ë¬¸ì„œ ë²„ì „**: v1.0
> âœ… **ì†ŒìŠ¤ ê²€ì¦**: UE 5.7.0
> ğŸ“‚ **ë‹¤ìŒ ë¬¸ì„œ**: [Simulation.md](Simulation.md)
