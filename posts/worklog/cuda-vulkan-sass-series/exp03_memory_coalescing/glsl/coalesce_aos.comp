// coalesce_aos.comp â€” Read x field from AoS layout (Vulkan).
#version 450

layout(local_size_x = 256) in;

struct Particle {
    float x, y, z, w;
};

layout(std430, binding = 0) readonly buffer BufIn { Particle particles[]; };
layout(std430, binding = 1) writeonly buffer BufOut { float out_x[]; };

layout(push_constant) uniform PushConstants {
    int N;
};

void main() {
    uint idx = gl_GlobalInvocationID.x;
    if (idx < N) {
        out_x[idx] = particles[idx].x;
    }
}
